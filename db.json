{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/ayer/source/404.html","path":"404.html","modified":0,"renderable":1},{"_id":"themes/ayer/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/ayer/source/css/clipboard.styl","path":"css/clipboard.styl","modified":0,"renderable":1},{"_id":"themes/ayer/source/dist/main.js","path":"dist/main.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/alipay.jpg","path":"images/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/ayer-side.svg","path":"images/ayer-side.svg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/ayer.svg","path":"images/ayer.svg","modified":0,"renderable":1},{"_id":"themes/ayer/source/css/custom.styl","path":"css/custom.styl","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/ayer.png","path":"images/ayer.png","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/forkme.png","path":"images/forkme.png","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover7.jpg","path":"images/cover7.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/busuanzi-2.3.pure.min.js","path":"js/busuanzi-2.3.pure.min.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/wechat.jpg","path":"images/wechat.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/clickLove.js","path":"js/clickLove.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/lazyload.min.js","path":"js/lazyload.min.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/pace.min.js","path":"js/pace.min.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/tocbot.min.js","path":"js/tocbot.min.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/404.jpg","path":"images/404.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/dist/main.css","path":"dist/main.css","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover2.jpg","path":"images/cover2.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/js/jquery-2.0.3.min.js","path":"js/jquery-2.0.3.min.js","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/sponsor.jpg","path":"images/sponsor.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover6.jpg","path":"images/cover6.jpg","modified":0,"renderable":1},{"_id":"source/about/mee.png","path":"about/mee.png","modified":0,"renderable":0},{"_id":"themes/ayer/source/images/cover1.jpg","path":"images/cover1.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover3.jpg","path":"images/cover3.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover4.jpg","path":"images/cover4.jpg","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover8.JPG","path":"images/cover8.JPG","modified":0,"renderable":1},{"_id":"themes/ayer/source/images/cover5.jpg","path":"images/cover5.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/ayer/.gitignore","hash":"568cee11b0fae9c4fc0c2f25307cc062d3c73090","modified":1588923147863},{"_id":"themes/ayer/.postcssrc","hash":"1dd8ddbf9ba6fd3748d0b93c1f0f3d95ec918bf0","modified":1588923147863},{"_id":"themes/ayer/.stylintrc","hash":"557d72b4dcd86e66fc5c688595288cf06b12ce6c","modified":1588923147863},{"_id":"themes/ayer/.travis.yml","hash":"c4bbefb55e020855b98b59657ef0a2816aa97add","modified":1588923147863},{"_id":"themes/ayer/README.md","hash":"22945b86ee8f079ffcbb3710a948b51f0db75594","modified":1588923147864},{"_id":"themes/ayer/_config.yml","hash":"849b0558ef80169bd61acb81ae1521f845734553","modified":1588923147864},{"_id":"themes/ayer/LICENSE","hash":"064037836065f908ffa619cbdae26dea2989ebeb","modified":1588923147864},{"_id":"themes/ayer/package.json","hash":"8c5a97d394b56d0e81d87dc63184543c5f2551a8","modified":1588923147876},{"_id":"source/_posts/TCP.md","hash":"0750af412a36069ad5209b16fa8fab6d9699d301","modified":1590048576967},{"_id":"source/_posts/arithmetic1.md","hash":"1937333efb3e12edc927e05f231161a10caa0271","modified":1589425844722},{"_id":"source/_posts/hello-world.md","hash":"508a0f13e376531d6adf3e9f9c01867a7925ac9d","modified":1590600846109},{"_id":"source/_posts/http.md","hash":"8ee99cfd979f8ad039f16ce43d2aefe4fff486b0","modified":1589962261310},{"_id":"source/_posts/prototype.md","hash":"84f2ead1ecf4c37d2f222b5de28b8cc6d6d4938f","modified":1590210046922},{"_id":"source/_posts/typeof.md","hash":"eb35d389dbb81278a45403d6494ab4530d59f4d9","modified":1590215244396},{"_id":"source/_posts/statusCode.md","hash":"098ee90fdd4c7c198a3f82f3b01e6bbb5e610eff","modified":1589989649425},{"_id":"source/_posts/webpack.md","hash":"26401e700d5fc7d0b11e7dae2ca0eba4299a6a10","modified":1589897135191},{"_id":"source/_posts/webpack02.md","hash":"e664fbf5f51bfaee30c23b4227f24d48690e75bf","modified":1590920168283},{"_id":"source/about/index.md","hash":"2b58cea0678e6132f3a01749f94d2277954ab79d","modified":1588923147859},{"_id":"source/categories/index.md","hash":"e50342fff852932dfa4ff305dafa20a977492275","modified":1588923147862},{"_id":"source/tags/index.md","hash":"ec62908d1adf0fbce2e6de6a48963e1c9d35fe3f","modified":1588923147862},{"_id":"themes/ayer/.github/FUNDING.yml","hash":"85381e9e2d3b868fb4a8a4339bcb7531690d073e","modified":1588923147862},{"_id":"themes/ayer/languages/ja.yml","hash":"0e5b2e814e5827a54e42d4fde69e080efee9b567","modified":1588923147865},{"_id":"themes/ayer/languages/en.yml","hash":"08890246a98692e67636997f395daedf2ec76846","modified":1588923147865},{"_id":"themes/ayer/languages/de.yml","hash":"43ae234bd698525a387d9bfed97bbf6007f3222b","modified":1588923147864},{"_id":"themes/ayer/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1588923147865},{"_id":"themes/ayer/languages/es.yml","hash":"ef2b6d4fd3ee17f55d38db28ed40833933099969","modified":1588923147865},{"_id":"themes/ayer/languages/fr.yml","hash":"ed51a7727ef99d68027f34ec02f31f2c6d553596","modified":1588923147865},{"_id":"themes/ayer/languages/no.yml","hash":"5b40e732a945741f4b32719e9ada512b0d657235","modified":1588923147866},{"_id":"themes/ayer/languages/nl.yml","hash":"8b61f493d91bc9f4e3279128bb8ad61a769f74cb","modified":1588923147866},{"_id":"themes/ayer/languages/ko.yml","hash":"8b42c4ab643a47109adc3573096d8c4432440f93","modified":1588923147866},{"_id":"themes/ayer/languages/pt.yml","hash":"d115086dbf01199e6d7deeeb1e7c539bc3d61512","modified":1588923147866},{"_id":"themes/ayer/languages/ru.yml","hash":"6f0376f3396ba8ea80108a05744d8c31e63d6967","modified":1588923147866},{"_id":"themes/ayer/languages/zh-CN.yml","hash":"703b37666e951eb98665401e937b72c04e63ff4c","modified":1588923147866},{"_id":"themes/ayer/languages/vi.yml","hash":"bbe6a7358e76bf16311d0454a1b2ec0afe9e623f","modified":1588923147866},{"_id":"themes/ayer/languages/zh-TW.yml","hash":"1bec7f20ec2988ba87cccb45265b3b471c2e2270","modified":1588923147866},{"_id":"themes/ayer/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1588923147872},{"_id":"themes/ayer/layout/categories.ejs","hash":"673e8cb93639525c08ee0b0cb9db44b3a628960c","modified":1588923147873},{"_id":"themes/ayer/layout/index.ejs","hash":"77347cbb8635611d8b1fb84bde75f9dedaf8632d","modified":1588923147873},{"_id":"themes/ayer/layout/page.ejs","hash":"a9a48ae63f5d68a36382951166fdd6e482b901f1","modified":1588923147874},{"_id":"themes/ayer/layout/layout.ejs","hash":"ad0d04b0d5322ccb6f371f8c9cd62d2ab87f4bca","modified":1588923147874},{"_id":"themes/ayer/layout/post.ejs","hash":"a9a48ae63f5d68a36382951166fdd6e482b901f1","modified":1588923147875},{"_id":"themes/ayer/scripts/default_config.js","hash":"70d6ee032d75410d540b6789b5949739a47f0125","modified":1588923147878},{"_id":"themes/ayer/layout/tags.ejs","hash":"88b34dd8d7b1e64fa27aa6ed72af996cf6700809","modified":1588923147875},{"_id":"themes/ayer/source/404.html","hash":"1d8673e8a3118f6cdea68cfda2b7ac795876c414","modified":1588923147886},{"_id":"themes/ayer/source/favicon.ico","hash":"473ba682e828a7e34f24fae320e77b6bed4260c7","modified":1588923147888},{"_id":"themes/ayer/source-src/main.js","hash":"77e753cd66579316c8c9e07e673c31ddb6e8e7f2","modified":1588923147886},{"_id":"source/_posts/hello-world/result.png","hash":"b6e44880f80d2b5947e1593cbccf66e5b8af9a6f","modified":1588923147858},{"_id":"themes/ayer/layout/_partial/archive-post.ejs","hash":"9be7173badcca6582c1136204adb3aa432aada21","modified":1588923147867},{"_id":"themes/ayer/layout/_partial/after-footer.ejs","hash":"9fed2187c4f01d1eef52b5b52411512971a9fb6a","modified":1588923147867},{"_id":"themes/ayer/layout/_partial/archive.ejs","hash":"a7065fad7532c5f727e8d0e18771616fea662944","modified":1588923147867},{"_id":"themes/ayer/layout/_partial/ayer.ejs","hash":"ca75120c1b9f9c3d3bd88287c70258a0eb081f83","modified":1588923147867},{"_id":"themes/ayer/layout/_partial/article.ejs","hash":"4556d3a4bfcd8cba596adc11e7097d3d5be1de55","modified":1588923147867},{"_id":"themes/ayer/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1588923147868},{"_id":"themes/ayer/layout/_partial/katex.ejs","hash":"ff2822fd2f6e8a02ce781aecf5bb031db076e882","modified":1588923147868},{"_id":"themes/ayer/layout/_partial/footer.ejs","hash":"a8351beb8ac814f88b24306051cff5108cc46cf3","modified":1589965689656},{"_id":"themes/ayer/layout/_partial/modal.ejs","hash":"cf441365eff1f8143e3c9ae54954d0ebe0a358e5","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/google-analytics.ejs","hash":"5b389110f4d3b727c33c48f088a8bc7f8b577d19","modified":1588923147868},{"_id":"themes/ayer/layout/_partial/music.ejs","hash":"cde5caf73f120b1300ec7539bbf675597688c734","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/sidebar.ejs","hash":"e3b411aef6e5f25f6c5c66b93d653ef70da8d4af","modified":1588923147872},{"_id":"themes/ayer/layout/_partial/head.ejs","hash":"765d38929aa53b98f0281fb4f29635c93466c3ca","modified":1588923147868},{"_id":"themes/ayer/layout/_partial/viewer.ejs","hash":"6663c30882e2b375b15c147080c70d0dcce54a6f","modified":1588923147872},{"_id":"themes/ayer/scripts/filters/index.js","hash":"e435b782178da75656f9616c7af564fb9ff0de50","modified":1588923147878},{"_id":"themes/ayer/scripts/filters/meta_generator.js","hash":"8b3435c4312516dcc266c6b9b8d156a000ca700d","modified":1588923147878},{"_id":"themes/ayer/scripts/helpers/ayer-plus-vendors.js","hash":"7b3df58faaa875d17afbf74ddef5601116f2ce3d","modified":1588923147879},{"_id":"themes/ayer/scripts/helpers/wordcount.js","hash":"f9c8fceb2130929b8f11e22b1c3476c99d1574a8","modified":1588923147879},{"_id":"themes/ayer/scripts/lib/core.js","hash":"7908a82a86d63f35c6f785cacb1cfaf99ae7e0f9","modified":1588923147880},{"_id":"themes/ayer/layout/_partial/mathjax.ejs","hash":"4d633c6cc375a0c81fe0ed2a114b1ac4c3cec2d9","modified":1588923147868},{"_id":"themes/ayer/layout/_partial/totop.ejs","hash":"43ba0cd1f9e898bcbd873b1e9a2d47249d6aaf77","modified":1588923147872},{"_id":"themes/ayer/source/css/clipboard.styl","hash":"017f9b628806eeb199da2e77485cd9ac8e2117b3","modified":1588923147887},{"_id":"themes/ayer/source/dist/main.js","hash":"2c886c8382df92c7af2bd7e446f3e3aa499c829e","modified":1588923147888},{"_id":"themes/ayer/source/images/alipay.jpg","hash":"6a1b5752c7fa8e46b085d73d0b2a202480365088","modified":1588923147890},{"_id":"themes/ayer/source/images/ayer-side.svg","hash":"ad004ce7a873de0f91774f3d5923e010396a07bd","modified":1588923147890},{"_id":"themes/ayer/source/images/ayer.svg","hash":"379c3307f97c364718a1dbc1e52fb14de12eb11a","modified":1588923147892},{"_id":"themes/ayer/source/css/custom.styl","hash":"d58010fc16b01049622d17e60131033deef4fb0c","modified":1588923147887},{"_id":"themes/ayer/source/images/ayer.png","hash":"0466c05244273f645d239cd27513bfa3c50308aa","modified":1588923147891},{"_id":"themes/ayer/source/images/forkme.png","hash":"99c3e21a169421e4f249befb428396c729863a75","modified":1588923147913},{"_id":"themes/ayer/source/images/cover7.jpg","hash":"573bff6899d2d9c5bcba0dc9c60cd1ec9eb8b029","modified":1588923147908},{"_id":"themes/ayer/source/js/busuanzi-2.3.pure.min.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1588923147914},{"_id":"themes/ayer/source/images/wechat.jpg","hash":"cae05c4f6bdd799c3132274191f7006fc85118ca","modified":1588923147914},{"_id":"themes/ayer/source/js/clickLove.js","hash":"a35dfb7ff19796c005ee30b55fd95e39d6d59a89","modified":1588923147914},{"_id":"themes/ayer/source/js/lazyload.min.js","hash":"b801b3946fb9b72e03512c0663458e140e1fa77b","modified":1588923147915},{"_id":"themes/ayer/source/js/search.js","hash":"118be0e0918532ac1225f62e1a0a6f0673e0b173","modified":1588923147916},{"_id":"themes/ayer/source-src/css/_mixins.styl","hash":"6959409df2dd0a1ca05be0c0e9b2a884efdfb82d","modified":1588923147880},{"_id":"themes/ayer/source/js/pace.min.js","hash":"d32ab818e0f97d3b0c80f5631fc23d8a0cb52795","modified":1588923147915},{"_id":"themes/ayer/source-src/css/_extend.styl","hash":"4980e6333c9e28408b65fcd9d89e1cddfa4508dc","modified":1588923147880},{"_id":"themes/ayer/source-src/css/_variables.styl","hash":"910dd0682971a616e1610daec23e7ff5a556df98","modified":1588923147885},{"_id":"themes/ayer/source/js/tocbot.min.js","hash":"bae97e8a24a05a99335f8e725641c8ca9c50502a","modified":1588923147916},{"_id":"themes/ayer/source-src/css/_normalize.styl","hash":"b3337320133b7a336db7033aa6bbe94b054c0b21","modified":1588923147880},{"_id":"themes/ayer/source-src/js/share.js","hash":"a65e4645818e4eb8d4a40d0499e1d04b6ee224bd","modified":1588923147886},{"_id":"themes/ayer/source-src/js/ayer.js","hash":"e0a77037e55ce8cec8a8747d7592a9b424b8e970","modified":1590209184059},{"_id":"themes/ayer/source-src/css/style.styl","hash":"51f58c90dae433b59007e4a323d27b5fd4cd319a","modified":1588923147885},{"_id":"themes/ayer/source/images/404.jpg","hash":"4f36a8d378712427cded03f5166949f5e0ba754c","modified":1588923147889},{"_id":"themes/ayer/source/dist/main.css","hash":"08ec92d9c7cf4f50ef48988a04f7f06b6f784af4","modified":1588923147888},{"_id":"themes/ayer/screenshots/hexo-theme-ayer.png","hash":"4111670e622ce09837b6b9cc641782af75805079","modified":1588923147877},{"_id":"themes/ayer/source/images/cover2.jpg","hash":"f61dd08c95327468c5f6bc5175eff68d00f05b46","modified":1588923147895},{"_id":"themes/ayer/source/js/jquery-2.0.3.min.js","hash":"800edb7787c30f4982bf38f2cb8f4f6fb61340e9","modified":1588923147915},{"_id":"themes/ayer/source/images/sponsor.jpg","hash":"b7e414d680091bc30ff415151bdade48a3be291a","modified":1588923147913},{"_id":"themes/ayer/source-src/css/_remixicon.styl","hash":"cc890008a02430abe15a9cbbdfd87f0dcbedd0b6","modified":1588923147885},{"_id":"source/_posts/hello-world/jt.png","hash":"fb1eb689f5519928685d211d55130a2368dc6edc","modified":1588925813258},{"_id":"themes/ayer/layout/_partial/post/busuanzi.ejs","hash":"2e8836ce04ef22cf8d9ba228363f5b050cd0da03","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/post/albums.ejs","hash":"cfb16c9dda7a609776a28702e0c3854a52e422a7","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/post/category.ejs","hash":"85f0ebeceee1c32623bfa1e4170dbe1e34442fea","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/post/gallery.ejs","hash":"5f8487fe7bed9a09001c6655244ff35f583cf1eb","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/clipboard.ejs","hash":"d6f82b35bbb060ec22c5facf0eea67cf44c396f6","modified":1588923147869},{"_id":"themes/ayer/layout/_partial/post/gitalk.ejs","hash":"917ef5daea9c926aea4703ab3e9911c9f6d16b64","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/justifiedGallery.ejs","hash":"4a21fd3d7335ffcd0661036fee81a927c125e2e2","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/minivaline.ejs","hash":"4c0558f3f27c1f6d9daeed13d31eb8678d3a551e","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/search.ejs","hash":"2c9d19d1685e834aa2020998da2a2d259ce9b9ff","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/nav.ejs","hash":"e59198918e92ef92156aeefbf6023584ac1cae64","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/share.ejs","hash":"0a364766931f48df60b7c92fec8fde1067a93e00","modified":1588923147870},{"_id":"themes/ayer/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1588923147871},{"_id":"themes/ayer/layout/_partial/post/title.ejs","hash":"3b076a65b9847cd6e0d424f5c2874046ef51d4d9","modified":1588923147871},{"_id":"themes/ayer/layout/_partial/post/tocbot.ejs","hash":"9898b0dd9237e21908ba40292a8a9f947bed44d2","modified":1588923147871},{"_id":"themes/ayer/layout/_partial/post/topping.ejs","hash":"fea793e132f627a8148059a9aee8bc33550506d1","modified":1588923147871},{"_id":"themes/ayer/layout/_partial/post/valine.ejs","hash":"6250f3c87a4bf3d437291128c7e60608cf807e10","modified":1588923147871},{"_id":"themes/ayer/layout/_partial/post/word.ejs","hash":"4b8e8455709debd73fba6bf3aad63378c4156dc1","modified":1588923147871},{"_id":"themes/ayer/source/images/cover6.jpg","hash":"a5b8a5dddff2607fee5fccf5fdef3b214a8468cc","modified":1588923147907},{"_id":"themes/ayer/source-src/css/_partial/apple.styl","hash":"e06dce604cc58ec39d677e4e59910c2725684901","modified":1588923147880},{"_id":"themes/ayer/source-src/css/_partial/albums.styl","hash":"0659d5f7469f24a415354ff767d949926465d515","modified":1588923147880},{"_id":"themes/ayer/source-src/css/_partial/article.styl","hash":"5ed306bbd1dbec2f70fb08711a3212566ae637ac","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/archive.styl","hash":"3e61c25e6ae9a25196c6d904731cf6821c950341","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/articles.styl","hash":"39a0bc6c5cf85f0527d6ee81f6feebce8550c1dd","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/categories.styl","hash":"67f4824419c497e54469094f239978dd888a9706","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/ayer.styl","hash":"da46e69f7ecc779ec137deb601c3524524fd758d","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/float.styl","hash":"d888df89a172e4c8119cb8740fc1eae1a9539157","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/footer.styl","hash":"0384890ec33e8e710edcf4fc60d37ca82a499343","modified":1588923147881},{"_id":"themes/ayer/source-src/css/_partial/gallery.styl","hash":"7bdc2c9fb4971dbd7511c5cbb69bd611f20db591","modified":1588923147882},{"_id":"themes/ayer/source-src/css/_partial/gitalk.styl","hash":"3706eef2e0541493f1679a30241d279e29dfdc17","modified":1588923147882},{"_id":"themes/ayer/source-src/css/_partial/highlight.styl","hash":"e894b3a1aff76e84137e1e6db59a75afd0a53f52","modified":1588923147882},{"_id":"themes/ayer/source-src/css/_partial/justifiedGallery.styl","hash":"f2f43ae9831c3df017b35c68caa94f5eb911f697","modified":1588923147883},{"_id":"themes/ayer/source-src/css/_partial/layout.styl","hash":"b1bcdd213115c2fa8331d4e0f620dc7bcad64dc5","modified":1588923147883},{"_id":"themes/ayer/source-src/css/_partial/mobile.styl","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1588923147883},{"_id":"themes/ayer/source-src/css/_partial/lists.styl","hash":"da8a82a48852411c10e279dfee43038d46f4f273","modified":1588923147883},{"_id":"themes/ayer/source-src/css/_partial/navbar.styl","hash":"bc477e4905ab88da711e0049ac3866dd1f88f80a","modified":1588923147883},{"_id":"themes/ayer/source-src/css/_partial/pace.styl","hash":"bde7bf3577c66a3ac829410d52fa2144212282ef","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/reward.styl","hash":"9d06ee41617f5979fa378c6ebfacf394e58f9628","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/search.styl","hash":"f81076fc6d4a83be3371bcb79ab54d88e2605714","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/share.styl","hash":"9ce2dd3ffdc4e170dfcb975a7158f913bc40b8d8","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/sidebar.styl","hash":"600c70f1de82da5223af290d47a583f9c379d188","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/tag.styl","hash":"87df748185edfba222c3f9a4b9ef8eee0e8e5ad3","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/tocbot.styl","hash":"0363c4df6f2714fb7957d72aed7567348b034040","modified":1588923147884},{"_id":"themes/ayer/source-src/css/_partial/totop.styl","hash":"9e9d8dc167ed2c332e4520cbf41244c34c1ebf64","modified":1588923147884},{"_id":"source/about/mee.png","hash":"fcac33bb2449aade2301db39dc6442c7a6efa56c","modified":1588923147861},{"_id":"themes/ayer/source/images/cover1.jpg","hash":"e019fbed6158ae3e4ec3d255b41bddc1afcbfa90","modified":1588923147894},{"_id":"themes/ayer/source/images/cover3.jpg","hash":"7b4e7c9ce19ce5d5c1588b2567e88ecbb04370af","modified":1588923147896},{"_id":"themes/ayer/source/images/cover4.jpg","hash":"77040e609d2f1c60e00a8e47cb95b25bf7ff5b9c","modified":1588923147899},{"_id":"themes/ayer/source/images/cover8.JPG","hash":"c727b624a223842bac74dba304aae70135c0932f","modified":1588923147912},{"_id":"themes/ayer/source/images/cover5.jpg","hash":"1a2d6182d94b015a45fe4bf8e8a239dfcc0ef776","modified":1588923147905},{"_id":"source/_posts/call.md","hash":"274854b5903518de2573f5c450976ea795ce4f4b","modified":1590599452354},{"_id":"source/_posts/render.md","hash":"24c524b9f64f6ea61ab2cd14cde81d09e3a2e6c5","modified":1590217271264},{"_id":"source/_posts/arry.md","hash":"a3c5b8d4b29692356539b6676b4b97c033669c56","modified":1590599452353},{"_id":"source/_posts/this.md","hash":"53bf84ed852994fd6529757b8e608678a810c391","modified":1590599452356},{"_id":"source/_posts/webpack02/ catalogue.jpeg","hash":"836845afd486daea5b52fe7087ad26fa4a3e022f","modified":1590600047985},{"_id":"source/_posts/webpack03.md","hash":"69ba9541baef604adffc672793f3b2afc65bb631","modified":1591628991463},{"_id":"source/_posts/webpack03/warn.png","hash":"efafff60500a240605f366bc0aab4d39a509ee1b","modified":1590923821057},{"_id":"source/_posts/webpack04.md","hash":"1b8fa1fbaa9655b69fc6192cc12615d58d008c79","modified":1597666500091},{"_id":"source/_posts/throttle.md","hash":"6fb8a53e4025fb723d979bf32e19ee9cf6da9fd4","modified":1597734545349}],"Category":[{"name":"网络基础","_id":"ckaj6hfch0004x8s69n522d81"},{"name":"前端技术","_id":"ckaj6hfcm000ax8s6eead0mb4"},{"name":"JS基础","_id":"ckaj6hfcu000lx8s60ms885h3"},{"name":"前端构建工具","_id":"ckaj6hfcz000rx8s6hl2gbmkg"},{"name":"性能优化","_id":"ckdzkgjhs00005lol1yfs906v"}],"Data":[],"Page":[{"title":"About Me","date":"2020-04-13T14:36:43.000Z","_content":"> A Coder, live in Beijing, China.\n\n姓名：CiXin\n现居：北京\nGitHub：[AmilyCi](https://github.com/AmilyCi)\n邮箱：cixinii@163.com\n\n<div align=center>\n\t<img src=\"./mee.png\" width=\"300\">\n</div>","source":"about/index.md","raw":"---\ntitle:  About Me\ndate: 2020-04-13 22:36:43\n---\n> A Coder, live in Beijing, China.\n\n姓名：CiXin\n现居：北京\nGitHub：[AmilyCi](https://github.com/AmilyCi)\n邮箱：cixinii@163.com\n\n<div align=center>\n\t<img src=\"./mee.png\" width=\"300\">\n</div>","updated":"2020-05-08T07:32:27.859Z","path":"about/index.html","comments":1,"layout":"page","_id":"ckaj6hfce0001x8s67dsn1xzp","content":"<blockquote>\n<p>A Coder, live in Beijing, China.</p>\n</blockquote>\n<p>姓名：CiXin<br>现居：北京<br>GitHub：<a href=\"https://github.com/AmilyCi\" target=\"_blank\" rel=\"noopener\">AmilyCi</a><br>邮箱：<a href=\"mailto:cixinii@163.com\">cixinii@163.com</a></p>\n<div align=center>\n    <img src=\"./mee.png\" width=\"300\">\n</div>","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>A Coder, live in Beijing, China.</p>\n</blockquote>\n<p>姓名：CiXin<br>现居：北京<br>GitHub：<a href=\"https://github.com/AmilyCi\" target=\"_blank\" rel=\"noopener\">AmilyCi</a><br>邮箱：<a href=\"mailto:cixinii@163.com\">cixinii@163.com</a></p>\n<div align=center>\n    <img src=\"./mee.png\" width=\"300\">\n</div>"},{"title":"categories","date":"2020-04-13T15:04:29.000Z","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-04-13 23:04:29\nlayout: categories\n---\n","updated":"2020-05-08T07:32:27.862Z","path":"categories/index.html","comments":1,"_id":"ckaj6hfch0003x8s6h1jhbpqt","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2020-04-13T14:55:58.000Z","layout":"tags","_content":"\n","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2020-04-13 22:55:58\nlayout: tags\n---\n\n","updated":"2020-05-08T07:32:27.862Z","path":"tags/index.html","comments":1,"_id":"ckaj6hfck0007x8s64npf1paq","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"TCP的三次握手四次挥手","date":"2020-05-20T16:16:48.000Z","_content":"### 为什么建立连接要三次握手？\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有一次握手，客户端发送连接请求后，没有收到服务端的应答，客户端无法判断连接是否成功。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有两次握手，客户端发出去的第一个连接请求由于某些原因导致延迟，当服务器端收到这个请求时，这个报文早已失效了，但是此时服务器端仍然认为这是客户端建立连接请求的第一次握手，于是客户端回应了服务端，这是第二次握手，因为只有两次握手，所以到这里就已经建立了连接，可是客户端并没有任何数据要发送，而服务端还在傻傻的等候，会造成很大的资源浪费。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果是三次握手，服务器端会等待客户端的第三次握手，如果第三次握手迟迟不来，服务器端就会释放相关资源。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;第三次握手是为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误。所以三次恰恰可以保证数据可靠传输，又提高了传输的效率。\n### TCP建立连接三次握手\n- 第一次握手：建立连接时，客户端发送一个SYN包到服务端，并包含了自己初始序列号a，之后进入SYN_SEND状态，等待服务器确认。\n\n- 第二次握手：服务端收到这个SYN包并确认之后，会回复一个SYN包，并包含了对上一个a包的回应信息ACK，回应信息为下一个希望收到包的序号a+1，还包含了自己的初始序号b。然后服务器进入SYN_RECV状态。\n\n- 第三次握手：客户端收到回应的SYN包后，回复一个ACK包做回应，其中包含了希望下一个收到包的序号b+1\n\n### TCP断开连接四次挥手","source":"_posts/TCP.md","raw":"---\ntitle: TCP的三次握手四次挥手\ndate: 2020-05-21 00:16:48\ntags: TCP\ncategories:\n- 网络基础\n---\n### 为什么建立连接要三次握手？\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有一次握手，客户端发送连接请求后，没有收到服务端的应答，客户端无法判断连接是否成功。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有两次握手，客户端发出去的第一个连接请求由于某些原因导致延迟，当服务器端收到这个请求时，这个报文早已失效了，但是此时服务器端仍然认为这是客户端建立连接请求的第一次握手，于是客户端回应了服务端，这是第二次握手，因为只有两次握手，所以到这里就已经建立了连接，可是客户端并没有任何数据要发送，而服务端还在傻傻的等候，会造成很大的资源浪费。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果是三次握手，服务器端会等待客户端的第三次握手，如果第三次握手迟迟不来，服务器端就会释放相关资源。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;第三次握手是为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误。所以三次恰恰可以保证数据可靠传输，又提高了传输的效率。\n### TCP建立连接三次握手\n- 第一次握手：建立连接时，客户端发送一个SYN包到服务端，并包含了自己初始序列号a，之后进入SYN_SEND状态，等待服务器确认。\n\n- 第二次握手：服务端收到这个SYN包并确认之后，会回复一个SYN包，并包含了对上一个a包的回应信息ACK，回应信息为下一个希望收到包的序号a+1，还包含了自己的初始序号b。然后服务器进入SYN_RECV状态。\n\n- 第三次握手：客户端收到回应的SYN包后，回复一个ACK包做回应，其中包含了希望下一个收到包的序号b+1\n\n### TCP断开连接四次挥手","slug":"TCP","published":1,"updated":"2020-05-21T08:09:36.967Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfc70000x8s6b04p0ynh","content":"<h3 id=\"为什么建立连接要三次握手？\"><a href=\"#为什么建立连接要三次握手？\" class=\"headerlink\" title=\"为什么建立连接要三次握手？\"></a>为什么建立连接要三次握手？</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有一次握手，客户端发送连接请求后，没有收到服务端的应答，客户端无法判断连接是否成功。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有两次握手，客户端发出去的第一个连接请求由于某些原因导致延迟，当服务器端收到这个请求时，这个报文早已失效了，但是此时服务器端仍然认为这是客户端建立连接请求的第一次握手，于是客户端回应了服务端，这是第二次握手，因为只有两次握手，所以到这里就已经建立了连接，可是客户端并没有任何数据要发送，而服务端还在傻傻的等候，会造成很大的资源浪费。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果是三次握手，服务器端会等待客户端的第三次握手，如果第三次握手迟迟不来，服务器端就会释放相关资源。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;第三次握手是为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误。所以三次恰恰可以保证数据可靠传输，又提高了传输的效率。</p>\n<h3 id=\"TCP建立连接三次握手\"><a href=\"#TCP建立连接三次握手\" class=\"headerlink\" title=\"TCP建立连接三次握手\"></a>TCP建立连接三次握手</h3><ul>\n<li><p>第一次握手：建立连接时，客户端发送一个SYN包到服务端，并包含了自己初始序列号a，之后进入SYN_SEND状态，等待服务器确认。</p>\n</li>\n<li><p>第二次握手：服务端收到这个SYN包并确认之后，会回复一个SYN包，并包含了对上一个a包的回应信息ACK，回应信息为下一个希望收到包的序号a+1，还包含了自己的初始序号b。然后服务器进入SYN_RECV状态。</p>\n</li>\n<li><p>第三次握手：客户端收到回应的SYN包后，回复一个ACK包做回应，其中包含了希望下一个收到包的序号b+1</p>\n</li>\n</ul>\n<h3 id=\"TCP断开连接四次挥手\"><a href=\"#TCP断开连接四次挥手\" class=\"headerlink\" title=\"TCP断开连接四次挥手\"></a>TCP断开连接四次挥手</h3>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"为什么建立连接要三次握手？\"><a href=\"#为什么建立连接要三次握手？\" class=\"headerlink\" title=\"为什么建立连接要三次握手？\"></a>为什么建立连接要三次握手？</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有一次握手，客户端发送连接请求后，没有收到服务端的应答，客户端无法判断连接是否成功。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果只有两次握手，客户端发出去的第一个连接请求由于某些原因导致延迟，当服务器端收到这个请求时，这个报文早已失效了，但是此时服务器端仍然认为这是客户端建立连接请求的第一次握手，于是客户端回应了服务端，这是第二次握手，因为只有两次握手，所以到这里就已经建立了连接，可是客户端并没有任何数据要发送，而服务端还在傻傻的等候，会造成很大的资源浪费。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果是三次握手，服务器端会等待客户端的第三次握手，如果第三次握手迟迟不来，服务器端就会释放相关资源。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;第三次握手是为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误。所以三次恰恰可以保证数据可靠传输，又提高了传输的效率。</p>\n<h3 id=\"TCP建立连接三次握手\"><a href=\"#TCP建立连接三次握手\" class=\"headerlink\" title=\"TCP建立连接三次握手\"></a>TCP建立连接三次握手</h3><ul>\n<li><p>第一次握手：建立连接时，客户端发送一个SYN包到服务端，并包含了自己初始序列号a，之后进入SYN_SEND状态，等待服务器确认。</p>\n</li>\n<li><p>第二次握手：服务端收到这个SYN包并确认之后，会回复一个SYN包，并包含了对上一个a包的回应信息ACK，回应信息为下一个希望收到包的序号a+1，还包含了自己的初始序号b。然后服务器进入SYN_RECV状态。</p>\n</li>\n<li><p>第三次握手：客户端收到回应的SYN包后，回复一个ACK包做回应，其中包含了希望下一个收到包的序号b+1</p>\n</li>\n</ul>\n<h3 id=\"TCP断开连接四次挥手\"><a href=\"#TCP断开连接四次挥手\" class=\"headerlink\" title=\"TCP断开连接四次挥手\"></a>TCP断开连接四次挥手</h3>"},{"title":"常见的算法题","date":"2020-05-09T07:35:28.000Z","_content":"### 1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。</br>任务是：找出所有项的和最大的 arr 数组的连续子数组。</br>写出函数 getMaxSubSum(arr)，用其找出并返回最大和。</br>例如：\n```js\ngetMaxSubSum([-1, 2, 3, -9]) == 5\ngetMaxSubSum([2, -1, 2, 3, -9]) == 6\ngetMaxSubSum([-1, 2, 3, -9, 11]) == 11\ngetMaxSubSum([-2, -1, 1, 2]) == 3\ngetMaxSubSum([100, -9, 2, -3, 5]) == 100\ngetMaxSubSum([1, 2, 3]) == 6\n```\n- 方案一：需要循环两次\n```js\nfunction getMaxSubSum(arr) {\n  let maxSum = 0;\n  for (let i = 0; i < arr.length; i++ ){\n    let partSum = 0;\n    for (let j = i; j < arr.length; j++){\n      partSum += arr[j]\n      maxSum = Math.max(maxSum, partSum)\n    }\n  }\n  return maxSum\n}\n```\n- 方案二：只需要循环一次，最优解\n```js\nfunction getMaxSubSum(arr) {\n  let maxSum = 0;\n  let partSum = 0;\n  for (let item of arr){\n    partSum += item\n    maxSum = Math.max(maxSum, partSum)\n    if (partSum < 0) partSum = 0\n  }\n  return maxSum\n}\n```\n\n### 2、数组去重\n```js\nlet arr = [\"Hare\", \"Krishna\", \"Hare\", \"Krishna\",\"Krishna\", \"Krishna\", \"Hare\", \"Hare\", \":-O\", 3, 11, 20, 11, 0, 3]\nunique(arr) // [\"Hare\", \"Krishna\", \":-O\", 3, 11, 20, 0]\n```\n- 方案一：(因为for循环对数组的每一项都进行了校验，所以仅适用于小型数组)\n```js\nfunction unique(arr) {\n  let result = []\n  for (let item of arr) {\n    if(!result.includes(item)){\n      result.push(item)\n    }\n  }\n  return result\n}\n```\n- 方案二：\n```js\nfunction unique(arr) {\n  return Array.form(new Set(arr))\n}\n```\n\n### 3、实现一个函数,可以计算出x的n次方\n- 方案一：\n```js\nfunction pow(x, n) {\n  let result = 1\n  for (let i = 0; i < n; i++){\n    result *= x\n  }\n  return result\n}\npow(2, 3) //8\n```\n- 方案二：\n```js\nfunction pow(x, n) {\n  if(n == 1){\n    return x\n  }else{\n    return x * pow(x, n - 1)\n  }\n}\npow(2, 3) //8\n```","source":"_posts/arithmetic1.md","raw":"---\ntitle: 常见的算法题\ndate: 2020-05-09 15:35:28\ncategories:\n- 前端技术\ntags:\n- 算法\n---\n### 1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。</br>任务是：找出所有项的和最大的 arr 数组的连续子数组。</br>写出函数 getMaxSubSum(arr)，用其找出并返回最大和。</br>例如：\n```js\ngetMaxSubSum([-1, 2, 3, -9]) == 5\ngetMaxSubSum([2, -1, 2, 3, -9]) == 6\ngetMaxSubSum([-1, 2, 3, -9, 11]) == 11\ngetMaxSubSum([-2, -1, 1, 2]) == 3\ngetMaxSubSum([100, -9, 2, -3, 5]) == 100\ngetMaxSubSum([1, 2, 3]) == 6\n```\n- 方案一：需要循环两次\n```js\nfunction getMaxSubSum(arr) {\n  let maxSum = 0;\n  for (let i = 0; i < arr.length; i++ ){\n    let partSum = 0;\n    for (let j = i; j < arr.length; j++){\n      partSum += arr[j]\n      maxSum = Math.max(maxSum, partSum)\n    }\n  }\n  return maxSum\n}\n```\n- 方案二：只需要循环一次，最优解\n```js\nfunction getMaxSubSum(arr) {\n  let maxSum = 0;\n  let partSum = 0;\n  for (let item of arr){\n    partSum += item\n    maxSum = Math.max(maxSum, partSum)\n    if (partSum < 0) partSum = 0\n  }\n  return maxSum\n}\n```\n\n### 2、数组去重\n```js\nlet arr = [\"Hare\", \"Krishna\", \"Hare\", \"Krishna\",\"Krishna\", \"Krishna\", \"Hare\", \"Hare\", \":-O\", 3, 11, 20, 11, 0, 3]\nunique(arr) // [\"Hare\", \"Krishna\", \":-O\", 3, 11, 20, 0]\n```\n- 方案一：(因为for循环对数组的每一项都进行了校验，所以仅适用于小型数组)\n```js\nfunction unique(arr) {\n  let result = []\n  for (let item of arr) {\n    if(!result.includes(item)){\n      result.push(item)\n    }\n  }\n  return result\n}\n```\n- 方案二：\n```js\nfunction unique(arr) {\n  return Array.form(new Set(arr))\n}\n```\n\n### 3、实现一个函数,可以计算出x的n次方\n- 方案一：\n```js\nfunction pow(x, n) {\n  let result = 1\n  for (let i = 0; i < n; i++){\n    result *= x\n  }\n  return result\n}\npow(2, 3) //8\n```\n- 方案二：\n```js\nfunction pow(x, n) {\n  if(n == 1){\n    return x\n  }else{\n    return x * pow(x, n - 1)\n  }\n}\npow(2, 3) //8\n```","slug":"arithmetic1","published":1,"updated":"2020-05-14T03:10:44.722Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfcf0002x8s6eoos6dv7","content":"<h3 id=\"1、输入是以数字组成的数组，例如-arr-1-2-3-4-9-6-。任务是：找出所有项的和最大的-arr-数组的连续子数组。写出函数-getMaxSubSum-arr-，用其找出并返回最大和。例如：\"><a href=\"#1、输入是以数字组成的数组，例如-arr-1-2-3-4-9-6-。任务是：找出所有项的和最大的-arr-数组的连续子数组。写出函数-getMaxSubSum-arr-，用其找出并返回最大和。例如：\" class=\"headerlink\" title=\"1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。任务是：找出所有项的和最大的 arr 数组的连续子数组。写出函数 getMaxSubSum(arr)，用其找出并返回最大和。例如：\"></a>1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。</br>任务是：找出所有项的和最大的 arr 数组的连续子数组。</br>写出函数 getMaxSubSum(arr)，用其找出并返回最大和。</br>例如：</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">getMaxSubSum([<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>]) == <span class=\"hljs-number\">5</span><br>getMaxSubSum([<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>]) == <span class=\"hljs-number\">6</span><br>getMaxSubSum([<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>, <span class=\"hljs-number\">11</span>]) == <span class=\"hljs-number\">11</span><br>getMaxSubSum([<span class=\"hljs-number\">-2</span>, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]) == <span class=\"hljs-number\">3</span><br>getMaxSubSum([<span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">-9</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">-3</span>, <span class=\"hljs-number\">5</span>]) == <span class=\"hljs-number\">100</span><br>getMaxSubSum([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]) == <span class=\"hljs-number\">6</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>方案一：需要循环两次<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getMaxSubSum</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> maxSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; arr.length; i++ )&#123;<br>    <span class=\"hljs-keyword\">let</span> partSum = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> j = i; j &lt; arr.length; j++)&#123;<br>      partSum += arr[j]<br>      maxSum = <span class=\"hljs-built_in\">Math</span>.max(maxSum, partSum)<br>    &#125;<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> maxSum<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>方案二：只需要循环一次，最优解<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getMaxSubSum</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> maxSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">let</span> partSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> item <span class=\"hljs-keyword\">of</span> arr)&#123;<br>    partSum += item<br>    maxSum = <span class=\"hljs-built_in\">Math</span>.max(maxSum, partSum)<br>    <span class=\"hljs-keyword\">if</span> (partSum &lt; <span class=\"hljs-number\">0</span>) partSum = <span class=\"hljs-number\">0</span><br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> maxSum<br>&#125;<br></code></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"2、数组去重\"><a href=\"#2、数组去重\" class=\"headerlink\" title=\"2、数组去重\"></a>2、数组去重</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">let</span> arr = [<span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>,<span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\":-O\"</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>]<br>unique(arr) <span class=\"hljs-comment\">// [\"Hare\", \"Krishna\", \":-O\", 3, 11, 20, 0]</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>方案一：(因为for循环对数组的每一项都进行了校验，所以仅适用于小型数组)<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">unique</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> result = []<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> item <span class=\"hljs-keyword\">of</span> arr) &#123;<br>    <span class=\"hljs-keyword\">if</span>(!result.includes(item))&#123;<br>      result.push(item)<br>    &#125;<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> result<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>方案二：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">unique</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">Array</span>.form(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(arr))<br>&#125;<br></code></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"3、实现一个函数-可以计算出x的n次方\"><a href=\"#3、实现一个函数-可以计算出x的n次方\" class=\"headerlink\" title=\"3、实现一个函数,可以计算出x的n次方\"></a>3、实现一个函数,可以计算出x的n次方</h3><ul>\n<li>方案一：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">pow</span>(<span class=\"hljs-params\">x, n</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> result = <span class=\"hljs-number\">1</span><br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++)&#123;<br>    result *= x<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> result<br>&#125;<br>pow(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//8</span><br></code></pre></td></tr></table></figure></li>\n<li>方案二：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">pow</span>(<span class=\"hljs-params\">x, n</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">if</span>(n == <span class=\"hljs-number\">1</span>)&#123;<br>    <span class=\"hljs-keyword\">return</span> x<br>  &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>    <span class=\"hljs-keyword\">return</span> x * pow(x, n - <span class=\"hljs-number\">1</span>)<br>  &#125;<br>&#125;<br>pow(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//8</span><br></code></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1、输入是以数字组成的数组，例如-arr-1-2-3-4-9-6-。任务是：找出所有项的和最大的-arr-数组的连续子数组。写出函数-getMaxSubSum-arr-，用其找出并返回最大和。例如：\"><a href=\"#1、输入是以数字组成的数组，例如-arr-1-2-3-4-9-6-。任务是：找出所有项的和最大的-arr-数组的连续子数组。写出函数-getMaxSubSum-arr-，用其找出并返回最大和。例如：\" class=\"headerlink\" title=\"1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。任务是：找出所有项的和最大的 arr 数组的连续子数组。写出函数 getMaxSubSum(arr)，用其找出并返回最大和。例如：\"></a>1、输入是以数字组成的数组，例如 arr = [1, -2, 3, 4, -9, 6]。</br>任务是：找出所有项的和最大的 arr 数组的连续子数组。</br>写出函数 getMaxSubSum(arr)，用其找出并返回最大和。</br>例如：</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">getMaxSubSum([<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>]) == <span class=\"hljs-number\">5</span><br>getMaxSubSum([<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>]) == <span class=\"hljs-number\">6</span><br>getMaxSubSum([<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">-9</span>, <span class=\"hljs-number\">11</span>]) == <span class=\"hljs-number\">11</span><br>getMaxSubSum([<span class=\"hljs-number\">-2</span>, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]) == <span class=\"hljs-number\">3</span><br>getMaxSubSum([<span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">-9</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">-3</span>, <span class=\"hljs-number\">5</span>]) == <span class=\"hljs-number\">100</span><br>getMaxSubSum([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]) == <span class=\"hljs-number\">6</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>方案一：需要循环两次<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getMaxSubSum</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> maxSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; arr.length; i++ )&#123;<br>    <span class=\"hljs-keyword\">let</span> partSum = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> j = i; j &lt; arr.length; j++)&#123;<br>      partSum += arr[j]<br>      maxSum = <span class=\"hljs-built_in\">Math</span>.max(maxSum, partSum)<br>    &#125;<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> maxSum<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>方案二：只需要循环一次，最优解<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getMaxSubSum</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> maxSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">let</span> partSum = <span class=\"hljs-number\">0</span>;<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> item <span class=\"hljs-keyword\">of</span> arr)&#123;<br>    partSum += item<br>    maxSum = <span class=\"hljs-built_in\">Math</span>.max(maxSum, partSum)<br>    <span class=\"hljs-keyword\">if</span> (partSum &lt; <span class=\"hljs-number\">0</span>) partSum = <span class=\"hljs-number\">0</span><br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> maxSum<br>&#125;<br></code></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"2、数组去重\"><a href=\"#2、数组去重\" class=\"headerlink\" title=\"2、数组去重\"></a>2、数组去重</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">let</span> arr = [<span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>,<span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Krishna\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\"Hare\"</span>, <span class=\"hljs-string\">\":-O\"</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>]<br>unique(arr) <span class=\"hljs-comment\">// [\"Hare\", \"Krishna\", \":-O\", 3, 11, 20, 0]</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>方案一：(因为for循环对数组的每一项都进行了校验，所以仅适用于小型数组)<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">unique</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> result = []<br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> item <span class=\"hljs-keyword\">of</span> arr) &#123;<br>    <span class=\"hljs-keyword\">if</span>(!result.includes(item))&#123;<br>      result.push(item)<br>    &#125;<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> result<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>方案二：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">unique</span>(<span class=\"hljs-params\">arr</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">Array</span>.form(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(arr))<br>&#125;<br></code></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"3、实现一个函数-可以计算出x的n次方\"><a href=\"#3、实现一个函数-可以计算出x的n次方\" class=\"headerlink\" title=\"3、实现一个函数,可以计算出x的n次方\"></a>3、实现一个函数,可以计算出x的n次方</h3><ul>\n<li>方案一：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">pow</span>(<span class=\"hljs-params\">x, n</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> result = <span class=\"hljs-number\">1</span><br>  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++)&#123;<br>    result *= x<br>  &#125;<br>  <span class=\"hljs-keyword\">return</span> result<br>&#125;<br>pow(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//8</span><br></code></pre></td></tr></table></figure></li>\n<li>方案二：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">pow</span>(<span class=\"hljs-params\">x, n</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">if</span>(n == <span class=\"hljs-number\">1</span>)&#123;<br>    <span class=\"hljs-keyword\">return</span> x<br>  &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>    <span class=\"hljs-keyword\">return</span> x * pow(x, n - <span class=\"hljs-number\">1</span>)<br>  &#125;<br>&#125;<br>pow(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>) <span class=\"hljs-comment\">//8</span><br></code></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"前端跨域解决方案","_content":"&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;说到跨域我们不得不先来说说为什么会产生跨域。其实跨域就是指浏览器不能执行其它网站的脚本，它是由浏览器的同源策略造成的，是浏览器对javascript施加的安全限制。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;那什么又是同源策略呢？同源策略是一种约定，它是浏览器最核心也最基本的安全功能，所谓的同源是指域名、协议、端口相同。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;下面就让我来介绍几种解决跨域的方法吧！\n### 1、JSONP\n- 原理：就是利用```<script> ```标签没有跨域限制的漏洞。通过```<script>```标签指向一个需要访问的地址并提供一个回调函数来接收数据当需要通讯时。\n客户端\n```xml\n<script>\n    function jsonp(data) {\n        console.log(data)\n    }\n</script>\n<script type=\"text/javascript\" src=\"http://127.0.0.1:8888/get/jsonp?callback=jsonp\"></script>\n```\n服务端\n```js\nrouter.get('/get/jsonp', (ctx, next) => {\n    let callbackName = ctx.callback || 'callback'\n    let data = {\n        \"errcode\": 0,\n        \"data\": {\n            \"name\": \"cx\",\n            \"sex\": \"girl\",\n            \"address\": \"BeiJing\"\n        }\n    let jsonpStr = `~${callbackName}(${JSON.stringify(data)})`\n    ctx.type = 'text/javascript'\n    ctx.body = jsonpStr\n    }\n})\n```\n页面显示\n![](./hello-world/result.png)\n- 优点\n    - JSONP 使用简单且兼容性不错\n- 缺点\n    - 只限于 get 请求（即只读）\n    - 它只支持跨域HTTP这种情况\n    - jsonp在调用失败的时候，不会返回各种HTTP状态码（jsonp的错误处理机制并不完善，我们没办法进行错误处理）\n    - 需要客户端和服务端定制进行开发，服务端返回的数据不是标准的json数据，而是callback包裹的数据\n    - JSONP只会发一次请求\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在我们开发中可能会遇到多个JSONP请求的回调函数名是相同的，这时候就需要自己封装一个JSONP，下面是实现的代码\n```js\nfunction jsonp(url, jsonpCallback, success) {\n    let script = document.createElement('script')\n    script.src = url\n    script.async = true\n    script.type = 'text/javascript'\n    window[jsonpCallback] = function(data) {\n        success && success(data)\n    }\n    document.body.appendChild(script)\n}\njsonp('http://127.0.0.1:8888/get/jsonp', 'callback', function(value) {\n    console.log(value)\n})\n```\n\n### 2、CORS\n- 原理：服务端设置 Access-Control-Allow-Origin 就可以开启 CORS。 该属性表示哪些域名可以访问资源，如果设置通配符则表示所有网站都可以访问资源。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然设置 CORS和前端没什么关系，但是通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为简单请求和复杂请求\n#### 简单请求\n1、使用下列方法之一：\n- GET\n- HEAD\n- POST\n\n2、HTTP头信息不超出以下几种字段：\n- Accept\n- Accept-Language\n- Content-Language\n- Last-Event-ID\n- Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain\n\n#### 复杂请求\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;不满足简单请求的就是复杂请求，对于复杂请求来说，首先会发起一个预检请求，该请求是 option 方法，通过该请求来知道服务端是否允许跨域请求。当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给该请求加一个请求头：Origin，后台进行一系列处理，如果确定接受请求则在返回结果中加入一个响应头：Access-Control-Allow-Origin;浏览器判断该相应头中是否包含Origin的值，如果有则浏览器会处理响应，我们就可以拿到响应数据，如果不包含浏览器直接驳回，这时我们无法拿到响应数据。\n- 优点：\n  - CORS支持所有的浏览器请求类型，承载的请求数据量更大，开放更简洁，服务端只需要将处理后的数据直接返回，不需要再特殊处理。\n  - CORS可以通过onerror事件监听错误，并且浏览器控制台会看到报错信息，利于排查。\n\n### 3、document.domain\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;该方法只能用于主域名相同的情况下,比如```a.test.com``` 和 ```b.test.com```,只需要给页面添加```document.domain = 'test.com'```就可以实现跨域。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;比如我们可以打开 [id.qq.com](https://id.qq.com/login/ptlogin.html)，调出控制台，输入```let w = window.open('http://www.qq.com')```，之后访问```w.document```，发现控制台会报出跨域相关的错误。这时我们再在控制台中输入```document.domain = 'qq.com'```，再访问```w.document```，这样就可以了。\n![](./hello-world/jt.png)\n- 注意：两个域名的主域名必须相同，并且所有的协议、端口都要一致，否则无法利用document.domain进行跨域。\n\n### 4、postMessage\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这种方式一般会用在iframe嵌入其他页面时需要通信的情况下，只要正确的使用，这种方法很安全。\n```xml\n<iframe id=\"iframe\" src=\"http://test.com\"></iframe>\n```\n```js\n// 发送端\nconst iframe = document.getElementById('iframe);\niframe.contentWindow.postMessage('{\"method\":\"closeWindows\"}', \"http://test.com\")\n```\n```js\n//接收端\nwindow.addEventListener(\"message\", function(e){\n  console.log(e.data)\n}, false)\n```\n- 注意：\n  - 当使用postMessage将数据发送到其他窗口时，始终指定精确的目标origin，而不是*。 恶意网站可以在您不知情的情况下更改窗口的位置，因此它可以拦截使用postMessage发送的数据。\n  - 如果不希望从其他网站接收message，不要为message事件添加任何事件侦听器，这是一个完全万无一失的方式来避免安全问题。","source":"_posts/hello-world.md","raw":"---\ntitle: 前端跨域解决方案\ncategories:\n- 前端技术\n---\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;说到跨域我们不得不先来说说为什么会产生跨域。其实跨域就是指浏览器不能执行其它网站的脚本，它是由浏览器的同源策略造成的，是浏览器对javascript施加的安全限制。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;那什么又是同源策略呢？同源策略是一种约定，它是浏览器最核心也最基本的安全功能，所谓的同源是指域名、协议、端口相同。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;下面就让我来介绍几种解决跨域的方法吧！\n### 1、JSONP\n- 原理：就是利用```<script> ```标签没有跨域限制的漏洞。通过```<script>```标签指向一个需要访问的地址并提供一个回调函数来接收数据当需要通讯时。\n客户端\n```xml\n<script>\n    function jsonp(data) {\n        console.log(data)\n    }\n</script>\n<script type=\"text/javascript\" src=\"http://127.0.0.1:8888/get/jsonp?callback=jsonp\"></script>\n```\n服务端\n```js\nrouter.get('/get/jsonp', (ctx, next) => {\n    let callbackName = ctx.callback || 'callback'\n    let data = {\n        \"errcode\": 0,\n        \"data\": {\n            \"name\": \"cx\",\n            \"sex\": \"girl\",\n            \"address\": \"BeiJing\"\n        }\n    let jsonpStr = `~${callbackName}(${JSON.stringify(data)})`\n    ctx.type = 'text/javascript'\n    ctx.body = jsonpStr\n    }\n})\n```\n页面显示\n![](./hello-world/result.png)\n- 优点\n    - JSONP 使用简单且兼容性不错\n- 缺点\n    - 只限于 get 请求（即只读）\n    - 它只支持跨域HTTP这种情况\n    - jsonp在调用失败的时候，不会返回各种HTTP状态码（jsonp的错误处理机制并不完善，我们没办法进行错误处理）\n    - 需要客户端和服务端定制进行开发，服务端返回的数据不是标准的json数据，而是callback包裹的数据\n    - JSONP只会发一次请求\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在我们开发中可能会遇到多个JSONP请求的回调函数名是相同的，这时候就需要自己封装一个JSONP，下面是实现的代码\n```js\nfunction jsonp(url, jsonpCallback, success) {\n    let script = document.createElement('script')\n    script.src = url\n    script.async = true\n    script.type = 'text/javascript'\n    window[jsonpCallback] = function(data) {\n        success && success(data)\n    }\n    document.body.appendChild(script)\n}\njsonp('http://127.0.0.1:8888/get/jsonp', 'callback', function(value) {\n    console.log(value)\n})\n```\n\n### 2、CORS\n- 原理：服务端设置 Access-Control-Allow-Origin 就可以开启 CORS。 该属性表示哪些域名可以访问资源，如果设置通配符则表示所有网站都可以访问资源。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然设置 CORS和前端没什么关系，但是通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为简单请求和复杂请求\n#### 简单请求\n1、使用下列方法之一：\n- GET\n- HEAD\n- POST\n\n2、HTTP头信息不超出以下几种字段：\n- Accept\n- Accept-Language\n- Content-Language\n- Last-Event-ID\n- Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain\n\n#### 复杂请求\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;不满足简单请求的就是复杂请求，对于复杂请求来说，首先会发起一个预检请求，该请求是 option 方法，通过该请求来知道服务端是否允许跨域请求。当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给该请求加一个请求头：Origin，后台进行一系列处理，如果确定接受请求则在返回结果中加入一个响应头：Access-Control-Allow-Origin;浏览器判断该相应头中是否包含Origin的值，如果有则浏览器会处理响应，我们就可以拿到响应数据，如果不包含浏览器直接驳回，这时我们无法拿到响应数据。\n- 优点：\n  - CORS支持所有的浏览器请求类型，承载的请求数据量更大，开放更简洁，服务端只需要将处理后的数据直接返回，不需要再特殊处理。\n  - CORS可以通过onerror事件监听错误，并且浏览器控制台会看到报错信息，利于排查。\n\n### 3、document.domain\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;该方法只能用于主域名相同的情况下,比如```a.test.com``` 和 ```b.test.com```,只需要给页面添加```document.domain = 'test.com'```就可以实现跨域。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;比如我们可以打开 [id.qq.com](https://id.qq.com/login/ptlogin.html)，调出控制台，输入```let w = window.open('http://www.qq.com')```，之后访问```w.document```，发现控制台会报出跨域相关的错误。这时我们再在控制台中输入```document.domain = 'qq.com'```，再访问```w.document```，这样就可以了。\n![](./hello-world/jt.png)\n- 注意：两个域名的主域名必须相同，并且所有的协议、端口都要一致，否则无法利用document.domain进行跨域。\n\n### 4、postMessage\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这种方式一般会用在iframe嵌入其他页面时需要通信的情况下，只要正确的使用，这种方法很安全。\n```xml\n<iframe id=\"iframe\" src=\"http://test.com\"></iframe>\n```\n```js\n// 发送端\nconst iframe = document.getElementById('iframe);\niframe.contentWindow.postMessage('{\"method\":\"closeWindows\"}', \"http://test.com\")\n```\n```js\n//接收端\nwindow.addEventListener(\"message\", function(e){\n  console.log(e.data)\n}, false)\n```\n- 注意：\n  - 当使用postMessage将数据发送到其他窗口时，始终指定精确的目标origin，而不是*。 恶意网站可以在您不知情的情况下更改窗口的位置，因此它可以拦截使用postMessage发送的数据。\n  - 如果不希望从其他网站接收message，不要为message事件添加任何事件侦听器，这是一个完全万无一失的方式来避免安全问题。","slug":"hello-world","published":1,"date":"2020-05-27T17:34:06.108Z","updated":"2020-05-27T17:34:06.109Z","_id":"ckaj6hfcj0006x8s68eg23mqw","comments":1,"layout":"post","photos":[],"link":"","content":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;说到跨域我们不得不先来说说为什么会产生跨域。其实跨域就是指浏览器不能执行其它网站的脚本，它是由浏览器的同源策略造成的，是浏览器对javascript施加的安全限制。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;那什么又是同源策略呢？同源策略是一种约定，它是浏览器最核心也最基本的安全功能，所谓的同源是指域名、协议、端口相同。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;下面就让我来介绍几种解决跨域的方法吧！</p>\n<h3 id=\"1、JSONP\"><a href=\"#1、JSONP\" class=\"headerlink\" title=\"1、JSONP\"></a>1、JSONP</h3><ul>\n<li>原理：就是利用<code>&lt;script&gt;</code>标签没有跨域限制的漏洞。通过<code>&lt;script&gt;</code>标签指向一个需要访问的地址并提供一个回调函数来接收数据当需要通讯时。<br>客户端<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"actionscript\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonp</span><span class=\"hljs-params\">(data)</span> </span>&#123;</span><br><span class=\"javascript\">        <span class=\"hljs-built_in\">console</span>.log(data)</span><br>    &#125;<br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"http://127.0.0.1:8888/get/jsonp?callback=jsonp\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br></code></pre></td></tr></table></figure>\n服务端<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">router.get(<span class=\"hljs-string\">'/get/jsonp'</span>, (ctx, next) =&gt; &#123;<br>    <span class=\"hljs-keyword\">let</span> callbackName = ctx.callback || <span class=\"hljs-string\">'callback'</span><br>    <span class=\"hljs-keyword\">let</span> data = &#123;<br>        <span class=\"hljs-string\">\"errcode\"</span>: <span class=\"hljs-number\">0</span>,<br>        <span class=\"hljs-string\">\"data\"</span>: &#123;<br>            <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"cx\"</span>,<br>            <span class=\"hljs-string\">\"sex\"</span>: <span class=\"hljs-string\">\"girl\"</span>,<br>            <span class=\"hljs-string\">\"address\"</span>: <span class=\"hljs-string\">\"BeiJing\"</span><br>        &#125;<br>    <span class=\"hljs-keyword\">let</span> jsonpStr = <span class=\"hljs-string\">`~<span class=\"hljs-subst\">$&#123;callbackName&#125;</span>(<span class=\"hljs-subst\">$&#123;<span class=\"hljs-built_in\">JSON</span>.stringify(data)&#125;</span>)`</span><br>    ctx.type = <span class=\"hljs-string\">'text/javascript'</span><br>    ctx.body = jsonpStr<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n页面显示<img src=\"/blog/2020/05/28/hello-world/result.png\" class=\"\"></li>\n<li>优点<ul>\n<li>JSONP 使用简单且兼容性不错</li>\n</ul>\n</li>\n<li>缺点<ul>\n<li>只限于 get 请求（即只读）</li>\n<li>它只支持跨域HTTP这种情况</li>\n<li>jsonp在调用失败的时候，不会返回各种HTTP状态码（jsonp的错误处理机制并不完善，我们没办法进行错误处理）</li>\n<li>需要客户端和服务端定制进行开发，服务端返回的数据不是标准的json数据，而是callback包裹的数据</li>\n<li>JSONP只会发一次请求</li>\n</ul>\n</li>\n</ul>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在我们开发中可能会遇到多个JSONP请求的回调函数名是相同的，这时候就需要自己封装一个JSONP，下面是实现的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonp</span>(<span class=\"hljs-params\">url, jsonpCallback, success</span>) </span>&#123;<br>    <span class=\"hljs-keyword\">let</span> script = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'script'</span>)<br>    script.src = url<br>    script.async = <span class=\"hljs-literal\">true</span><br>    script.type = <span class=\"hljs-string\">'text/javascript'</span><br>    <span class=\"hljs-built_in\">window</span>[jsonpCallback] = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>&#123;<br>        success &amp;&amp; success(data)<br>    &#125;<br>    <span class=\"hljs-built_in\">document</span>.body.appendChild(script)<br>&#125;<br>jsonp(<span class=\"hljs-string\">'http://127.0.0.1:8888/get/jsonp'</span>, <span class=\"hljs-string\">'callback'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) </span>&#123;<br>    <span class=\"hljs-built_in\">console</span>.log(value)<br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2、CORS\"><a href=\"#2、CORS\" class=\"headerlink\" title=\"2、CORS\"></a>2、CORS</h3><ul>\n<li>原理：服务端设置 Access-Control-Allow-Origin 就可以开启 CORS。 该属性表示哪些域名可以访问资源，如果设置通配符则表示所有网站都可以访问资源。</li>\n</ul>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然设置 CORS和前端没什么关系，但是通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为简单请求和复杂请求</p>\n<h4 id=\"简单请求\"><a href=\"#简单请求\" class=\"headerlink\" title=\"简单请求\"></a>简单请求</h4><p>1、使用下列方法之一：</p>\n<ul>\n<li>GET</li>\n<li>HEAD</li>\n<li>POST</li>\n</ul>\n<p>2、HTTP头信息不超出以下几种字段：</p>\n<ul>\n<li>Accept</li>\n<li>Accept-Language</li>\n<li>Content-Language</li>\n<li>Last-Event-ID</li>\n<li>Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain</li>\n</ul>\n<h4 id=\"复杂请求\"><a href=\"#复杂请求\" class=\"headerlink\" title=\"复杂请求\"></a>复杂请求</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;不满足简单请求的就是复杂请求，对于复杂请求来说，首先会发起一个预检请求，该请求是 option 方法，通过该请求来知道服务端是否允许跨域请求。当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给该请求加一个请求头：Origin，后台进行一系列处理，如果确定接受请求则在返回结果中加入一个响应头：Access-Control-Allow-Origin;浏览器判断该相应头中是否包含Origin的值，如果有则浏览器会处理响应，我们就可以拿到响应数据，如果不包含浏览器直接驳回，这时我们无法拿到响应数据。</p>\n<ul>\n<li>优点：<ul>\n<li>CORS支持所有的浏览器请求类型，承载的请求数据量更大，开放更简洁，服务端只需要将处理后的数据直接返回，不需要再特殊处理。</li>\n<li>CORS可以通过onerror事件监听错误，并且浏览器控制台会看到报错信息，利于排查。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3、document-domain\"><a href=\"#3、document-domain\" class=\"headerlink\" title=\"3、document.domain\"></a>3、document.domain</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;该方法只能用于主域名相同的情况下,比如<code>a.test.com</code> 和 <code>b.test.com</code>,只需要给页面添加<code>document.domain = &#39;test.com&#39;</code>就可以实现跨域。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;比如我们可以打开 <a href=\"https://id.qq.com/login/ptlogin.html\" target=\"_blank\" rel=\"noopener\">id.qq.com</a>，调出控制台，输入<code>let w = window.open(&#39;http://www.qq.com&#39;)</code>，之后访问<code>w.document</code>，发现控制台会报出跨域相关的错误。这时我们再在控制台中输入<code>document.domain = &#39;qq.com&#39;</code>，再访问<code>w.document</code>，这样就可以了。</p>\n{% asset_img jt.png  %}\n<ul>\n<li>注意：两个域名的主域名必须相同，并且所有的协议、端口都要一致，否则无法利用document.domain进行跨域。</li>\n</ul>\n<h3 id=\"4、postMessage\"><a href=\"#4、postMessage\" class=\"headerlink\" title=\"4、postMessage\"></a>4、postMessage</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这种方式一般会用在iframe嵌入其他页面时需要通信的情况下，只要正确的使用，这种方法很安全。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">iframe</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"iframe\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"http://test.com\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">iframe</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// 发送端</span><br><span class=\"hljs-keyword\">const</span> iframe = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'iframe);</span><br><span class=\"hljs-string\">iframe.contentWindow.postMessage('</span>&#123;<span class=\"hljs-string\">\"method\"</span>:<span class=\"hljs-string\">\"closeWindows\"</span>&#125;<span class=\"hljs-string\">', \"http://test.com\")</span><br></code></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">//接收端</span><br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">\"message\"</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(e.data)<br>&#125;, <span class=\"hljs-literal\">false</span>)<br></code></pre></td></tr></table></figure>\n<ul>\n<li>注意：<ul>\n<li>当使用postMessage将数据发送到其他窗口时，始终指定精确的目标origin，而不是*。 恶意网站可以在您不知情的情况下更改窗口的位置，因此它可以拦截使用postMessage发送的数据。</li>\n<li>如果不希望从其他网站接收message，不要为message事件添加任何事件侦听器，这是一个完全万无一失的方式来避免安全问题。</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;说到跨域我们不得不先来说说为什么会产生跨域。其实跨域就是指浏览器不能执行其它网站的脚本，它是由浏览器的同源策略造成的，是浏览器对javascript施加的安全限制。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;那什么又是同源策略呢？同源策略是一种约定，它是浏览器最核心也最基本的安全功能，所谓的同源是指域名、协议、端口相同。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;下面就让我来介绍几种解决跨域的方法吧！</p>\n<h3 id=\"1、JSONP\"><a href=\"#1、JSONP\" class=\"headerlink\" title=\"1、JSONP\"></a>1、JSONP</h3><ul>\n<li>原理：就是利用<code>&lt;script&gt;</code>标签没有跨域限制的漏洞。通过<code>&lt;script&gt;</code>标签指向一个需要访问的地址并提供一个回调函数来接收数据当需要通讯时。<br>客户端<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"actionscript\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonp</span><span class=\"hljs-params\">(data)</span> </span>&#123;</span><br><span class=\"javascript\">        <span class=\"hljs-built_in\">console</span>.log(data)</span><br>    &#125;<br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"http://127.0.0.1:8888/get/jsonp?callback=jsonp\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br></code></pre></td></tr></table></figure>\n服务端<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">router.get(<span class=\"hljs-string\">'/get/jsonp'</span>, (ctx, next) =&gt; &#123;<br>    <span class=\"hljs-keyword\">let</span> callbackName = ctx.callback || <span class=\"hljs-string\">'callback'</span><br>    <span class=\"hljs-keyword\">let</span> data = &#123;<br>        <span class=\"hljs-string\">\"errcode\"</span>: <span class=\"hljs-number\">0</span>,<br>        <span class=\"hljs-string\">\"data\"</span>: &#123;<br>            <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"cx\"</span>,<br>            <span class=\"hljs-string\">\"sex\"</span>: <span class=\"hljs-string\">\"girl\"</span>,<br>            <span class=\"hljs-string\">\"address\"</span>: <span class=\"hljs-string\">\"BeiJing\"</span><br>        &#125;<br>    <span class=\"hljs-keyword\">let</span> jsonpStr = <span class=\"hljs-string\">`~<span class=\"hljs-subst\">$&#123;callbackName&#125;</span>(<span class=\"hljs-subst\">$&#123;<span class=\"hljs-built_in\">JSON</span>.stringify(data)&#125;</span>)`</span><br>    ctx.type = <span class=\"hljs-string\">'text/javascript'</span><br>    ctx.body = jsonpStr<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n页面显示<img src=\"/blog/2020/05/28/hello-world/result.png\" class=\"\"></li>\n<li>优点<ul>\n<li>JSONP 使用简单且兼容性不错</li>\n</ul>\n</li>\n<li>缺点<ul>\n<li>只限于 get 请求（即只读）</li>\n<li>它只支持跨域HTTP这种情况</li>\n<li>jsonp在调用失败的时候，不会返回各种HTTP状态码（jsonp的错误处理机制并不完善，我们没办法进行错误处理）</li>\n<li>需要客户端和服务端定制进行开发，服务端返回的数据不是标准的json数据，而是callback包裹的数据</li>\n<li>JSONP只会发一次请求</li>\n</ul>\n</li>\n</ul>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在我们开发中可能会遇到多个JSONP请求的回调函数名是相同的，这时候就需要自己封装一个JSONP，下面是实现的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonp</span>(<span class=\"hljs-params\">url, jsonpCallback, success</span>) </span>&#123;<br>    <span class=\"hljs-keyword\">let</span> script = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'script'</span>)<br>    script.src = url<br>    script.async = <span class=\"hljs-literal\">true</span><br>    script.type = <span class=\"hljs-string\">'text/javascript'</span><br>    <span class=\"hljs-built_in\">window</span>[jsonpCallback] = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>&#123;<br>        success &amp;&amp; success(data)<br>    &#125;<br>    <span class=\"hljs-built_in\">document</span>.body.appendChild(script)<br>&#125;<br>jsonp(<span class=\"hljs-string\">'http://127.0.0.1:8888/get/jsonp'</span>, <span class=\"hljs-string\">'callback'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) </span>&#123;<br>    <span class=\"hljs-built_in\">console</span>.log(value)<br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2、CORS\"><a href=\"#2、CORS\" class=\"headerlink\" title=\"2、CORS\"></a>2、CORS</h3><ul>\n<li>原理：服务端设置 Access-Control-Allow-Origin 就可以开启 CORS。 该属性表示哪些域名可以访问资源，如果设置通配符则表示所有网站都可以访问资源。</li>\n</ul>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然设置 CORS和前端没什么关系，但是通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为简单请求和复杂请求</p>\n<h4 id=\"简单请求\"><a href=\"#简单请求\" class=\"headerlink\" title=\"简单请求\"></a>简单请求</h4><p>1、使用下列方法之一：</p>\n<ul>\n<li>GET</li>\n<li>HEAD</li>\n<li>POST</li>\n</ul>\n<p>2、HTTP头信息不超出以下几种字段：</p>\n<ul>\n<li>Accept</li>\n<li>Accept-Language</li>\n<li>Content-Language</li>\n<li>Last-Event-ID</li>\n<li>Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain</li>\n</ul>\n<h4 id=\"复杂请求\"><a href=\"#复杂请求\" class=\"headerlink\" title=\"复杂请求\"></a>复杂请求</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;不满足简单请求的就是复杂请求，对于复杂请求来说，首先会发起一个预检请求，该请求是 option 方法，通过该请求来知道服务端是否允许跨域请求。当使用XMLHttpRequest发送请求时，浏览器发现该请求不符合同源策略，会给该请求加一个请求头：Origin，后台进行一系列处理，如果确定接受请求则在返回结果中加入一个响应头：Access-Control-Allow-Origin;浏览器判断该相应头中是否包含Origin的值，如果有则浏览器会处理响应，我们就可以拿到响应数据，如果不包含浏览器直接驳回，这时我们无法拿到响应数据。</p>\n<ul>\n<li>优点：<ul>\n<li>CORS支持所有的浏览器请求类型，承载的请求数据量更大，开放更简洁，服务端只需要将处理后的数据直接返回，不需要再特殊处理。</li>\n<li>CORS可以通过onerror事件监听错误，并且浏览器控制台会看到报错信息，利于排查。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3、document-domain\"><a href=\"#3、document-domain\" class=\"headerlink\" title=\"3、document.domain\"></a>3、document.domain</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;该方法只能用于主域名相同的情况下,比如<code>a.test.com</code> 和 <code>b.test.com</code>,只需要给页面添加<code>document.domain = &#39;test.com&#39;</code>就可以实现跨域。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;比如我们可以打开 <a href=\"https://id.qq.com/login/ptlogin.html\" target=\"_blank\" rel=\"noopener\">id.qq.com</a>，调出控制台，输入<code>let w = window.open(&#39;http://www.qq.com&#39;)</code>，之后访问<code>w.document</code>，发现控制台会报出跨域相关的错误。这时我们再在控制台中输入<code>document.domain = &#39;qq.com&#39;</code>，再访问<code>w.document</code>，这样就可以了。</p>\n{% asset_img jt.png  %}\n<ul>\n<li>注意：两个域名的主域名必须相同，并且所有的协议、端口都要一致，否则无法利用document.domain进行跨域。</li>\n</ul>\n<h3 id=\"4、postMessage\"><a href=\"#4、postMessage\" class=\"headerlink\" title=\"4、postMessage\"></a>4、postMessage</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这种方式一般会用在iframe嵌入其他页面时需要通信的情况下，只要正确的使用，这种方法很安全。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">iframe</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"iframe\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"http://test.com\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">iframe</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// 发送端</span><br><span class=\"hljs-keyword\">const</span> iframe = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'iframe);</span><br><span class=\"hljs-string\">iframe.contentWindow.postMessage('</span>&#123;<span class=\"hljs-string\">\"method\"</span>:<span class=\"hljs-string\">\"closeWindows\"</span>&#125;<span class=\"hljs-string\">', \"http://test.com\")</span><br></code></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">//接收端</span><br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">\"message\"</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(e.data)<br>&#125;, <span class=\"hljs-literal\">false</span>)<br></code></pre></td></tr></table></figure>\n<ul>\n<li>注意：<ul>\n<li>当使用postMessage将数据发送到其他窗口时，始终指定精确的目标origin，而不是*。 恶意网站可以在您不知情的情况下更改窗口的位置，因此它可以拦截使用postMessage发送的数据。</li>\n<li>如果不希望从其他网站接收message，不要为message事件添加任何事件侦听器，这是一个完全万无一失的方式来避免安全问题。</li>\n</ul>\n</li>\n</ul>\n"},{"title":"http和https","date":"2020-05-20T03:46:50.000Z","_content":"### http\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 协议的全称为```超文本传输协议```。http 是以明文的方式发送内容，不提供任何方式的数据加密，因此 http 不适合传输敏感信息。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 默认工作在TCP协议 80 端口。\n### https\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 协议的全称为```超文本传输安全协议```。它是为了解决 http 传输不安全而诞生的。https 在 http 的基础上加入了 SSL 协议，SSL 依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 默认工作在 TCP 协议 443 端口。\n### https与http的区别\n- http 是明文传输，数据都是未加密的，安全性较差，https 数据传输的过程是加密的，安全性好。\n- https 协议需要到CA申请证书，免费的证书比较少，所以需要一定的费用\n- http 页面响应速度比 https 快，因为 http 使用 TCP 三次握手建立连接，客户端和服务器需要交换3个包，https 除了 TCP 的三个包，还需要加上ssl握手需要的9个包，一共是12个包。\n- https 和 http 使用的是完全不同的连接方式，用的端口也不一样，http 用的是 80 端口，https 用的是 443 端口。\n- https 其实就是建构在 SSL/TLS 之上的 http 协议，所以 https 比 http 要更耗费服务器资源。","source":"_posts/http.md","raw":"---\ntitle: http和https\ndate: 2020-05-20 11:46:50\ntags: http\ncategories:\n- 网络基础\n---\n### http\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 协议的全称为```超文本传输协议```。http 是以明文的方式发送内容，不提供任何方式的数据加密，因此 http 不适合传输敏感信息。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 默认工作在TCP协议 80 端口。\n### https\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 协议的全称为```超文本传输安全协议```。它是为了解决 http 传输不安全而诞生的。https 在 http 的基础上加入了 SSL 协议，SSL 依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 默认工作在 TCP 协议 443 端口。\n### https与http的区别\n- http 是明文传输，数据都是未加密的，安全性较差，https 数据传输的过程是加密的，安全性好。\n- https 协议需要到CA申请证书，免费的证书比较少，所以需要一定的费用\n- http 页面响应速度比 https 快，因为 http 使用 TCP 三次握手建立连接，客户端和服务器需要交换3个包，https 除了 TCP 的三个包，还需要加上ssl握手需要的9个包，一共是12个包。\n- https 和 http 使用的是完全不同的连接方式，用的端口也不一样，http 用的是 80 端口，https 用的是 443 端口。\n- https 其实就是建构在 SSL/TLS 之上的 http 协议，所以 https 比 http 要更耗费服务器资源。","slug":"http","published":1,"updated":"2020-05-20T08:11:01.310Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfcl0008x8s6d2bd4ymp","content":"<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 协议的全称为<code>超文本传输协议</code>。http 是以明文的方式发送内容，不提供任何方式的数据加密，因此 http 不适合传输敏感信息。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 默认工作在TCP协议 80 端口。</p>\n<h3 id=\"https\"><a href=\"#https\" class=\"headerlink\" title=\"https\"></a>https</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 协议的全称为<code>超文本传输安全协议</code>。它是为了解决 http 传输不安全而诞生的。https 在 http 的基础上加入了 SSL 协议，SSL 依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 默认工作在 TCP 协议 443 端口。</p>\n<h3 id=\"https与http的区别\"><a href=\"#https与http的区别\" class=\"headerlink\" title=\"https与http的区别\"></a>https与http的区别</h3><ul>\n<li>http 是明文传输，数据都是未加密的，安全性较差，https 数据传输的过程是加密的，安全性好。</li>\n<li>https 协议需要到CA申请证书，免费的证书比较少，所以需要一定的费用</li>\n<li>http 页面响应速度比 https 快，因为 http 使用 TCP 三次握手建立连接，客户端和服务器需要交换3个包，https 除了 TCP 的三个包，还需要加上ssl握手需要的9个包，一共是12个包。</li>\n<li>https 和 http 使用的是完全不同的连接方式，用的端口也不一样，http 用的是 80 端口，https 用的是 443 端口。</li>\n<li>https 其实就是建构在 SSL/TLS 之上的 http 协议，所以 https 比 http 要更耗费服务器资源。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 协议的全称为<code>超文本传输协议</code>。http 是以明文的方式发送内容，不提供任何方式的数据加密，因此 http 不适合传输敏感信息。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;http 默认工作在TCP协议 80 端口。</p>\n<h3 id=\"https\"><a href=\"#https\" class=\"headerlink\" title=\"https\"></a>https</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 协议的全称为<code>超文本传输安全协议</code>。它是为了解决 http 传输不安全而诞生的。https 在 http 的基础上加入了 SSL 协议，SSL 依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;https 默认工作在 TCP 协议 443 端口。</p>\n<h3 id=\"https与http的区别\"><a href=\"#https与http的区别\" class=\"headerlink\" title=\"https与http的区别\"></a>https与http的区别</h3><ul>\n<li>http 是明文传输，数据都是未加密的，安全性较差，https 数据传输的过程是加密的，安全性好。</li>\n<li>https 协议需要到CA申请证书，免费的证书比较少，所以需要一定的费用</li>\n<li>http 页面响应速度比 https 快，因为 http 使用 TCP 三次握手建立连接，客户端和服务器需要交换3个包，https 除了 TCP 的三个包，还需要加上ssl握手需要的9个包，一共是12个包。</li>\n<li>https 和 http 使用的是完全不同的连接方式，用的端口也不一样，http 用的是 80 端口，https 用的是 443 端口。</li>\n<li>https 其实就是建构在 SSL/TLS 之上的 http 协议，所以 https 比 http 要更耗费服务器资源。</li>\n</ul>\n"},{"title":"原型和原型链","date":"2020-05-23T04:23:45.000Z","_content":"### 原型\n- 每一个函数数据类型（普通函数、类）都有一个天生自带的属性：prototype（原型），并且这个属性是一个对象数据类型的值；并且在 prototype 上浏览器天生给它加了一个属性 constructor（构造函数），属性值是当前函数（类）本身；每一个对象数据类型（普通的对象、实例、prototype...）也天生自带一个属性：```__proto__```,属性值是当前实例所属类的原型（prototype）。\n\n- Object 是 JS 中所有对象数据类型的基类（最顶层的类），在 Object.prototype 上```__proto__```这个属性为空，会返回 null。\n\n### 原型链\n- 通过 对象名.属性名 的方式获取属性值的时候，首先在对象的私有属性上进行查找，如果私有中存在这个属性，则获取的是私有的属性值；如果私有的没有，则通过```__proto__```找到所属类的原型（类的原型上定义的属性和方法都是当前实例公有的属性和方法），原型上存在的话，获取的是公有属性值；如果原型上也没有，则继续通过原型上的```__proto__```继续向上查找，一直找到 Object.prototype 为止...，这种查找机制就是我们的“原型链模式”。\n\n- 在IE浏览器中，我们的原型模式也是同样的原理，但是IE浏览器怕你通过```__proto__```把公有的修改，禁止我们使用```__proto__```。","source":"_posts/prototype.md","raw":"---\ntitle: 原型和原型链\ndate: 2020-05-23 12:23:45\ntags: JS\ncategories:\n- JS基础\n---\n### 原型\n- 每一个函数数据类型（普通函数、类）都有一个天生自带的属性：prototype（原型），并且这个属性是一个对象数据类型的值；并且在 prototype 上浏览器天生给它加了一个属性 constructor（构造函数），属性值是当前函数（类）本身；每一个对象数据类型（普通的对象、实例、prototype...）也天生自带一个属性：```__proto__```,属性值是当前实例所属类的原型（prototype）。\n\n- Object 是 JS 中所有对象数据类型的基类（最顶层的类），在 Object.prototype 上```__proto__```这个属性为空，会返回 null。\n\n### 原型链\n- 通过 对象名.属性名 的方式获取属性值的时候，首先在对象的私有属性上进行查找，如果私有中存在这个属性，则获取的是私有的属性值；如果私有的没有，则通过```__proto__```找到所属类的原型（类的原型上定义的属性和方法都是当前实例公有的属性和方法），原型上存在的话，获取的是公有属性值；如果原型上也没有，则继续通过原型上的```__proto__```继续向上查找，一直找到 Object.prototype 为止...，这种查找机制就是我们的“原型链模式”。\n\n- 在IE浏览器中，我们的原型模式也是同样的原理，但是IE浏览器怕你通过```__proto__```把公有的修改，禁止我们使用```__proto__```。","slug":"prototype","published":1,"updated":"2020-05-23T05:00:46.922Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfcm0009x8s6dx2y8d7w","content":"<h3 id=\"原型\"><a href=\"#原型\" class=\"headerlink\" title=\"原型\"></a>原型</h3><ul>\n<li><p>每一个函数数据类型（普通函数、类）都有一个天生自带的属性：prototype（原型），并且这个属性是一个对象数据类型的值；并且在 prototype 上浏览器天生给它加了一个属性 constructor（构造函数），属性值是当前函数（类）本身；每一个对象数据类型（普通的对象、实例、prototype…）也天生自带一个属性：<code>__proto__</code>,属性值是当前实例所属类的原型（prototype）。</p>\n</li>\n<li><p>Object 是 JS 中所有对象数据类型的基类（最顶层的类），在 Object.prototype 上<code>__proto__</code>这个属性为空，会返回 null。</p>\n</li>\n</ul>\n<h3 id=\"原型链\"><a href=\"#原型链\" class=\"headerlink\" title=\"原型链\"></a>原型链</h3><ul>\n<li><p>通过 对象名.属性名 的方式获取属性值的时候，首先在对象的私有属性上进行查找，如果私有中存在这个属性，则获取的是私有的属性值；如果私有的没有，则通过<code>__proto__</code>找到所属类的原型（类的原型上定义的属性和方法都是当前实例公有的属性和方法），原型上存在的话，获取的是公有属性值；如果原型上也没有，则继续通过原型上的<code>__proto__</code>继续向上查找，一直找到 Object.prototype 为止…，这种查找机制就是我们的“原型链模式”。</p>\n</li>\n<li><p>在IE浏览器中，我们的原型模式也是同样的原理，但是IE浏览器怕你通过<code>__proto__</code>把公有的修改，禁止我们使用<code>__proto__</code>。</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"原型\"><a href=\"#原型\" class=\"headerlink\" title=\"原型\"></a>原型</h3><ul>\n<li><p>每一个函数数据类型（普通函数、类）都有一个天生自带的属性：prototype（原型），并且这个属性是一个对象数据类型的值；并且在 prototype 上浏览器天生给它加了一个属性 constructor（构造函数），属性值是当前函数（类）本身；每一个对象数据类型（普通的对象、实例、prototype…）也天生自带一个属性：<code>__proto__</code>,属性值是当前实例所属类的原型（prototype）。</p>\n</li>\n<li><p>Object 是 JS 中所有对象数据类型的基类（最顶层的类），在 Object.prototype 上<code>__proto__</code>这个属性为空，会返回 null。</p>\n</li>\n</ul>\n<h3 id=\"原型链\"><a href=\"#原型链\" class=\"headerlink\" title=\"原型链\"></a>原型链</h3><ul>\n<li><p>通过 对象名.属性名 的方式获取属性值的时候，首先在对象的私有属性上进行查找，如果私有中存在这个属性，则获取的是私有的属性值；如果私有的没有，则通过<code>__proto__</code>找到所属类的原型（类的原型上定义的属性和方法都是当前实例公有的属性和方法），原型上存在的话，获取的是公有属性值；如果原型上也没有，则继续通过原型上的<code>__proto__</code>继续向上查找，一直找到 Object.prototype 为止…，这种查找机制就是我们的“原型链模式”。</p>\n</li>\n<li><p>在IE浏览器中，我们的原型模式也是同样的原理，但是IE浏览器怕你通过<code>__proto__</code>把公有的修改，禁止我们使用<code>__proto__</code>。</p>\n</li>\n</ul>\n"},{"title":"检测数据类型的几种方式","date":"2020-05-23T05:13:40.000Z","_content":"### typeof\n- typeof 检测基本数据类型，除了 null 以外其它的都可以检测出来，typeof(null) 返回的结果是 \"object\"。\n\n- typeof 检测引用数据类型，除了函数以外其它返回的结果都是 \"object\"。\n\n- 使用 typeof 检测数据类型，返回的结果是字符串包含着对应的数据类型。\n\n```js\ntypeof(null); // \"object\"\n\ntypeof(\"2\"); // \"string\"\n```\n\n### instanceof\n- instanceof 检测某一个实例是否属于某个类。\n\n- 不能用来检测和处理字面量方式创建出来的基本数据类型值。\n\n- instanceof 的特性：只要在当前实例的原型链上，我们用其检测出来的结果都是true。\n\n```js\nconst obj = new Object()\n\nobj instanceof Object // true\n```\n\n### constructor\n- 作用和 instanceof 非常的相似。\n\n- constructor 可以处理基本数据类型的检测。\n\n```js\nconst a = 111;\nconst b = {};\na.constructor === Number; // true\nb.constructor === Object; // true\n```\n\n### Object.prototype.toString.call()\n\n- 最准确常用的方式。\n\n- 第一个object代表当前实例是对象数据类型的（这个是固定死的）第二个Object，代表的是obj所属的类是Object。\n\n```js\nObject.prototype.toString.call('111'); // \"[object String]\"\n\nObject.prototype.toString.call([]); // \"[object Array]\"\n\nObject.prototype.toString.call(()=>{}); // \"[object Function]\"\n\nObject.prototype.toString.call(111); // \"[object Number]\"\n\nObject.prototype.toString.call(null); //\"[object Null]\"\n```\n\n","source":"_posts/typeof.md","raw":"---\ntitle: 检测数据类型的几种方式\ndate: 2020-05-23 13:13:40\ntags: JS\ncategories:\n- JS基础\n---\n### typeof\n- typeof 检测基本数据类型，除了 null 以外其它的都可以检测出来，typeof(null) 返回的结果是 \"object\"。\n\n- typeof 检测引用数据类型，除了函数以外其它返回的结果都是 \"object\"。\n\n- 使用 typeof 检测数据类型，返回的结果是字符串包含着对应的数据类型。\n\n```js\ntypeof(null); // \"object\"\n\ntypeof(\"2\"); // \"string\"\n```\n\n### instanceof\n- instanceof 检测某一个实例是否属于某个类。\n\n- 不能用来检测和处理字面量方式创建出来的基本数据类型值。\n\n- instanceof 的特性：只要在当前实例的原型链上，我们用其检测出来的结果都是true。\n\n```js\nconst obj = new Object()\n\nobj instanceof Object // true\n```\n\n### constructor\n- 作用和 instanceof 非常的相似。\n\n- constructor 可以处理基本数据类型的检测。\n\n```js\nconst a = 111;\nconst b = {};\na.constructor === Number; // true\nb.constructor === Object; // true\n```\n\n### Object.prototype.toString.call()\n\n- 最准确常用的方式。\n\n- 第一个object代表当前实例是对象数据类型的（这个是固定死的）第二个Object，代表的是obj所属的类是Object。\n\n```js\nObject.prototype.toString.call('111'); // \"[object String]\"\n\nObject.prototype.toString.call([]); // \"[object Array]\"\n\nObject.prototype.toString.call(()=>{}); // \"[object Function]\"\n\nObject.prototype.toString.call(111); // \"[object Number]\"\n\nObject.prototype.toString.call(null); //\"[object Null]\"\n```\n\n","slug":"typeof","published":1,"updated":"2020-05-23T06:27:24.396Z","_id":"ckaj6hfcn000dx8s61uz838ye","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"typeof\"><a href=\"#typeof\" class=\"headerlink\" title=\"typeof\"></a>typeof</h3><ul>\n<li><p>typeof 检测基本数据类型，除了 null 以外其它的都可以检测出来，typeof(null) 返回的结果是 “object”。</p>\n</li>\n<li><p>typeof 检测引用数据类型，除了函数以外其它返回的结果都是 “object”。</p>\n</li>\n<li><p>使用 typeof 检测数据类型，返回的结果是字符串包含着对应的数据类型。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">typeof</span>(<span class=\"hljs-literal\">null</span>); <span class=\"hljs-comment\">// \"object\"</span><br><br><span class=\"hljs-keyword\">typeof</span>(<span class=\"hljs-string\">\"2\"</span>); <span class=\"hljs-comment\">// \"string\"</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"instanceof\"><a href=\"#instanceof\" class=\"headerlink\" title=\"instanceof\"></a>instanceof</h3><ul>\n<li><p>instanceof 检测某一个实例是否属于某个类。</p>\n</li>\n<li><p>不能用来检测和处理字面量方式创建出来的基本数据类型值。</p>\n</li>\n<li><p>instanceof 的特性：只要在当前实例的原型链上，我们用其检测出来的结果都是true。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> obj = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Object</span>()<br><br>obj <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Object</span> <span class=\"hljs-comment\">// true</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"constructor-NaN\"><a href=\"#constructor-NaN\" class=\"headerlink\" title=\"constructor\"></a>constructor</h3><ul>\n<li><p>作用和 instanceof 非常的相似。</p>\n</li>\n<li><p>constructor 可以处理基本数据类型的检测。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-number\">111</span>;<br><span class=\"hljs-keyword\">const</span> b = &#123;&#125;;<br>a.constructor === <span class=\"hljs-built_in\">Number</span>; <span class=\"hljs-comment\">// true</span><br>b.constructor === <span class=\"hljs-built_in\">Object</span>; <span class=\"hljs-comment\">// true</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"Object-prototype-toString-call\"><a href=\"#Object-prototype-toString-call\" class=\"headerlink\" title=\"Object.prototype.toString.call()\"></a>Object.prototype.toString.call()</h3><ul>\n<li><p>最准确常用的方式。</p>\n</li>\n<li><p>第一个object代表当前实例是对象数据类型的（这个是固定死的）第二个Object，代表的是obj所属的类是Object。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-string\">'111'</span>); <span class=\"hljs-comment\">// \"[object String]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call([]); <span class=\"hljs-comment\">// \"[object Array]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span>&#123;&#125;); <span class=\"hljs-comment\">// \"[object Function]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-number\">111</span>); <span class=\"hljs-comment\">// \"[object Number]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-literal\">null</span>); <span class=\"hljs-comment\">//\"[object Null]\"</span><br></code></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"typeof\"><a href=\"#typeof\" class=\"headerlink\" title=\"typeof\"></a>typeof</h3><ul>\n<li><p>typeof 检测基本数据类型，除了 null 以外其它的都可以检测出来，typeof(null) 返回的结果是 “object”。</p>\n</li>\n<li><p>typeof 检测引用数据类型，除了函数以外其它返回的结果都是 “object”。</p>\n</li>\n<li><p>使用 typeof 检测数据类型，返回的结果是字符串包含着对应的数据类型。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">typeof</span>(<span class=\"hljs-literal\">null</span>); <span class=\"hljs-comment\">// \"object\"</span><br><br><span class=\"hljs-keyword\">typeof</span>(<span class=\"hljs-string\">\"2\"</span>); <span class=\"hljs-comment\">// \"string\"</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"instanceof\"><a href=\"#instanceof\" class=\"headerlink\" title=\"instanceof\"></a>instanceof</h3><ul>\n<li><p>instanceof 检测某一个实例是否属于某个类。</p>\n</li>\n<li><p>不能用来检测和处理字面量方式创建出来的基本数据类型值。</p>\n</li>\n<li><p>instanceof 的特性：只要在当前实例的原型链上，我们用其检测出来的结果都是true。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> obj = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Object</span>()<br><br>obj <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Object</span> <span class=\"hljs-comment\">// true</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"constructor-NaN\"><a href=\"#constructor-NaN\" class=\"headerlink\" title=\"constructor\"></a>constructor</h3><ul>\n<li><p>作用和 instanceof 非常的相似。</p>\n</li>\n<li><p>constructor 可以处理基本数据类型的检测。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-number\">111</span>;<br><span class=\"hljs-keyword\">const</span> b = &#123;&#125;;<br>a.constructor === <span class=\"hljs-built_in\">Number</span>; <span class=\"hljs-comment\">// true</span><br>b.constructor === <span class=\"hljs-built_in\">Object</span>; <span class=\"hljs-comment\">// true</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"Object-prototype-toString-call\"><a href=\"#Object-prototype-toString-call\" class=\"headerlink\" title=\"Object.prototype.toString.call()\"></a>Object.prototype.toString.call()</h3><ul>\n<li><p>最准确常用的方式。</p>\n</li>\n<li><p>第一个object代表当前实例是对象数据类型的（这个是固定死的）第二个Object，代表的是obj所属的类是Object。</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-string\">'111'</span>); <span class=\"hljs-comment\">// \"[object String]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call([]); <span class=\"hljs-comment\">// \"[object Array]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span>&#123;&#125;); <span class=\"hljs-comment\">// \"[object Function]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-number\">111</span>); <span class=\"hljs-comment\">// \"[object Number]\"</span><br><br><span class=\"hljs-built_in\">Object</span>.prototype.toString.call(<span class=\"hljs-literal\">null</span>); <span class=\"hljs-comment\">//\"[object Null]\"</span><br></code></pre></td></tr></table></figure>\n\n"},{"title":"HTTP状态码","date":"2020-05-20T14:23:32.000Z","_content":"&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。\n- 2XX 成功\n  - 200 OK：表示从客户端发来的请求在服务器端被正常处理了。\n  - 204 No Content：表示服务器接收的请求已成功处理，但在返回的响应报文中 不含实体的主体部分。另外，也不允许返回任何实体的主体。\n  - 206 Partial Content：表示客户端进行了范围请求，而服务器成功执行了这部分的 GET 请求。\n- 3XX 重定向\n  - 301 Moved Permanently：永久性重定向。表示请求的资源已被分配了新的 URI，以后 应使用资源现在所指的 URI。\n  - 302 Found：临时性重定向。表示请求的资源已被分配了新的 URI，希望 用户(本次)能使用新的 URI 访问。\n  - 303 See Other：表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。\n  - 304 Not Modified：表示客户端发送附带条件的请求时，服务器端允许请求访 问资源，但未满足条件的情况。\n  - 307 Temporary Redirect：临时重定向。该状态码与 302 Found 有着相同的含义。\n- 4XX 客户端错误\n  - 400 Bad Request：表示请求报文中存在语法错误。\n  - 401 Unauthorized：表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信息。另外若之前已进行过 1 次请求，则表示 用 户认证失败。\n  - 403 Forbidden：表示对请求资源的访问被服务器拒绝了。\n  - 404 Not Found：表示服务器上无法找到请求的资源。\n- 5XX 服务器错误\n  - 500 Internal Server Error：表示服务器端在执行请求时发生了错误。\n  - 503 Service Unavailable：表示服务器暂时处于超负载或正在进行停机维护，现在无法 处理请求。","source":"_posts/statusCode.md","raw":"---\ntitle: HTTP状态码\ndate: 2020-05-20 22:23:32\ntags: http\ncategories:\n- 网络基础\n---\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。\n- 2XX 成功\n  - 200 OK：表示从客户端发来的请求在服务器端被正常处理了。\n  - 204 No Content：表示服务器接收的请求已成功处理，但在返回的响应报文中 不含实体的主体部分。另外，也不允许返回任何实体的主体。\n  - 206 Partial Content：表示客户端进行了范围请求，而服务器成功执行了这部分的 GET 请求。\n- 3XX 重定向\n  - 301 Moved Permanently：永久性重定向。表示请求的资源已被分配了新的 URI，以后 应使用资源现在所指的 URI。\n  - 302 Found：临时性重定向。表示请求的资源已被分配了新的 URI，希望 用户(本次)能使用新的 URI 访问。\n  - 303 See Other：表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。\n  - 304 Not Modified：表示客户端发送附带条件的请求时，服务器端允许请求访 问资源，但未满足条件的情况。\n  - 307 Temporary Redirect：临时重定向。该状态码与 302 Found 有着相同的含义。\n- 4XX 客户端错误\n  - 400 Bad Request：表示请求报文中存在语法错误。\n  - 401 Unauthorized：表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信息。另外若之前已进行过 1 次请求，则表示 用 户认证失败。\n  - 403 Forbidden：表示对请求资源的访问被服务器拒绝了。\n  - 404 Not Found：表示服务器上无法找到请求的资源。\n- 5XX 服务器错误\n  - 500 Internal Server Error：表示服务器端在执行请求时发生了错误。\n  - 503 Service Unavailable：表示服务器暂时处于超负载或正在进行停机维护，现在无法 处理请求。","slug":"statusCode","published":1,"updated":"2020-05-20T15:47:29.425Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfcq000ex8s61xzu5w5i","content":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。</p>\n<ul>\n<li>2XX 成功<ul>\n<li>200 OK：表示从客户端发来的请求在服务器端被正常处理了。</li>\n<li>204 No Content：表示服务器接收的请求已成功处理，但在返回的响应报文中 不含实体的主体部分。另外，也不允许返回任何实体的主体。</li>\n<li>206 Partial Content：表示客户端进行了范围请求，而服务器成功执行了这部分的 GET 请求。</li>\n</ul>\n</li>\n<li>3XX 重定向<ul>\n<li>301 Moved Permanently：永久性重定向。表示请求的资源已被分配了新的 URI，以后 应使用资源现在所指的 URI。</li>\n<li>302 Found：临时性重定向。表示请求的资源已被分配了新的 URI，希望 用户(本次)能使用新的 URI 访问。</li>\n<li>303 See Other：表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。</li>\n<li>304 Not Modified：表示客户端发送附带条件的请求时，服务器端允许请求访 问资源，但未满足条件的情况。</li>\n<li>307 Temporary Redirect：临时重定向。该状态码与 302 Found 有着相同的含义。</li>\n</ul>\n</li>\n<li>4XX 客户端错误<ul>\n<li>400 Bad Request：表示请求报文中存在语法错误。</li>\n<li>401 Unauthorized：表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信息。另外若之前已进行过 1 次请求，则表示 用 户认证失败。</li>\n<li>403 Forbidden：表示对请求资源的访问被服务器拒绝了。</li>\n<li>404 Not Found：表示服务器上无法找到请求的资源。</li>\n</ul>\n</li>\n<li>5XX 服务器错误<ul>\n<li>500 Internal Server Error：表示服务器端在执行请求时发生了错误。</li>\n<li>503 Service Unavailable：表示服务器暂时处于超负载或正在进行停机维护，现在无法 处理请求。</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。</p>\n<ul>\n<li>2XX 成功<ul>\n<li>200 OK：表示从客户端发来的请求在服务器端被正常处理了。</li>\n<li>204 No Content：表示服务器接收的请求已成功处理，但在返回的响应报文中 不含实体的主体部分。另外，也不允许返回任何实体的主体。</li>\n<li>206 Partial Content：表示客户端进行了范围请求，而服务器成功执行了这部分的 GET 请求。</li>\n</ul>\n</li>\n<li>3XX 重定向<ul>\n<li>301 Moved Permanently：永久性重定向。表示请求的资源已被分配了新的 URI，以后 应使用资源现在所指的 URI。</li>\n<li>302 Found：临时性重定向。表示请求的资源已被分配了新的 URI，希望 用户(本次)能使用新的 URI 访问。</li>\n<li>303 See Other：表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。</li>\n<li>304 Not Modified：表示客户端发送附带条件的请求时，服务器端允许请求访 问资源，但未满足条件的情况。</li>\n<li>307 Temporary Redirect：临时重定向。该状态码与 302 Found 有着相同的含义。</li>\n</ul>\n</li>\n<li>4XX 客户端错误<ul>\n<li>400 Bad Request：表示请求报文中存在语法错误。</li>\n<li>401 Unauthorized：表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信息。另外若之前已进行过 1 次请求，则表示 用 户认证失败。</li>\n<li>403 Forbidden：表示对请求资源的访问被服务器拒绝了。</li>\n<li>404 Not Found：表示服务器上无法找到请求的资源。</li>\n</ul>\n</li>\n<li>5XX 服务器错误<ul>\n<li>500 Internal Server Error：表示服务器端在执行请求时发生了错误。</li>\n<li>503 Service Unavailable：表示服务器暂时处于超负载或正在进行停机维护，现在无法 处理请求。</li>\n</ul>\n</li>\n</ul>\n"},{"title":"Webpack基础入门02","date":"2020-05-19T15:43:27.000Z","_content":"### 开发环境\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack 可以配置两种环境模式，即：```开发环境```和```生产环境```。开发环境是 能让代码本地调试运行的环境，生产环境是 能让代码优化上线运行的环境。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们写的源代码里面包含了 es6 语法, less 文件要经过webpack进行编译处理,比如将 less 文件编译成 css 文件，把 es6 语法编译成浏览器能够识别的语法，然后输出的 bundle 这个资源文件就可以被浏览器运行了，为了让开发者更轻松，这里还添加了一些自动化工作，比如自动打开浏览器，自动刷新，自动编译等等一些咧操作，让我们的效率更高，这就是开发环境所做的事情。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们的样式在之前处理是整合到js中的，如果让样式在 js 中，会让 js 体积变得很大，下载的很慢，同时，这里会先加载js，再通过创建```<style>```标签，会出现闪屏的现象，所以我们要将css从js文件中提取出来，还有代码压缩，兼容性处理都可以让带吗更快，性能更好，能够平稳的运行，这样我们要做的事情会很多，如果把这些都放在开发环境下，那开发环境要做的事情就太多了，打包速度就会很慢，不利于我们开发，所以这些事情我们要放在生产环境上去做。\n\n### 提取css成单独文件\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这里需要用到一个新的插件 ```miniCssExtractPlugin```，引用这个插件之后打包出来的样式是以 ```<link>```  引入，而不是 ```<style>``` 标签，所以不会出现闪屏现象，并且 css 文件和 js 文件分割开了，js 文件的体积也没有那么大，解析速度会更好一些。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    // 创建style标签，将样式放入\n                    // 'style-loader', \n                    // 这个loader取代style-loader。作用：提取js中的css成单独文件\n                    miniCssExtractPlugin.loader,\n                    // 将css整合到js文件中\n                    'css-loader'\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            // 对输出的css文件进行重命名\n            filename: 'css/built.css'\n        })\n    ],\n    mode: 'development'\n}\n```\n目录文件\n\n![](./webpack02/catalogue.jpeg)\n\n打包输出的 index.html 文件\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n<link href=\"css/built.css\" rel=\"stylesheet\"></head>\n<body>\n    <div id=\"box1\"></div>\n    <div id=\"box2\"></div>\n<script src=\"js/built.js\"></script></body>\n</html>\n```\n\n### css的兼容性处理\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;有时我们写的 css 样式并不是在所有的浏览器上都兼容，而 webpack 的 postcss-loader 会帮助我们解决这个问题。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\n\n// 设置nodejs环境变量\nprocess.env.NODE_ENV = 'development'\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    miniCssExtractPlugin.loader,\n                    // 这种写法是使用loader的默认配置\n                    'css-loader',\n                    /*\n                        css兼容性处理：postcss --> postcss-loader postcss-preset-env，下载这两个包\n\n                        postcss-preset-env插件帮postcss找到package.json中 browserslist 里面的配置，通过配置加载指定的css兼容性样式\n\n                        “browserslist”:{\n                            开发环境 --> 设置node环境变量 : process.env.NODE_ENV = development\n                            \"development\":[\n                                \"last 1 chrome version\",\n                                \"last 1 firefox version\",\n                                \"last 1 safari version\"\n                            ],\n                            生产环境：默认是看生产环境\n                            \"production\":[\n                                \">0.2%\",\n                                \"not dead\",\n                                \"not op_mini all\"\n                            ]\n                        }\n                    */\n                   // 使用loader的默认配置\n                   // \"postcss-loader\"\n                   // 修改loader的配置\n                   {\n                       loader: 'postcss-loader',\n                       options: {\n                           // 固定写法\n                           ident: 'postcss',\n                           plugins: ()=> [\n                               // postcss插件\n                               require('postcss-preset-env')()\n                           ]\n                       }\n                   }\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            filename: 'css/built.css'\n        })\n    ],\n    mode: 'development'\n}\n```\npackage.json\n\n```json\n{\n  \"name\": \"webpack_code\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"css-loader\": \"^3.5.3\",\n    \"file-loader\": \"^6.0.0\",\n    \"html-loader\": \"^1.1.0\",\n    \"html-webpack-plugin\": \"^4.3.0\",\n    \"less\": \"^3.11.1\",\n    \"less-loader\": \"^6.1.0\",\n    \"mini-css-extract-plugin\": \"^0.9.0\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.7.0\",\n    \"style-loader\": \"^1.2.1\",\n    \"url-loader\": \"^4.1.0\",\n    \"webpack\": \"^4.43.0\",\n    \"webpack-cli\": \"^3.3.11\",\n    \"webpack-dev-server\": \"^3.11.0\"\n  },\n  \"browserslist\":{\n    \"development\":[\n        \"last 1 chrome version\",\n        \"last 1 firefox version\",\n        \"last 1 safari version\"\n    ],\n    \"production\":[\n        \">0.2%\",\n        \"not dead\",\n        \"not op_mini all\"\n    ]\n  }\n}\n```\n\na.css\n\n```css\n#box1 {\n    width: 100px;\n    height: 100px;\n    background-color: pink;\n    display: flex;\n    backface-visibility: hidden;\n}\n```\n\n打包之后的css文件\n```css\n#box1 {\n    width: 100px;\n    height: 100px;\n    background-color: pink;\n    display: flex;\n    -webkit-backface-visibility: hidden;\n            backface-visibility: hidden;\n}\n#box2 {\n    width: 200px;\n    height: 200px;\n    background-color: deeppink;\n}\n```\n\n### 压缩css\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\nconst optimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\n\nprocess.env.NODE_ENV = 'development'\n\n// optimize-css-assets-webpack-plugin\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    miniCssExtractPlugin.loader,\n                    'css-loader',\n                   {\n                       loader: 'postcss-loader',\n                       options: {\n                           ident: 'postcss',\n                           plugins: ()=> [\n                               require('postcss-preset-env')()\n                           ]\n                       }\n                   }\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            filename: 'css/built.css'\n        }),\n        // 压缩css\n        new optimizeCssAssetsWebpackPlugin()\n    ],\n    mode: 'development'\n}\n```\n使用 optimize-css-assets-webpack-plugin 插件就可以压缩css\n","source":"_posts/webpack02.md","raw":"---\ntitle: Webpack基础入门02\ndate: 2020-05-19 23:43:27\ntags: webpack\ncategories:\n- 前端构建工具\n---\n### 开发环境\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack 可以配置两种环境模式，即：```开发环境```和```生产环境```。开发环境是 能让代码本地调试运行的环境，生产环境是 能让代码优化上线运行的环境。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们写的源代码里面包含了 es6 语法, less 文件要经过webpack进行编译处理,比如将 less 文件编译成 css 文件，把 es6 语法编译成浏览器能够识别的语法，然后输出的 bundle 这个资源文件就可以被浏览器运行了，为了让开发者更轻松，这里还添加了一些自动化工作，比如自动打开浏览器，自动刷新，自动编译等等一些咧操作，让我们的效率更高，这就是开发环境所做的事情。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们的样式在之前处理是整合到js中的，如果让样式在 js 中，会让 js 体积变得很大，下载的很慢，同时，这里会先加载js，再通过创建```<style>```标签，会出现闪屏的现象，所以我们要将css从js文件中提取出来，还有代码压缩，兼容性处理都可以让带吗更快，性能更好，能够平稳的运行，这样我们要做的事情会很多，如果把这些都放在开发环境下，那开发环境要做的事情就太多了，打包速度就会很慢，不利于我们开发，所以这些事情我们要放在生产环境上去做。\n\n### 提取css成单独文件\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这里需要用到一个新的插件 ```miniCssExtractPlugin```，引用这个插件之后打包出来的样式是以 ```<link>```  引入，而不是 ```<style>``` 标签，所以不会出现闪屏现象，并且 css 文件和 js 文件分割开了，js 文件的体积也没有那么大，解析速度会更好一些。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    // 创建style标签，将样式放入\n                    // 'style-loader', \n                    // 这个loader取代style-loader。作用：提取js中的css成单独文件\n                    miniCssExtractPlugin.loader,\n                    // 将css整合到js文件中\n                    'css-loader'\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            // 对输出的css文件进行重命名\n            filename: 'css/built.css'\n        })\n    ],\n    mode: 'development'\n}\n```\n目录文件\n\n![](./webpack02/catalogue.jpeg)\n\n打包输出的 index.html 文件\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n<link href=\"css/built.css\" rel=\"stylesheet\"></head>\n<body>\n    <div id=\"box1\"></div>\n    <div id=\"box2\"></div>\n<script src=\"js/built.js\"></script></body>\n</html>\n```\n\n### css的兼容性处理\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;有时我们写的 css 样式并不是在所有的浏览器上都兼容，而 webpack 的 postcss-loader 会帮助我们解决这个问题。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\n\n// 设置nodejs环境变量\nprocess.env.NODE_ENV = 'development'\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    miniCssExtractPlugin.loader,\n                    // 这种写法是使用loader的默认配置\n                    'css-loader',\n                    /*\n                        css兼容性处理：postcss --> postcss-loader postcss-preset-env，下载这两个包\n\n                        postcss-preset-env插件帮postcss找到package.json中 browserslist 里面的配置，通过配置加载指定的css兼容性样式\n\n                        “browserslist”:{\n                            开发环境 --> 设置node环境变量 : process.env.NODE_ENV = development\n                            \"development\":[\n                                \"last 1 chrome version\",\n                                \"last 1 firefox version\",\n                                \"last 1 safari version\"\n                            ],\n                            生产环境：默认是看生产环境\n                            \"production\":[\n                                \">0.2%\",\n                                \"not dead\",\n                                \"not op_mini all\"\n                            ]\n                        }\n                    */\n                   // 使用loader的默认配置\n                   // \"postcss-loader\"\n                   // 修改loader的配置\n                   {\n                       loader: 'postcss-loader',\n                       options: {\n                           // 固定写法\n                           ident: 'postcss',\n                           plugins: ()=> [\n                               // postcss插件\n                               require('postcss-preset-env')()\n                           ]\n                       }\n                   }\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            filename: 'css/built.css'\n        })\n    ],\n    mode: 'development'\n}\n```\npackage.json\n\n```json\n{\n  \"name\": \"webpack_code\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"css-loader\": \"^3.5.3\",\n    \"file-loader\": \"^6.0.0\",\n    \"html-loader\": \"^1.1.0\",\n    \"html-webpack-plugin\": \"^4.3.0\",\n    \"less\": \"^3.11.1\",\n    \"less-loader\": \"^6.1.0\",\n    \"mini-css-extract-plugin\": \"^0.9.0\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.7.0\",\n    \"style-loader\": \"^1.2.1\",\n    \"url-loader\": \"^4.1.0\",\n    \"webpack\": \"^4.43.0\",\n    \"webpack-cli\": \"^3.3.11\",\n    \"webpack-dev-server\": \"^3.11.0\"\n  },\n  \"browserslist\":{\n    \"development\":[\n        \"last 1 chrome version\",\n        \"last 1 firefox version\",\n        \"last 1 safari version\"\n    ],\n    \"production\":[\n        \">0.2%\",\n        \"not dead\",\n        \"not op_mini all\"\n    ]\n  }\n}\n```\n\na.css\n\n```css\n#box1 {\n    width: 100px;\n    height: 100px;\n    background-color: pink;\n    display: flex;\n    backface-visibility: hidden;\n}\n```\n\n打包之后的css文件\n```css\n#box1 {\n    width: 100px;\n    height: 100px;\n    background-color: pink;\n    display: flex;\n    -webkit-backface-visibility: hidden;\n            backface-visibility: hidden;\n}\n#box2 {\n    width: 200px;\n    height: 200px;\n    background-color: deeppink;\n}\n```\n\n### 压缩css\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst miniCssExtractPlugin = require('mini-css-extract-plugin')\nconst optimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\n\nprocess.env.NODE_ENV = 'development'\n\n// optimize-css-assets-webpack-plugin\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [\n                    miniCssExtractPlugin.loader,\n                    'css-loader',\n                   {\n                       loader: 'postcss-loader',\n                       options: {\n                           ident: 'postcss',\n                           plugins: ()=> [\n                               require('postcss-preset-env')()\n                           ]\n                       }\n                   }\n                ]\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        }),\n        new miniCssExtractPlugin({\n            filename: 'css/built.css'\n        }),\n        // 压缩css\n        new optimizeCssAssetsWebpackPlugin()\n    ],\n    mode: 'development'\n}\n```\n使用 optimize-css-assets-webpack-plugin 插件就可以压缩css\n","slug":"webpack02","published":1,"updated":"2020-05-31T10:16:08.283Z","_id":"ckaj6hfct000ix8s67piiceta","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"开发环境\"><a href=\"#开发环境\" class=\"headerlink\" title=\"开发环境\"></a>开发环境</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack 可以配置两种环境模式，即：<code>开发环境</code>和<code>生产环境</code>。开发环境是 能让代码本地调试运行的环境，生产环境是 能让代码优化上线运行的环境。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们写的源代码里面包含了 es6 语法, less 文件要经过webpack进行编译处理,比如将 less 文件编译成 css 文件，把 es6 语法编译成浏览器能够识别的语法，然后输出的 bundle 这个资源文件就可以被浏览器运行了，为了让开发者更轻松，这里还添加了一些自动化工作，比如自动打开浏览器，自动刷新，自动编译等等一些咧操作，让我们的效率更高，这就是开发环境所做的事情。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们的样式在之前处理是整合到js中的，如果让样式在 js 中，会让 js 体积变得很大，下载的很慢，同时，这里会先加载js，再通过创建<code>&lt;style&gt;</code>标签，会出现闪屏的现象，所以我们要将css从js文件中提取出来，还有代码压缩，兼容性处理都可以让带吗更快，性能更好，能够平稳的运行，这样我们要做的事情会很多，如果把这些都放在开发环境下，那开发环境要做的事情就太多了，打包速度就会很慢，不利于我们开发，所以这些事情我们要放在生产环境上去做。</p>\n<h3 id=\"提取css成单独文件\"><a href=\"#提取css成单独文件\" class=\"headerlink\" title=\"提取css成单独文件\"></a>提取css成单独文件</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这里需要用到一个新的插件 <code>miniCssExtractPlugin</code>，引用这个插件之后打包出来的样式是以 <code>&lt;link&gt;</code>  引入，而不是 <code>&lt;style&gt;</code> 标签，所以不会出现闪屏现象，并且 css 文件和 js 文件分割开了，js 文件的体积也没有那么大，解析速度会更好一些。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    <span class=\"hljs-comment\">// 创建style标签，将样式放入</span><br>                    <span class=\"hljs-comment\">// 'style-loader', </span><br>                    <span class=\"hljs-comment\">// 这个loader取代style-loader。作用：提取js中的css成单独文件</span><br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-comment\">// 将css整合到js文件中</span><br>                    <span class=\"hljs-string\">'css-loader'</span><br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            <span class=\"hljs-comment\">// 对输出的css文件进行重命名</span><br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>目录文件</p>\n{% asset_img catalogue.jpeg  %}\n\n<p>打包输出的 index.html 文件</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"en\"</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"css/built.css\"</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"stylesheet\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box1\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box2\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"js/built.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"css的兼容性处理\"><a href=\"#css的兼容性处理\" class=\"headerlink\" title=\"css的兼容性处理\"></a>css的兼容性处理</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;有时我们写的 css 样式并不是在所有的浏览器上都兼容，而 webpack 的 postcss-loader 会帮助我们解决这个问题。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><br><span class=\"hljs-comment\">// 设置nodejs环境变量</span><br>process.env.NODE_ENV = <span class=\"hljs-string\">'development'</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-comment\">// 这种写法是使用loader的默认配置</span><br>                    <span class=\"hljs-string\">'css-loader'</span>,<br>                    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">                        css兼容性处理：postcss --&gt; postcss-loader postcss-preset-env，下载这两个包</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                        postcss-preset-env插件帮postcss找到package.json中 browserslist 里面的配置，通过配置加载指定的css兼容性样式</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                        “browserslist”:&#123;</span><br><span class=\"hljs-comment\">                            开发环境 --&gt; 设置node环境变量 : process.env.NODE_ENV = development</span><br><span class=\"hljs-comment\">                            \"development\":[</span><br><span class=\"hljs-comment\">                                \"last 1 chrome version\",</span><br><span class=\"hljs-comment\">                                \"last 1 firefox version\",</span><br><span class=\"hljs-comment\">                                \"last 1 safari version\"</span><br><span class=\"hljs-comment\">                            ],</span><br><span class=\"hljs-comment\">                            生产环境：默认是看生产环境</span><br><span class=\"hljs-comment\">                            \"production\":[</span><br><span class=\"hljs-comment\">                                \"&gt;0.2%\",</span><br><span class=\"hljs-comment\">                                \"not dead\",</span><br><span class=\"hljs-comment\">                                \"not op_mini all\"</span><br><span class=\"hljs-comment\">                            ]</span><br><span class=\"hljs-comment\">                        &#125;</span><br><span class=\"hljs-comment\">                    */</span><br>                   <span class=\"hljs-comment\">// 使用loader的默认配置</span><br>                   <span class=\"hljs-comment\">// \"postcss-loader\"</span><br>                   <span class=\"hljs-comment\">// 修改loader的配置</span><br>                   &#123;<br>                       loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>                       options: &#123;<br>                           <span class=\"hljs-comment\">// 固定写法</span><br>                           ident: <span class=\"hljs-string\">'postcss'</span>,<br>                           plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span> [<br>                               <span class=\"hljs-comment\">// postcss插件</span><br>                               <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>                           ]<br>                       &#125;<br>                   &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"webpack_code\"</span>,<br>  <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,<br>  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"index.js\"</span>,<br>  <span class=\"hljs-attr\">\"scripts\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"author\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"ISC\"</span>,<br>  <span class=\"hljs-attr\">\"devDependencies\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"css-loader\"</span>: <span class=\"hljs-string\">\"^3.5.3\"</span>,<br>    <span class=\"hljs-attr\">\"file-loader\"</span>: <span class=\"hljs-string\">\"^6.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-loader\"</span>: <span class=\"hljs-string\">\"^1.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^4.3.0\"</span>,<br>    <span class=\"hljs-attr\">\"less\"</span>: <span class=\"hljs-string\">\"^3.11.1\"</span>,<br>    <span class=\"hljs-attr\">\"less-loader\"</span>: <span class=\"hljs-string\">\"^6.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"mini-css-extract-plugin\"</span>: <span class=\"hljs-string\">\"^0.9.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-loader\"</span>: <span class=\"hljs-string\">\"^3.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-preset-env\"</span>: <span class=\"hljs-string\">\"^6.7.0\"</span>,<br>    <span class=\"hljs-attr\">\"style-loader\"</span>: <span class=\"hljs-string\">\"^1.2.1\"</span>,<br>    <span class=\"hljs-attr\">\"url-loader\"</span>: <span class=\"hljs-string\">\"^4.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack\"</span>: <span class=\"hljs-string\">\"^4.43.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-cli\"</span>: <span class=\"hljs-string\">\"^3.3.11\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-dev-server\"</span>: <span class=\"hljs-string\">\"^3.11.0\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"browserslist\"</span>:&#123;<br>    <span class=\"hljs-attr\">\"development\"</span>:[<br>        <span class=\"hljs-string\">\"last 1 chrome version\"</span>,<br>        <span class=\"hljs-string\">\"last 1 firefox version\"</span>,<br>        <span class=\"hljs-string\">\"last 1 safari version\"</span><br>    ],<br>    <span class=\"hljs-attr\">\"production\"</span>:[<br>        <span class=\"hljs-string\">\"&gt;0.2%\"</span>,<br>        <span class=\"hljs-string\">\"not dead\"</span>,<br>        <span class=\"hljs-string\">\"not op_mini all\"</span><br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>a.css</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: pink;<br>    <span class=\"hljs-attribute\">display</span>: flex;<br>    <span class=\"hljs-attribute\">backface-visibility</span>: hidden;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>打包之后的css文件</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: pink;<br>    <span class=\"hljs-attribute\">display</span>: flex;<br>    <span class=\"hljs-attribute\">-webkit-backface-visibility</span>: hidden;<br>            <span class=\"hljs-attribute\">backface-visibility</span>: hidden;<br>&#125;<br><span class=\"hljs-selector-id\">#box2</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">200px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">200px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: deeppink;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"压缩css\"><a href=\"#压缩css\" class=\"headerlink\" title=\"压缩css\"></a>压缩css</h3><p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> optimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><br>process.env.NODE_ENV = <span class=\"hljs-string\">'development'</span><br><br><span class=\"hljs-comment\">// optimize-css-assets-webpack-plugin</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-string\">'css-loader'</span>,<br>                   &#123;<br>                       loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>                       options: &#123;<br>                           ident: <span class=\"hljs-string\">'postcss'</span>,<br>                           plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span> [<br>                               <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>                           ]<br>                       &#125;<br>                   &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-comment\">// 压缩css</span><br>        <span class=\"hljs-keyword\">new</span> optimizeCssAssetsWebpackPlugin()<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>使用 optimize-css-assets-webpack-plugin 插件就可以压缩css</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"开发环境\"><a href=\"#开发环境\" class=\"headerlink\" title=\"开发环境\"></a>开发环境</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack 可以配置两种环境模式，即：<code>开发环境</code>和<code>生产环境</code>。开发环境是 能让代码本地调试运行的环境，生产环境是 能让代码优化上线运行的环境。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们写的源代码里面包含了 es6 语法, less 文件要经过webpack进行编译处理,比如将 less 文件编译成 css 文件，把 es6 语法编译成浏览器能够识别的语法，然后输出的 bundle 这个资源文件就可以被浏览器运行了，为了让开发者更轻松，这里还添加了一些自动化工作，比如自动打开浏览器，自动刷新，自动编译等等一些咧操作，让我们的效率更高，这就是开发环境所做的事情。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们的样式在之前处理是整合到js中的，如果让样式在 js 中，会让 js 体积变得很大，下载的很慢，同时，这里会先加载js，再通过创建<code>&lt;style&gt;</code>标签，会出现闪屏的现象，所以我们要将css从js文件中提取出来，还有代码压缩，兼容性处理都可以让带吗更快，性能更好，能够平稳的运行，这样我们要做的事情会很多，如果把这些都放在开发环境下，那开发环境要做的事情就太多了，打包速度就会很慢，不利于我们开发，所以这些事情我们要放在生产环境上去做。</p>\n<h3 id=\"提取css成单独文件\"><a href=\"#提取css成单独文件\" class=\"headerlink\" title=\"提取css成单独文件\"></a>提取css成单独文件</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这里需要用到一个新的插件 <code>miniCssExtractPlugin</code>，引用这个插件之后打包出来的样式是以 <code>&lt;link&gt;</code>  引入，而不是 <code>&lt;style&gt;</code> 标签，所以不会出现闪屏现象，并且 css 文件和 js 文件分割开了，js 文件的体积也没有那么大，解析速度会更好一些。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    <span class=\"hljs-comment\">// 创建style标签，将样式放入</span><br>                    <span class=\"hljs-comment\">// 'style-loader', </span><br>                    <span class=\"hljs-comment\">// 这个loader取代style-loader。作用：提取js中的css成单独文件</span><br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-comment\">// 将css整合到js文件中</span><br>                    <span class=\"hljs-string\">'css-loader'</span><br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            <span class=\"hljs-comment\">// 对输出的css文件进行重命名</span><br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>目录文件</p>\n{% asset_img catalogue.jpeg  %}\n\n<p>打包输出的 index.html 文件</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"en\"</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"css/built.css\"</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"stylesheet\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box1\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box2\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"js/built.js\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"css的兼容性处理\"><a href=\"#css的兼容性处理\" class=\"headerlink\" title=\"css的兼容性处理\"></a>css的兼容性处理</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;有时我们写的 css 样式并不是在所有的浏览器上都兼容，而 webpack 的 postcss-loader 会帮助我们解决这个问题。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><br><span class=\"hljs-comment\">// 设置nodejs环境变量</span><br>process.env.NODE_ENV = <span class=\"hljs-string\">'development'</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-comment\">// 这种写法是使用loader的默认配置</span><br>                    <span class=\"hljs-string\">'css-loader'</span>,<br>                    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">                        css兼容性处理：postcss --&gt; postcss-loader postcss-preset-env，下载这两个包</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                        postcss-preset-env插件帮postcss找到package.json中 browserslist 里面的配置，通过配置加载指定的css兼容性样式</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                        “browserslist”:&#123;</span><br><span class=\"hljs-comment\">                            开发环境 --&gt; 设置node环境变量 : process.env.NODE_ENV = development</span><br><span class=\"hljs-comment\">                            \"development\":[</span><br><span class=\"hljs-comment\">                                \"last 1 chrome version\",</span><br><span class=\"hljs-comment\">                                \"last 1 firefox version\",</span><br><span class=\"hljs-comment\">                                \"last 1 safari version\"</span><br><span class=\"hljs-comment\">                            ],</span><br><span class=\"hljs-comment\">                            生产环境：默认是看生产环境</span><br><span class=\"hljs-comment\">                            \"production\":[</span><br><span class=\"hljs-comment\">                                \"&gt;0.2%\",</span><br><span class=\"hljs-comment\">                                \"not dead\",</span><br><span class=\"hljs-comment\">                                \"not op_mini all\"</span><br><span class=\"hljs-comment\">                            ]</span><br><span class=\"hljs-comment\">                        &#125;</span><br><span class=\"hljs-comment\">                    */</span><br>                   <span class=\"hljs-comment\">// 使用loader的默认配置</span><br>                   <span class=\"hljs-comment\">// \"postcss-loader\"</span><br>                   <span class=\"hljs-comment\">// 修改loader的配置</span><br>                   &#123;<br>                       loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>                       options: &#123;<br>                           <span class=\"hljs-comment\">// 固定写法</span><br>                           ident: <span class=\"hljs-string\">'postcss'</span>,<br>                           plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span> [<br>                               <span class=\"hljs-comment\">// postcss插件</span><br>                               <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>                           ]<br>                       &#125;<br>                   &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"webpack_code\"</span>,<br>  <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,<br>  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"index.js\"</span>,<br>  <span class=\"hljs-attr\">\"scripts\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"author\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"ISC\"</span>,<br>  <span class=\"hljs-attr\">\"devDependencies\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"css-loader\"</span>: <span class=\"hljs-string\">\"^3.5.3\"</span>,<br>    <span class=\"hljs-attr\">\"file-loader\"</span>: <span class=\"hljs-string\">\"^6.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-loader\"</span>: <span class=\"hljs-string\">\"^1.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^4.3.0\"</span>,<br>    <span class=\"hljs-attr\">\"less\"</span>: <span class=\"hljs-string\">\"^3.11.1\"</span>,<br>    <span class=\"hljs-attr\">\"less-loader\"</span>: <span class=\"hljs-string\">\"^6.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"mini-css-extract-plugin\"</span>: <span class=\"hljs-string\">\"^0.9.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-loader\"</span>: <span class=\"hljs-string\">\"^3.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-preset-env\"</span>: <span class=\"hljs-string\">\"^6.7.0\"</span>,<br>    <span class=\"hljs-attr\">\"style-loader\"</span>: <span class=\"hljs-string\">\"^1.2.1\"</span>,<br>    <span class=\"hljs-attr\">\"url-loader\"</span>: <span class=\"hljs-string\">\"^4.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack\"</span>: <span class=\"hljs-string\">\"^4.43.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-cli\"</span>: <span class=\"hljs-string\">\"^3.3.11\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-dev-server\"</span>: <span class=\"hljs-string\">\"^3.11.0\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"browserslist\"</span>:&#123;<br>    <span class=\"hljs-attr\">\"development\"</span>:[<br>        <span class=\"hljs-string\">\"last 1 chrome version\"</span>,<br>        <span class=\"hljs-string\">\"last 1 firefox version\"</span>,<br>        <span class=\"hljs-string\">\"last 1 safari version\"</span><br>    ],<br>    <span class=\"hljs-attr\">\"production\"</span>:[<br>        <span class=\"hljs-string\">\"&gt;0.2%\"</span>,<br>        <span class=\"hljs-string\">\"not dead\"</span>,<br>        <span class=\"hljs-string\">\"not op_mini all\"</span><br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>a.css</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: pink;<br>    <span class=\"hljs-attribute\">display</span>: flex;<br>    <span class=\"hljs-attribute\">backface-visibility</span>: hidden;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>打包之后的css文件</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: pink;<br>    <span class=\"hljs-attribute\">display</span>: flex;<br>    <span class=\"hljs-attribute\">-webkit-backface-visibility</span>: hidden;<br>            <span class=\"hljs-attribute\">backface-visibility</span>: hidden;<br>&#125;<br><span class=\"hljs-selector-id\">#box2</span> &#123;<br>    <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">200px</span>;<br>    <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">200px</span>;<br>    <span class=\"hljs-attribute\">background-color</span>: deeppink;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"压缩css\"><a href=\"#压缩css\" class=\"headerlink\" title=\"压缩css\"></a>压缩css</h3><p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> miniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> optimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><br>process.env.NODE_ENV = <span class=\"hljs-string\">'development'</span><br><br><span class=\"hljs-comment\">// optimize-css-assets-webpack-plugin</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<br>                    miniCssExtractPlugin.loader,<br>                    <span class=\"hljs-string\">'css-loader'</span>,<br>                   &#123;<br>                       loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>                       options: &#123;<br>                           ident: <span class=\"hljs-string\">'postcss'</span>,<br>                           plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span>=&gt;</span> [<br>                               <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>                           ]<br>                       &#125;<br>                   &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> miniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-comment\">// 压缩css</span><br>        <span class=\"hljs-keyword\">new</span> optimizeCssAssetsWebpackPlugin()<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>使用 optimize-css-assets-webpack-plugin 插件就可以压缩css</p>\n"},{"title":"Webpack基础入门01","date":"2020-05-19T04:49:41.000Z","_content":"&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack是一种前端资源构建工具,一个静态模块打包器。当我们在开发过程中使用一些浏览器并不能识别的语言时，比如：在js文件中使用ES Module语法、使用less语法等等，这时我们就需要一个工具将浏览器不能识别的语法编译成浏览器能够识别的语法，在过去我们会把这些语法通过一个个小工具去编译，这样维护起来会很麻烦，所以前端就提出了一个概念，叫做\"构建工具\"，构建工具的意思就是找一个大的工具将这些小的工具功能都包含进来，现在我们只要关注这个大工具就可以了。而Webpack就是构建工具的一种。Webpack会根据入口文件的依赖关系，将所有的资源(js/json/css/image/less/...)全部引进来，形成chunk代码块，然后会根据不同的资源进行不同的处理，比如将less编译成css，这个过程叫做打包，打包之后输出出去，输出去的文件我们叫做bundle，所以Webpack还是一个静态模块打包器。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack有五个核心概念，分别是：entry、output、loader、plugins、mode\n### 安装\n```js\n// 全局安装，我们可以使用webpack的相关指令\nnpm i webpack webpack-cli -global\n// 本地安装\nnpm i webpack webpack-cli -D\n```\n- 运行指令\n  - 开发环境：\n  ```js\n  // webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js\n  webpack ./src/index.js -o ./build/build.js --mode=development\n  ```\n  - 生产环境：\n  ```js\n  // webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js\n  webpack ./src/index.js -o ./build/build.js --mode=production\n  ```\n- 总结：\n  - 生产环境比开发环境多一个压缩js代码\n  - webpack能处理js/json，不能处理css/img等其他资源\n  - 生产环境和开发环境将ES6模块化编译成浏览器能识别的模块化\n\n### 打包资源文件\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们可以在根目录下建一个Webpack的配置文件webpack.config.js，用来指示Webpack做哪些事情（当我们运行webpack指令时，会加载里面的配置）\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;所有构建工具都是基于nodejs平台运行的,模块化默认采用commonjs\n- 打包样式资源（webpack.config.js）\n```js\n// resolve用来拼接绝对路径的方法\nconst { resolve } = require('path')\n\nmodule.exports = {\n  // webpack配置\n  // 入口起点\n  entry: './src/index.js',\n  // 输出\n  output: {\n    // 输出文件名\n    filname: 'build.js',\n    // 输出路径\n    // __dirname nodejs的变量，代表当前文件的目录绝对路径\n    path: resolve(__diranem,'build')\n  },\n  // loader的配置\n  module: {\n    rules: [\n      // 详细loader的配置\n      // 不同文件必须配置不同loader处理\n      {\n        // 匹配哪些文件\n        test: /\\.css/,\n        // 使用哪些loader进行处理\n        use: [\n          // use数组中loader执行顺序：从右到左，从下到上 依次执行\n          // 创建style标签，将js中的样式资源插入进去，添加到head中生效\n          'style-loader',\n          // 将css文件变成commonjs模块加载js中,里面内容是样式字符串\n          'css-loader'\n        ]\n      },\n      {\n        test: /\\.less/,\n        use: [\n          'style-loader',\n          'css-loader',\n          // 将less文件编译成css文件\n          // 需要下载less-loader less\n          'less-loader'\n        ]\n      }\n    ]\n  },\n  // plugins的配置\n  plugins: [\n    // 详细plugins的配置\n  ],\n  // 模式\n  mode: 'development' // 开发模式\n  // mode: 'production'\n}\n```\n注：以上都需要下载相应的loader，例如：```npm i style-loader css-loader -D```\n- 打包html资源\n打包html需要引入html-webpack-plugin插件\n```js\nconst { resolve } = require('path')\nimport HtmlWebpackPlugin from 'html-webpack-plugin'\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      // loader配置\n    ]\n  },\n  plugins: [\n    // plugins的配置\n    // 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）\n    // 如果需要有结构的html文件，可以通过传参的方式\n    new HtmlWebpackPlugin({\n      // 复制./src/index.html文件，并自动引入打包输出的所有资源（JS/CSS）\n      template: './src/index.html\n    })\n  ],\n  mode: 'development'\n}\n```\n- 打包图片资源\nindex.html\n```html\n  <div id=\"box1\"></div>\n  <div id=\"box2\"></div>\n  <div id=\"box3\"></div>\n  <img src=\"./01.jpg\" alt=\"01\">\n```\nindex.less\n```css\n#box1{\n  width: 100px;\n  height: 100px;\n  background-image: url('./01.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n#box2{\n  width: 100px;\n  height: 100px;\n  background-image: url('./02.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n#box3{\n  width: 100px;\n  height: 100px;\n  background-image: url('./03.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n```\nindex.js\n```js\nimport './index.less'\n```\nwebpack.config.js\n```js\nconst { resolve } =  require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname, 'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        // 要使用多个loader处理用use\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        // 处理图片资源\n        // 处理不了html中img图片\n        test: /\\.(jpg|png|gif)$/,\n        // 使用一个loader\n        // 下载 url-loader file-loader\n        loader: 'url-loader',\n        options: {\n          // 图片大小小于8kb,就会被base64处理\n          // 优点：减少请求数量（减轻服务器压力）\n          // 缺点：图片体积会更大（文件请求速度会更慢）\n          limit: 8 * 1024,\n          // 问题：因为url-loader默认使用es6模块化解析，而html-loader引入图片是commonjs\n          // 解析时会出问题：[object Module]\n          // 解决：关闭url-loader的es6模块化，使用commonjs解析\n          // 注：目前新版本不会有这个问题\n          esModule: false,\n          // 给图片进行重命名\n          // [hash:10]取图片的hash的前10位\n          // [ext]取文件原来扩展名\n          name: '[hash:10].[ext]'\n        }\n      },\n      {\n        test: /\\.html$/,\n        // 处理html文件的img图片（负责引入img，从而能被url-loader进行处理）\n        loader: 'html-loader'\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development'\n}\n```\n最新版本已经优化了url-loader，不会出现在html文件中直接引入图片解析时显示[object Module]这个问题\n- 打包其他资源\n其他资源一般指除了html、css、js以外的资源，比如说字体文件资源\n```js\nconst {resolve} = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader','css-loader']\n      },\n      // 打包其他资源（除了html/js/css资源以外的其他资源）\n      {\n        // 排除html/js/css资源\n        exclude: /\\.(html|js|css)$/,\n        loader: 'file-loader',\n        options: {\n          name: '[hash:10].[ext]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development'\n}\n```\n### devServer\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;devServer用来自动化(自动编译，自动打开浏览器，自动刷新浏览器)，只会在内存中编译打包，不会有任何输出。\n```js\nconst {resolve} = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader','css-loader']\n      },\n      // 打包其他资源（除了html/js/css资源以外的其他资源）\n      {\n        // 排除html/js/css资源\n        exclude: /\\.(html|js|css)$/,\n        loader: 'file-loader',\n        options: {\n          name: '[hash:10].[ext]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development',\n  devServer: {\n    // 项目构建后路径\n    contentBase: resolve(__dirname,'build'),\n    // 启动gzip压缩\n    compress: true,\n    // 端口号\n    port: 3000,\n    // 自动打开默认浏览器\n    open: true\n  }\n}\n```\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在运行前需要安装webpack-dev-server包，指令为```npm i webpack-dev-server -D```，启动devServer指令为：```npx webpack-dev-server```，由于我们没有全局安装webpack-dev-server，所以要在前面加一个npx。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack指令会将打包结果输出出去，npx webpack-dev-server指令只会在内存中编译打包，没有输出。","source":"_posts/webpack.md","raw":"---\ntitle: Webpack基础入门01\ndate: 2020-05-19 12:49:41\ntags: webpack\ncategories:\n- 前端构建工具\n---\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack是一种前端资源构建工具,一个静态模块打包器。当我们在开发过程中使用一些浏览器并不能识别的语言时，比如：在js文件中使用ES Module语法、使用less语法等等，这时我们就需要一个工具将浏览器不能识别的语法编译成浏览器能够识别的语法，在过去我们会把这些语法通过一个个小工具去编译，这样维护起来会很麻烦，所以前端就提出了一个概念，叫做\"构建工具\"，构建工具的意思就是找一个大的工具将这些小的工具功能都包含进来，现在我们只要关注这个大工具就可以了。而Webpack就是构建工具的一种。Webpack会根据入口文件的依赖关系，将所有的资源(js/json/css/image/less/...)全部引进来，形成chunk代码块，然后会根据不同的资源进行不同的处理，比如将less编译成css，这个过程叫做打包，打包之后输出出去，输出去的文件我们叫做bundle，所以Webpack还是一个静态模块打包器。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack有五个核心概念，分别是：entry、output、loader、plugins、mode\n### 安装\n```js\n// 全局安装，我们可以使用webpack的相关指令\nnpm i webpack webpack-cli -global\n// 本地安装\nnpm i webpack webpack-cli -D\n```\n- 运行指令\n  - 开发环境：\n  ```js\n  // webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js\n  webpack ./src/index.js -o ./build/build.js --mode=development\n  ```\n  - 生产环境：\n  ```js\n  // webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js\n  webpack ./src/index.js -o ./build/build.js --mode=production\n  ```\n- 总结：\n  - 生产环境比开发环境多一个压缩js代码\n  - webpack能处理js/json，不能处理css/img等其他资源\n  - 生产环境和开发环境将ES6模块化编译成浏览器能识别的模块化\n\n### 打包资源文件\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们可以在根目录下建一个Webpack的配置文件webpack.config.js，用来指示Webpack做哪些事情（当我们运行webpack指令时，会加载里面的配置）\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;所有构建工具都是基于nodejs平台运行的,模块化默认采用commonjs\n- 打包样式资源（webpack.config.js）\n```js\n// resolve用来拼接绝对路径的方法\nconst { resolve } = require('path')\n\nmodule.exports = {\n  // webpack配置\n  // 入口起点\n  entry: './src/index.js',\n  // 输出\n  output: {\n    // 输出文件名\n    filname: 'build.js',\n    // 输出路径\n    // __dirname nodejs的变量，代表当前文件的目录绝对路径\n    path: resolve(__diranem,'build')\n  },\n  // loader的配置\n  module: {\n    rules: [\n      // 详细loader的配置\n      // 不同文件必须配置不同loader处理\n      {\n        // 匹配哪些文件\n        test: /\\.css/,\n        // 使用哪些loader进行处理\n        use: [\n          // use数组中loader执行顺序：从右到左，从下到上 依次执行\n          // 创建style标签，将js中的样式资源插入进去，添加到head中生效\n          'style-loader',\n          // 将css文件变成commonjs模块加载js中,里面内容是样式字符串\n          'css-loader'\n        ]\n      },\n      {\n        test: /\\.less/,\n        use: [\n          'style-loader',\n          'css-loader',\n          // 将less文件编译成css文件\n          // 需要下载less-loader less\n          'less-loader'\n        ]\n      }\n    ]\n  },\n  // plugins的配置\n  plugins: [\n    // 详细plugins的配置\n  ],\n  // 模式\n  mode: 'development' // 开发模式\n  // mode: 'production'\n}\n```\n注：以上都需要下载相应的loader，例如：```npm i style-loader css-loader -D```\n- 打包html资源\n打包html需要引入html-webpack-plugin插件\n```js\nconst { resolve } = require('path')\nimport HtmlWebpackPlugin from 'html-webpack-plugin'\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      // loader配置\n    ]\n  },\n  plugins: [\n    // plugins的配置\n    // 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）\n    // 如果需要有结构的html文件，可以通过传参的方式\n    new HtmlWebpackPlugin({\n      // 复制./src/index.html文件，并自动引入打包输出的所有资源（JS/CSS）\n      template: './src/index.html\n    })\n  ],\n  mode: 'development'\n}\n```\n- 打包图片资源\nindex.html\n```html\n  <div id=\"box1\"></div>\n  <div id=\"box2\"></div>\n  <div id=\"box3\"></div>\n  <img src=\"./01.jpg\" alt=\"01\">\n```\nindex.less\n```css\n#box1{\n  width: 100px;\n  height: 100px;\n  background-image: url('./01.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n#box2{\n  width: 100px;\n  height: 100px;\n  background-image: url('./02.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n#box3{\n  width: 100px;\n  height: 100px;\n  background-image: url('./03.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n```\nindex.js\n```js\nimport './index.less'\n```\nwebpack.config.js\n```js\nconst { resolve } =  require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname, 'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        // 要使用多个loader处理用use\n        use: [\n          'style-loader',\n          'css-loader',\n          'less-loader'\n        ]\n      },\n      {\n        // 处理图片资源\n        // 处理不了html中img图片\n        test: /\\.(jpg|png|gif)$/,\n        // 使用一个loader\n        // 下载 url-loader file-loader\n        loader: 'url-loader',\n        options: {\n          // 图片大小小于8kb,就会被base64处理\n          // 优点：减少请求数量（减轻服务器压力）\n          // 缺点：图片体积会更大（文件请求速度会更慢）\n          limit: 8 * 1024,\n          // 问题：因为url-loader默认使用es6模块化解析，而html-loader引入图片是commonjs\n          // 解析时会出问题：[object Module]\n          // 解决：关闭url-loader的es6模块化，使用commonjs解析\n          // 注：目前新版本不会有这个问题\n          esModule: false,\n          // 给图片进行重命名\n          // [hash:10]取图片的hash的前10位\n          // [ext]取文件原来扩展名\n          name: '[hash:10].[ext]'\n        }\n      },\n      {\n        test: /\\.html$/,\n        // 处理html文件的img图片（负责引入img，从而能被url-loader进行处理）\n        loader: 'html-loader'\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development'\n}\n```\n最新版本已经优化了url-loader，不会出现在html文件中直接引入图片解析时显示[object Module]这个问题\n- 打包其他资源\n其他资源一般指除了html、css、js以外的资源，比如说字体文件资源\n```js\nconst {resolve} = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader','css-loader']\n      },\n      // 打包其他资源（除了html/js/css资源以外的其他资源）\n      {\n        // 排除html/js/css资源\n        exclude: /\\.(html|js|css)$/,\n        loader: 'file-loader',\n        options: {\n          name: '[hash:10].[ext]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development'\n}\n```\n### devServer\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;devServer用来自动化(自动编译，自动打开浏览器，自动刷新浏览器)，只会在内存中编译打包，不会有任何输出。\n```js\nconst {resolve} = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname,'build')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader','css-loader']\n      },\n      // 打包其他资源（除了html/js/css资源以外的其他资源）\n      {\n        // 排除html/js/css资源\n        exclude: /\\.(html|js|css)$/,\n        loader: 'file-loader',\n        options: {\n          name: '[hash:10].[ext]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    })\n  ],\n  mode: 'development',\n  devServer: {\n    // 项目构建后路径\n    contentBase: resolve(__dirname,'build'),\n    // 启动gzip压缩\n    compress: true,\n    // 端口号\n    port: 3000,\n    // 自动打开默认浏览器\n    open: true\n  }\n}\n```\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在运行前需要安装webpack-dev-server包，指令为```npm i webpack-dev-server -D```，启动devServer指令为：```npx webpack-dev-server```，由于我们没有全局安装webpack-dev-server，所以要在前面加一个npx。\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack指令会将打包结果输出出去，npx webpack-dev-server指令只会在内存中编译打包，没有输出。","slug":"webpack","published":1,"updated":"2020-05-19T14:05:35.191Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaj6hfdi000zx8s6hjp8dzd2","content":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack是一种前端资源构建工具,一个静态模块打包器。当我们在开发过程中使用一些浏览器并不能识别的语言时，比如：在js文件中使用ES Module语法、使用less语法等等，这时我们就需要一个工具将浏览器不能识别的语法编译成浏览器能够识别的语法，在过去我们会把这些语法通过一个个小工具去编译，这样维护起来会很麻烦，所以前端就提出了一个概念，叫做”构建工具”，构建工具的意思就是找一个大的工具将这些小的工具功能都包含进来，现在我们只要关注这个大工具就可以了。而Webpack就是构建工具的一种。Webpack会根据入口文件的依赖关系，将所有的资源(js/json/css/image/less/…)全部引进来，形成chunk代码块，然后会根据不同的资源进行不同的处理，比如将less编译成css，这个过程叫做打包，打包之后输出出去，输出去的文件我们叫做bundle，所以Webpack还是一个静态模块打包器。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack有五个核心概念，分别是：entry、output、loader、plugins、mode</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// 全局安装，我们可以使用webpack的相关指令</span><br>npm i webpack webpack-cli -global<br><span class=\"hljs-comment\">// 本地安装</span><br>npm i webpack webpack-cli -D<br></code></pre></td></tr></table></figure>\n<ul>\n<li>运行指令<ul>\n<li>开发环境：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js</span><br>webpack ./src/index.js -o ./build/build.js --mode=development<br></code></pre></td></tr></table></figure></li>\n<li>生产环境：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js</span><br>webpack ./src/index.js -o ./build/build.js --mode=production<br></code></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>总结：<ul>\n<li>生产环境比开发环境多一个压缩js代码</li>\n<li>webpack能处理js/json，不能处理css/img等其他资源</li>\n<li>生产环境和开发环境将ES6模块化编译成浏览器能识别的模块化</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"打包资源文件\"><a href=\"#打包资源文件\" class=\"headerlink\" title=\"打包资源文件\"></a>打包资源文件</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们可以在根目录下建一个Webpack的配置文件webpack.config.js，用来指示Webpack做哪些事情（当我们运行webpack指令时，会加载里面的配置）<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;所有构建工具都是基于nodejs平台运行的,模块化默认采用commonjs</p>\n<ul>\n<li>打包样式资源（webpack.config.js）<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// resolve用来拼接绝对路径的方法</span><br><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  <span class=\"hljs-comment\">// webpack配置</span><br>  <span class=\"hljs-comment\">// 入口起点</span><br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  <span class=\"hljs-comment\">// 输出</span><br>  output: &#123;<br>    <span class=\"hljs-comment\">// 输出文件名</span><br>    filname: <span class=\"hljs-string\">'build.js'</span>,<br>    <span class=\"hljs-comment\">// 输出路径</span><br>    <span class=\"hljs-comment\">// __dirname nodejs的变量，代表当前文件的目录绝对路径</span><br>    path: resolve(__diranem,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-comment\">// loader的配置</span><br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      <span class=\"hljs-comment\">// 详细loader的配置</span><br>      <span class=\"hljs-comment\">// 不同文件必须配置不同loader处理</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 匹配哪些文件</span><br>        test: <span class=\"hljs-regexp\">/\\.css/</span>,<br>        <span class=\"hljs-comment\">// 使用哪些loader进行处理</span><br>        use: [<br>          <span class=\"hljs-comment\">// use数组中loader执行顺序：从右到左，从下到上 依次执行</span><br>          <span class=\"hljs-comment\">// 创建style标签，将js中的样式资源插入进去，添加到head中生效</span><br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-comment\">// 将css文件变成commonjs模块加载js中,里面内容是样式字符串</span><br>          <span class=\"hljs-string\">'css-loader'</span><br>        ]<br>      &#125;,<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.less/</span>,<br>        use: [<br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-string\">'css-loader'</span>,<br>          <span class=\"hljs-comment\">// 将less文件编译成css文件</span><br>          <span class=\"hljs-comment\">// 需要下载less-loader less</span><br>          <span class=\"hljs-string\">'less-loader'</span><br>        ]<br>      &#125;<br>    ]<br>  &#125;,<br>  <span class=\"hljs-comment\">// plugins的配置</span><br>  plugins: [<br>    <span class=\"hljs-comment\">// 详细plugins的配置</span><br>  ],<br>  <span class=\"hljs-comment\">// 模式</span><br>  mode: <span class=\"hljs-string\">'development'</span> <span class=\"hljs-comment\">// 开发模式</span><br>  <span class=\"hljs-comment\">// mode: 'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n注：以上都需要下载相应的loader，例如：<code>npm i style-loader css-loader -D</code></li>\n<li>打包html资源<br>打包html需要引入html-webpack-plugin插件<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">import</span> HtmlWebpackPlugin <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'html-webpack-plugin'</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      <span class=\"hljs-comment\">// loader配置</span><br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-comment\">// plugins的配置</span><br>    <span class=\"hljs-comment\">// 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）</span><br>    <span class=\"hljs-comment\">// 如果需要有结构的html文件，可以通过传参的方式</span><br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      <span class=\"hljs-comment\">// 复制./src/index.html文件，并自动引入打包输出的所有资源（JS/CSS）</span><br>      template: <span class=\"hljs-string\">'./src/index.html</span><br><span class=\"hljs-string\">    &#125;)</span><br><span class=\"hljs-string\">  ],</span><br><span class=\"hljs-string\">  mode: '</span>development<span class=\"hljs-string\">'</span><br><span class=\"hljs-string\">&#125;</span><br></code></pre></td></tr></table></figure></li>\n<li>打包图片资源<br>index.html<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box1\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box2\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box3\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"./01.jpg\"</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">\"01\"</span>&gt;</span><br></code></pre></td></tr></table></figure>\nindex.less<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./01.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br><span class=\"hljs-selector-id\">#box2</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./02.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br><span class=\"hljs-selector-id\">#box3</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./03.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\nindex.js<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.less'</span><br></code></pre></td></tr></table></figure>\nwebpack.config.js<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; =  <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>        <span class=\"hljs-comment\">// 要使用多个loader处理用use</span><br>        use: [<br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-string\">'css-loader'</span>,<br>          <span class=\"hljs-string\">'less-loader'</span><br>        ]<br>      &#125;,<br>      &#123;<br>        <span class=\"hljs-comment\">// 处理图片资源</span><br>        <span class=\"hljs-comment\">// 处理不了html中img图片</span><br>        test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>        <span class=\"hljs-comment\">// 使用一个loader</span><br>        <span class=\"hljs-comment\">// 下载 url-loader file-loader</span><br>        loader: <span class=\"hljs-string\">'url-loader'</span>,<br>        options: &#123;<br>          <span class=\"hljs-comment\">// 图片大小小于8kb,就会被base64处理</span><br>          <span class=\"hljs-comment\">// 优点：减少请求数量（减轻服务器压力）</span><br>          <span class=\"hljs-comment\">// 缺点：图片体积会更大（文件请求速度会更慢）</span><br>          limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>          <span class=\"hljs-comment\">// 问题：因为url-loader默认使用es6模块化解析，而html-loader引入图片是commonjs</span><br>          <span class=\"hljs-comment\">// 解析时会出问题：[object Module]</span><br>          <span class=\"hljs-comment\">// 解决：关闭url-loader的es6模块化，使用commonjs解析</span><br>          <span class=\"hljs-comment\">// 注：目前新版本不会有这个问题</span><br>          esModule: <span class=\"hljs-literal\">false</span>,<br>          <span class=\"hljs-comment\">// 给图片进行重命名</span><br>          <span class=\"hljs-comment\">// [hash:10]取图片的hash的前10位</span><br>          <span class=\"hljs-comment\">// [ext]取文件原来扩展名</span><br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;,<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>        <span class=\"hljs-comment\">// 处理html文件的img图片（负责引入img，从而能被url-loader进行处理）</span><br>        loader: <span class=\"hljs-string\">'html-loader'</span><br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n最新版本已经优化了url-loader，不会出现在html文件中直接引入图片解析时显示[object Module]这个问题</li>\n<li>打包其他资源<br>其他资源一般指除了html、css、js以外的资源，比如说字体文件资源<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>        use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>      &#125;,<br>      <span class=\"hljs-comment\">// 打包其他资源（除了html/js/css资源以外的其他资源）</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 排除html/js/css资源</span><br>        exclude: <span class=\"hljs-regexp\">/\\.(html|js|css)$/</span>,<br>        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>        options: &#123;<br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"devServer\"><a href=\"#devServer\" class=\"headerlink\" title=\"devServer\"></a>devServer</h3>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;devServer用来自动化(自动编译，自动打开浏览器，自动刷新浏览器)，只会在内存中编译打包，不会有任何输出。<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>        use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>      &#125;,<br>      <span class=\"hljs-comment\">// 打包其他资源（除了html/js/css资源以外的其他资源）</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 排除html/js/css资源</span><br>        exclude: <span class=\"hljs-regexp\">/\\.(html|js|css)$/</span>,<br>        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>        options: &#123;<br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span>,<br>  devServer: &#123;<br>    <span class=\"hljs-comment\">// 项目构建后路径</span><br>    contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>    <span class=\"hljs-comment\">// 启动gzip压缩</span><br>    compress: <span class=\"hljs-literal\">true</span>,<br>    <span class=\"hljs-comment\">// 端口号</span><br>    port: <span class=\"hljs-number\">3000</span>,<br>    <span class=\"hljs-comment\">// 自动打开默认浏览器</span><br>    open: <span class=\"hljs-literal\">true</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在运行前需要安装webpack-dev-server包，指令为<code>npm i webpack-dev-server -D</code>，启动devServer指令为：<code>npx webpack-dev-server</code>，由于我们没有全局安装webpack-dev-server，所以要在前面加一个npx。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack指令会将打包结果输出出去，npx webpack-dev-server指令只会在内存中编译打包，没有输出。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Webpack是一种前端资源构建工具,一个静态模块打包器。当我们在开发过程中使用一些浏览器并不能识别的语言时，比如：在js文件中使用ES Module语法、使用less语法等等，这时我们就需要一个工具将浏览器不能识别的语法编译成浏览器能够识别的语法，在过去我们会把这些语法通过一个个小工具去编译，这样维护起来会很麻烦，所以前端就提出了一个概念，叫做”构建工具”，构建工具的意思就是找一个大的工具将这些小的工具功能都包含进来，现在我们只要关注这个大工具就可以了。而Webpack就是构建工具的一种。Webpack会根据入口文件的依赖关系，将所有的资源(js/json/css/image/less/…)全部引进来，形成chunk代码块，然后会根据不同的资源进行不同的处理，比如将less编译成css，这个过程叫做打包，打包之后输出出去，输出去的文件我们叫做bundle，所以Webpack还是一个静态模块打包器。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack有五个核心概念，分别是：entry、output、loader、plugins、mode</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// 全局安装，我们可以使用webpack的相关指令</span><br>npm i webpack webpack-cli -global<br><span class=\"hljs-comment\">// 本地安装</span><br>npm i webpack webpack-cli -D<br></code></pre></td></tr></table></figure>\n<ul>\n<li>运行指令<ul>\n<li>开发环境：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js</span><br>webpack ./src/index.js -o ./build/build.js --mode=development<br></code></pre></td></tr></table></figure></li>\n<li>生产环境：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// webpack会以./src/index.js为入口文件开始打包，打包后输出到./build/build.js</span><br>webpack ./src/index.js -o ./build/build.js --mode=production<br></code></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>总结：<ul>\n<li>生产环境比开发环境多一个压缩js代码</li>\n<li>webpack能处理js/json，不能处理css/img等其他资源</li>\n<li>生产环境和开发环境将ES6模块化编译成浏览器能识别的模块化</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"打包资源文件\"><a href=\"#打包资源文件\" class=\"headerlink\" title=\"打包资源文件\"></a>打包资源文件</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们可以在根目录下建一个Webpack的配置文件webpack.config.js，用来指示Webpack做哪些事情（当我们运行webpack指令时，会加载里面的配置）<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;所有构建工具都是基于nodejs平台运行的,模块化默认采用commonjs</p>\n<ul>\n<li>打包样式资源（webpack.config.js）<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">// resolve用来拼接绝对路径的方法</span><br><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  <span class=\"hljs-comment\">// webpack配置</span><br>  <span class=\"hljs-comment\">// 入口起点</span><br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  <span class=\"hljs-comment\">// 输出</span><br>  output: &#123;<br>    <span class=\"hljs-comment\">// 输出文件名</span><br>    filname: <span class=\"hljs-string\">'build.js'</span>,<br>    <span class=\"hljs-comment\">// 输出路径</span><br>    <span class=\"hljs-comment\">// __dirname nodejs的变量，代表当前文件的目录绝对路径</span><br>    path: resolve(__diranem,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-comment\">// loader的配置</span><br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      <span class=\"hljs-comment\">// 详细loader的配置</span><br>      <span class=\"hljs-comment\">// 不同文件必须配置不同loader处理</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 匹配哪些文件</span><br>        test: <span class=\"hljs-regexp\">/\\.css/</span>,<br>        <span class=\"hljs-comment\">// 使用哪些loader进行处理</span><br>        use: [<br>          <span class=\"hljs-comment\">// use数组中loader执行顺序：从右到左，从下到上 依次执行</span><br>          <span class=\"hljs-comment\">// 创建style标签，将js中的样式资源插入进去，添加到head中生效</span><br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-comment\">// 将css文件变成commonjs模块加载js中,里面内容是样式字符串</span><br>          <span class=\"hljs-string\">'css-loader'</span><br>        ]<br>      &#125;,<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.less/</span>,<br>        use: [<br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-string\">'css-loader'</span>,<br>          <span class=\"hljs-comment\">// 将less文件编译成css文件</span><br>          <span class=\"hljs-comment\">// 需要下载less-loader less</span><br>          <span class=\"hljs-string\">'less-loader'</span><br>        ]<br>      &#125;<br>    ]<br>  &#125;,<br>  <span class=\"hljs-comment\">// plugins的配置</span><br>  plugins: [<br>    <span class=\"hljs-comment\">// 详细plugins的配置</span><br>  ],<br>  <span class=\"hljs-comment\">// 模式</span><br>  mode: <span class=\"hljs-string\">'development'</span> <span class=\"hljs-comment\">// 开发模式</span><br>  <span class=\"hljs-comment\">// mode: 'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n注：以上都需要下载相应的loader，例如：<code>npm i style-loader css-loader -D</code></li>\n<li>打包html资源<br>打包html需要引入html-webpack-plugin插件<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">import</span> HtmlWebpackPlugin <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'html-webpack-plugin'</span><br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      <span class=\"hljs-comment\">// loader配置</span><br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-comment\">// plugins的配置</span><br>    <span class=\"hljs-comment\">// 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）</span><br>    <span class=\"hljs-comment\">// 如果需要有结构的html文件，可以通过传参的方式</span><br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      <span class=\"hljs-comment\">// 复制./src/index.html文件，并自动引入打包输出的所有资源（JS/CSS）</span><br>      template: <span class=\"hljs-string\">'./src/index.html</span><br><span class=\"hljs-string\">    &#125;)</span><br><span class=\"hljs-string\">  ],</span><br><span class=\"hljs-string\">  mode: '</span>development<span class=\"hljs-string\">'</span><br><span class=\"hljs-string\">&#125;</span><br></code></pre></td></tr></table></figure></li>\n<li>打包图片资源<br>index.html<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box1\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box2\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"box3\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"./01.jpg\"</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">\"01\"</span>&gt;</span><br></code></pre></td></tr></table></figure>\nindex.less<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-id\">#box1</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./01.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br><span class=\"hljs-selector-id\">#box2</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./02.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br><span class=\"hljs-selector-id\">#box3</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100px</span>;<br>  <span class=\"hljs-attribute\">background-image</span>: <span class=\"hljs-built_in\">url</span>(<span class=\"hljs-string\">'./03.jpg'</span>);<br>  <span class=\"hljs-attribute\">background-repeat</span>: no-repeat;<br>  <span class=\"hljs-attribute\">background-size</span>: <span class=\"hljs-number\">100%</span> <span class=\"hljs-number\">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\nindex.js<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.less'</span><br></code></pre></td></tr></table></figure>\nwebpack.config.js<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; =  <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>        <span class=\"hljs-comment\">// 要使用多个loader处理用use</span><br>        use: [<br>          <span class=\"hljs-string\">'style-loader'</span>,<br>          <span class=\"hljs-string\">'css-loader'</span>,<br>          <span class=\"hljs-string\">'less-loader'</span><br>        ]<br>      &#125;,<br>      &#123;<br>        <span class=\"hljs-comment\">// 处理图片资源</span><br>        <span class=\"hljs-comment\">// 处理不了html中img图片</span><br>        test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>        <span class=\"hljs-comment\">// 使用一个loader</span><br>        <span class=\"hljs-comment\">// 下载 url-loader file-loader</span><br>        loader: <span class=\"hljs-string\">'url-loader'</span>,<br>        options: &#123;<br>          <span class=\"hljs-comment\">// 图片大小小于8kb,就会被base64处理</span><br>          <span class=\"hljs-comment\">// 优点：减少请求数量（减轻服务器压力）</span><br>          <span class=\"hljs-comment\">// 缺点：图片体积会更大（文件请求速度会更慢）</span><br>          limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>          <span class=\"hljs-comment\">// 问题：因为url-loader默认使用es6模块化解析，而html-loader引入图片是commonjs</span><br>          <span class=\"hljs-comment\">// 解析时会出问题：[object Module]</span><br>          <span class=\"hljs-comment\">// 解决：关闭url-loader的es6模块化，使用commonjs解析</span><br>          <span class=\"hljs-comment\">// 注：目前新版本不会有这个问题</span><br>          esModule: <span class=\"hljs-literal\">false</span>,<br>          <span class=\"hljs-comment\">// 给图片进行重命名</span><br>          <span class=\"hljs-comment\">// [hash:10]取图片的hash的前10位</span><br>          <span class=\"hljs-comment\">// [ext]取文件原来扩展名</span><br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;,<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>        <span class=\"hljs-comment\">// 处理html文件的img图片（负责引入img，从而能被url-loader进行处理）</span><br>        loader: <span class=\"hljs-string\">'html-loader'</span><br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n最新版本已经优化了url-loader，不会出现在html文件中直接引入图片解析时显示[object Module]这个问题</li>\n<li>打包其他资源<br>其他资源一般指除了html、css、js以外的资源，比如说字体文件资源<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>        use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>      &#125;,<br>      <span class=\"hljs-comment\">// 打包其他资源（除了html/js/css资源以外的其他资源）</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 排除html/js/css资源</span><br>        exclude: <span class=\"hljs-regexp\">/\\.(html|js|css)$/</span>,<br>        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>        options: &#123;<br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"devServer\"><a href=\"#devServer\" class=\"headerlink\" title=\"devServer\"></a>devServer</h3>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;devServer用来自动化(自动编译，自动打开浏览器，自动刷新浏览器)，只会在内存中编译打包，不会有任何输出。<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>  entry: <span class=\"hljs-string\">'./src/index.js'</span>,<br>  output: &#123;<br>    filename: <span class=\"hljs-string\">'built.js'</span>,<br>    path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>  &#125;,<br>  <span class=\"hljs-built_in\">module</span>: &#123;<br>    rules: [<br>      &#123;<br>        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>        use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>      &#125;,<br>      <span class=\"hljs-comment\">// 打包其他资源（除了html/js/css资源以外的其他资源）</span><br>      &#123;<br>        <span class=\"hljs-comment\">// 排除html/js/css资源</span><br>        exclude: <span class=\"hljs-regexp\">/\\.(html|js|css)$/</span>,<br>        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>        options: &#123;<br>          name: <span class=\"hljs-string\">'[hash:10].[ext]'</span><br>        &#125;<br>      &#125;<br>    ]<br>  &#125;,<br>  plugins: [<br>    <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>      template: <span class=\"hljs-string\">'./src/index.html'</span><br>    &#125;)<br>  ],<br>  mode: <span class=\"hljs-string\">'development'</span>,<br>  devServer: &#123;<br>    <span class=\"hljs-comment\">// 项目构建后路径</span><br>    contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>    <span class=\"hljs-comment\">// 启动gzip压缩</span><br>    compress: <span class=\"hljs-literal\">true</span>,<br>    <span class=\"hljs-comment\">// 端口号</span><br>    port: <span class=\"hljs-number\">3000</span>,<br>    <span class=\"hljs-comment\">// 自动打开默认浏览器</span><br>    open: <span class=\"hljs-literal\">true</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在运行前需要安装webpack-dev-server包，指令为<code>npm i webpack-dev-server -D</code>，启动devServer指令为：<code>npx webpack-dev-server</code>，由于我们没有全局安装webpack-dev-server，所以要在前面加一个npx。<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;webpack指令会将打包结果输出出去，npx webpack-dev-server指令只会在内存中编译打包，没有输出。</li>\n</ul>\n"},{"title":"call、apply、bind","date":"2020-05-23T06:31:09.000Z","_content":"### 三者之间的区别\n- call、apply、bind 都是用来改变 this 关键字的。\n\n- call 和 apply 的用法是一样的，只不过在传参的时候，call 是一个一个的传，而 apply 是放在一个数组中传递。\n\n- bind 方法在 IE6~8 下不兼容，在 call 和 apply 中改变 this 关键字和执行 fn 一起完成了，而在 bind 中只是改变了 this 关键字并且传参，但是 fn 并没有执行，执行 bind 会有一个返回值，而这个返回值就是我们把 fn 的 this 改变后的那个结果，所以 bind 只是对 fn 进行了预处理","source":"_posts/call.md","raw":"---\ntitle: call、apply、bind\ndate: 2020-05-23 14:31:09\ntags: JS\ncategories:\n- JS基础\n---\n### 三者之间的区别\n- call、apply、bind 都是用来改变 this 关键字的。\n\n- call 和 apply 的用法是一样的，只不过在传参的时候，call 是一个一个的传，而 apply 是放在一个数组中传递。\n\n- bind 方法在 IE6~8 下不兼容，在 call 和 apply 中改变 this 关键字和执行 fn 一起完成了，而在 bind 中只是改变了 this 关键字并且传参，但是 fn 并没有执行，执行 bind 会有一个返回值，而这个返回值就是我们把 fn 的 this 改变后的那个结果，所以 bind 只是对 fn 进行了预处理","slug":"call","published":1,"updated":"2020-05-27T17:10:52.354Z","_id":"ckaj9b6qv0000n5s6b6h1f5f6","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"三者之间的区别\"><a href=\"#三者之间的区别\" class=\"headerlink\" title=\"三者之间的区别\"></a>三者之间的区别</h3><ul>\n<li><p>call、apply、bind 都是用来改变 this 关键字的。</p>\n</li>\n<li><p>call 和 apply 的用法是一样的，只不过在传参的时候，call 是一个一个的传，而 apply 是放在一个数组中传递。</p>\n</li>\n<li><p>bind 方法在 IE6~8 下不兼容，在 call 和 apply 中改变 this 关键字和执行 fn 一起完成了，而在 bind 中只是改变了 this 关键字并且传参，但是 fn 并没有执行，执行 bind 会有一个返回值，而这个返回值就是我们把 fn 的 this 改变后的那个结果，所以 bind 只是对 fn 进行了预处理</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"三者之间的区别\"><a href=\"#三者之间的区别\" class=\"headerlink\" title=\"三者之间的区别\"></a>三者之间的区别</h3><ul>\n<li><p>call、apply、bind 都是用来改变 this 关键字的。</p>\n</li>\n<li><p>call 和 apply 的用法是一样的，只不过在传参的时候，call 是一个一个的传，而 apply 是放在一个数组中传递。</p>\n</li>\n<li><p>bind 方法在 IE6~8 下不兼容，在 call 和 apply 中改变 this 关键字和执行 fn 一起完成了，而在 bind 中只是改变了 this 关键字并且传参，但是 fn 并没有执行，执行 bind 会有一个返回值，而这个返回值就是我们把 fn 的 this 改变后的那个结果，所以 bind 只是对 fn 进行了预处理</p>\n</li>\n</ul>\n"},{"title":"浏览器渲染整个页面的过程","date":"2020-05-23T06:46:39.000Z","_content":"&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;首先在地址栏中输入 url 地址，浏览器先查找自己本地的 DNS 记录找到对应的 IP 地址，如果本地没有找到就去 DNS服务器上查找，获取 IP 地址后开始建立 TCP 连接遵循三次握手就可以获取数据，浏览器开始解析 Html 构建 DOM 树，并行请求 css/image/js，CSS 文件下载完成，开始构建 CSS 树，CSS 树构建完成后和 DOM 树一起生成渲染树，计算出每个节点在屏幕中的位置，通过显卡把页面画到屏幕上。","source":"_posts/render.md","raw":"---\ntitle: 浏览器渲染整个页面的过程\ndate: 2020-05-23 14:46:39\ntags: JS\ncategories:\n- JS基础\n---\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;首先在地址栏中输入 url 地址，浏览器先查找自己本地的 DNS 记录找到对应的 IP 地址，如果本地没有找到就去 DNS服务器上查找，获取 IP 地址后开始建立 TCP 连接遵循三次握手就可以获取数据，浏览器开始解析 Html 构建 DOM 树，并行请求 css/image/js，CSS 文件下载完成，开始构建 CSS 树，CSS 树构建完成后和 DOM 树一起生成渲染树，计算出每个节点在屏幕中的位置，通过显卡把页面画到屏幕上。","slug":"render","published":1,"updated":"2020-05-23T07:01:11.264Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckajabadh000024s62sw1ey71","content":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;首先在地址栏中输入 url 地址，浏览器先查找自己本地的 DNS 记录找到对应的 IP 地址，如果本地没有找到就去 DNS服务器上查找，获取 IP 地址后开始建立 TCP 连接遵循三次握手就可以获取数据，浏览器开始解析 Html 构建 DOM 树，并行请求 css/image/js，CSS 文件下载完成，开始构建 CSS 树，CSS 树构建完成后和 DOM 树一起生成渲染树，计算出每个节点在屏幕中的位置，通过显卡把页面画到屏幕上。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;首先在地址栏中输入 url 地址，浏览器先查找自己本地的 DNS 记录找到对应的 IP 地址，如果本地没有找到就去 DNS服务器上查找，获取 IP 地址后开始建立 TCP 连接遵循三次握手就可以获取数据，浏览器开始解析 Html 构建 DOM 树，并行请求 css/image/js，CSS 文件下载完成，开始构建 CSS 树，CSS 树构建完成后和 DOM 树一起生成渲染树，计算出每个节点在屏幕中的位置，通过显卡把页面画到屏幕上。</p>\n"},{"title":"this","date":"2020-05-23T07:10:53.000Z","_content":"- 在构造函数中，this 指向 new 出来的实例本身。\n\n- 在事件中，this 指向触发这个事件的对象。\n\n- this 指向函数的直接调用者。\n \n- 自执行函数中的 this 永远都是 window。\n\n- 函数执行，首先看函数前面是否有\".\"，有的话，\".\"前面是谁 this 就是谁，没有的话，this 就是 window。\n\n- 箭头函数中的 this 取决于包裹箭头函数的第一个普通函数 this。","source":"_posts/this.md","raw":"---\ntitle: this\ndate: 2020-05-23 15:10:53\ntags: JS\ncategories:\n- JS基础\n---\n- 在构造函数中，this 指向 new 出来的实例本身。\n\n- 在事件中，this 指向触发这个事件的对象。\n\n- this 指向函数的直接调用者。\n \n- 自执行函数中的 this 永远都是 window。\n\n- 函数执行，首先看函数前面是否有\".\"，有的话，\".\"前面是谁 this 就是谁，没有的话，this 就是 window。\n\n- 箭头函数中的 this 取决于包裹箭头函数的第一个普通函数 this。","slug":"this","published":1,"updated":"2020-05-27T17:10:52.356Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaplvw5m00001lubcvzded9m","content":"<ul>\n<li><p>在构造函数中，this 指向 new 出来的实例本身。</p>\n</li>\n<li><p>在事件中，this 指向触发这个事件的对象。</p>\n</li>\n<li><p>this 指向函数的直接调用者。</p>\n</li>\n<li><p>自执行函数中的 this 永远都是 window。</p>\n</li>\n<li><p>函数执行，首先看函数前面是否有”.”，有的话，”.”前面是谁 this 就是谁，没有的话，this 就是 window。</p>\n</li>\n<li><p>箭头函数中的 this 取决于包裹箭头函数的第一个普通函数 this。</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>在构造函数中，this 指向 new 出来的实例本身。</p>\n</li>\n<li><p>在事件中，this 指向触发这个事件的对象。</p>\n</li>\n<li><p>this 指向函数的直接调用者。</p>\n</li>\n<li><p>自执行函数中的 this 永远都是 window。</p>\n</li>\n<li><p>函数执行，首先看函数前面是否有”.”，有的话，”.”前面是谁 this 就是谁，没有的话，this 就是 window。</p>\n</li>\n<li><p>箭头函数中的 this 取决于包裹箭头函数的第一个普通函数 this。</p>\n</li>\n</ul>\n"},{"title":"数组中常用的方法","date":"2020-05-23T09:45:31.000Z","_content":"### 1、push()\n- 向数组的末尾增加新的内容。\n\n- 返回新增后数组的长度。\n\n- 原来数组发生改变。\n\n### 2、pop()\n- 删除数组最后一项内容。\n\n- 返回被删除的那一项。\n\n- 原来的数组发生改变。\n\n### 3、shift()\n- 删除数组中的第一项。\n\n- 返回被删除的那一项。\n\n- 原来的数组发生改变。\n\n### 4、unshhift()\n- 向数组的开头增加内容。\n\n- 返回增加后数组的长度。\n\n- 原来的数组发生改变。\n\n### 5、splice(n,m,x)\n- 从索引 n 开始，删除 m 个，用 x 替换删除的部分。\n\n- 以数组的形式返回被删除的内容。\n\n- 原来的数组改变。\n\n### 6、slice(n,m)\n- 从索引 n 开始，找到索引 m 处，将找到的内容以一个新的数组返回。\n\n- 返回找到的数组。\n\n- 原来的数组不变。\n\n### 7、concat()\n- 把两个数组拼接到一起。\n\n- 返回拼接后的数组。\n\n- 原来的数组不变。\n\n### 8、toString()\n- 把原来的数组转换成字符串。\n\n- 以字符串的形式返回。\n\n- 原来的数组不变。\n\n### 9、join()\n- 按照每一个分隔符，把数组中的每一项拼接成一个字符串。\n\n- 返回以分隔符拼接的字符串。\n\n- 原来的数组不变。\n\n### 10、reverse()\n- 把原来的数组倒过来排列。\n\n- 返回原来的数组倒过来。\n\n- 原来的数组改变。\n\n### 11、sort()\n- 数组进行排序。\n\n- ary.sort(function(a,b) {return a - b})由小到大排序。\n\n- ary.sort(function(a,b) {return b - a})由大到小排序。\n\n- 原来的数组发生改变。\n\n### 12、indexOf()/lastIndexOf()\n- 当前内容在数组中第一次/最后一次出现位置的索引。\n\n- 如果数组中没有找到返回-1，如果找到索引是几就返回几。\n\n- 原来数组不变。\n\n### 13、map()/forEach()\n- 都是用来遍历数组每一项。\n\n- map()原来数组不变，forEach()原来得数组改变。","source":"_posts/arry.md","raw":"---\ntitle: 数组中常用的方法\ndate: 2020-05-23 17:45:31\ntags: JS\ncategories:\n- JS基础\n---\n### 1、push()\n- 向数组的末尾增加新的内容。\n\n- 返回新增后数组的长度。\n\n- 原来数组发生改变。\n\n### 2、pop()\n- 删除数组最后一项内容。\n\n- 返回被删除的那一项。\n\n- 原来的数组发生改变。\n\n### 3、shift()\n- 删除数组中的第一项。\n\n- 返回被删除的那一项。\n\n- 原来的数组发生改变。\n\n### 4、unshhift()\n- 向数组的开头增加内容。\n\n- 返回增加后数组的长度。\n\n- 原来的数组发生改变。\n\n### 5、splice(n,m,x)\n- 从索引 n 开始，删除 m 个，用 x 替换删除的部分。\n\n- 以数组的形式返回被删除的内容。\n\n- 原来的数组改变。\n\n### 6、slice(n,m)\n- 从索引 n 开始，找到索引 m 处，将找到的内容以一个新的数组返回。\n\n- 返回找到的数组。\n\n- 原来的数组不变。\n\n### 7、concat()\n- 把两个数组拼接到一起。\n\n- 返回拼接后的数组。\n\n- 原来的数组不变。\n\n### 8、toString()\n- 把原来的数组转换成字符串。\n\n- 以字符串的形式返回。\n\n- 原来的数组不变。\n\n### 9、join()\n- 按照每一个分隔符，把数组中的每一项拼接成一个字符串。\n\n- 返回以分隔符拼接的字符串。\n\n- 原来的数组不变。\n\n### 10、reverse()\n- 把原来的数组倒过来排列。\n\n- 返回原来的数组倒过来。\n\n- 原来的数组改变。\n\n### 11、sort()\n- 数组进行排序。\n\n- ary.sort(function(a,b) {return a - b})由小到大排序。\n\n- ary.sort(function(a,b) {return b - a})由大到小排序。\n\n- 原来的数组发生改变。\n\n### 12、indexOf()/lastIndexOf()\n- 当前内容在数组中第一次/最后一次出现位置的索引。\n\n- 如果数组中没有找到返回-1，如果找到索引是几就返回几。\n\n- 原来数组不变。\n\n### 13、map()/forEach()\n- 都是用来遍历数组每一项。\n\n- map()原来数组不变，forEach()原来得数组改变。","slug":"arry","published":1,"updated":"2020-05-27T17:10:52.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckaplvw5u00011lubct9c3ia0","content":"<h3 id=\"1、push\"><a href=\"#1、push\" class=\"headerlink\" title=\"1、push()\"></a>1、push()</h3><ul>\n<li><p>向数组的末尾增加新的内容。</p>\n</li>\n<li><p>返回新增后数组的长度。</p>\n</li>\n<li><p>原来数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"2、pop\"><a href=\"#2、pop\" class=\"headerlink\" title=\"2、pop()\"></a>2、pop()</h3><ul>\n<li><p>删除数组最后一项内容。</p>\n</li>\n<li><p>返回被删除的那一项。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"3、shift\"><a href=\"#3、shift\" class=\"headerlink\" title=\"3、shift()\"></a>3、shift()</h3><ul>\n<li><p>删除数组中的第一项。</p>\n</li>\n<li><p>返回被删除的那一项。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"4、unshhift\"><a href=\"#4、unshhift\" class=\"headerlink\" title=\"4、unshhift()\"></a>4、unshhift()</h3><ul>\n<li><p>向数组的开头增加内容。</p>\n</li>\n<li><p>返回增加后数组的长度。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"5、splice-n-m-x\"><a href=\"#5、splice-n-m-x\" class=\"headerlink\" title=\"5、splice(n,m,x)\"></a>5、splice(n,m,x)</h3><ul>\n<li><p>从索引 n 开始，删除 m 个，用 x 替换删除的部分。</p>\n</li>\n<li><p>以数组的形式返回被删除的内容。</p>\n</li>\n<li><p>原来的数组改变。</p>\n</li>\n</ul>\n<h3 id=\"6、slice-n-m\"><a href=\"#6、slice-n-m\" class=\"headerlink\" title=\"6、slice(n,m)\"></a>6、slice(n,m)</h3><ul>\n<li><p>从索引 n 开始，找到索引 m 处，将找到的内容以一个新的数组返回。</p>\n</li>\n<li><p>返回找到的数组。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"7、concat\"><a href=\"#7、concat\" class=\"headerlink\" title=\"7、concat()\"></a>7、concat()</h3><ul>\n<li><p>把两个数组拼接到一起。</p>\n</li>\n<li><p>返回拼接后的数组。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"8、toString\"><a href=\"#8、toString\" class=\"headerlink\" title=\"8、toString()\"></a>8、toString()</h3><ul>\n<li><p>把原来的数组转换成字符串。</p>\n</li>\n<li><p>以字符串的形式返回。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"9、join\"><a href=\"#9、join\" class=\"headerlink\" title=\"9、join()\"></a>9、join()</h3><ul>\n<li><p>按照每一个分隔符，把数组中的每一项拼接成一个字符串。</p>\n</li>\n<li><p>返回以分隔符拼接的字符串。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"10、reverse\"><a href=\"#10、reverse\" class=\"headerlink\" title=\"10、reverse()\"></a>10、reverse()</h3><ul>\n<li><p>把原来的数组倒过来排列。</p>\n</li>\n<li><p>返回原来的数组倒过来。</p>\n</li>\n<li><p>原来的数组改变。</p>\n</li>\n</ul>\n<h3 id=\"11、sort\"><a href=\"#11、sort\" class=\"headerlink\" title=\"11、sort()\"></a>11、sort()</h3><ul>\n<li><p>数组进行排序。</p>\n</li>\n<li><p>ary.sort(function(a,b) {return a - b})由小到大排序。</p>\n</li>\n<li><p>ary.sort(function(a,b) {return b - a})由大到小排序。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"12、indexOf-lastIndexOf\"><a href=\"#12、indexOf-lastIndexOf\" class=\"headerlink\" title=\"12、indexOf()/lastIndexOf()\"></a>12、indexOf()/lastIndexOf()</h3><ul>\n<li><p>当前内容在数组中第一次/最后一次出现位置的索引。</p>\n</li>\n<li><p>如果数组中没有找到返回-1，如果找到索引是几就返回几。</p>\n</li>\n<li><p>原来数组不变。</p>\n</li>\n</ul>\n<h3 id=\"13、map-forEach\"><a href=\"#13、map-forEach\" class=\"headerlink\" title=\"13、map()/forEach()\"></a>13、map()/forEach()</h3><ul>\n<li><p>都是用来遍历数组每一项。</p>\n</li>\n<li><p>map()原来数组不变，forEach()原来得数组改变。</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1、push\"><a href=\"#1、push\" class=\"headerlink\" title=\"1、push()\"></a>1、push()</h3><ul>\n<li><p>向数组的末尾增加新的内容。</p>\n</li>\n<li><p>返回新增后数组的长度。</p>\n</li>\n<li><p>原来数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"2、pop\"><a href=\"#2、pop\" class=\"headerlink\" title=\"2、pop()\"></a>2、pop()</h3><ul>\n<li><p>删除数组最后一项内容。</p>\n</li>\n<li><p>返回被删除的那一项。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"3、shift\"><a href=\"#3、shift\" class=\"headerlink\" title=\"3、shift()\"></a>3、shift()</h3><ul>\n<li><p>删除数组中的第一项。</p>\n</li>\n<li><p>返回被删除的那一项。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"4、unshhift\"><a href=\"#4、unshhift\" class=\"headerlink\" title=\"4、unshhift()\"></a>4、unshhift()</h3><ul>\n<li><p>向数组的开头增加内容。</p>\n</li>\n<li><p>返回增加后数组的长度。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"5、splice-n-m-x\"><a href=\"#5、splice-n-m-x\" class=\"headerlink\" title=\"5、splice(n,m,x)\"></a>5、splice(n,m,x)</h3><ul>\n<li><p>从索引 n 开始，删除 m 个，用 x 替换删除的部分。</p>\n</li>\n<li><p>以数组的形式返回被删除的内容。</p>\n</li>\n<li><p>原来的数组改变。</p>\n</li>\n</ul>\n<h3 id=\"6、slice-n-m\"><a href=\"#6、slice-n-m\" class=\"headerlink\" title=\"6、slice(n,m)\"></a>6、slice(n,m)</h3><ul>\n<li><p>从索引 n 开始，找到索引 m 处，将找到的内容以一个新的数组返回。</p>\n</li>\n<li><p>返回找到的数组。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"7、concat\"><a href=\"#7、concat\" class=\"headerlink\" title=\"7、concat()\"></a>7、concat()</h3><ul>\n<li><p>把两个数组拼接到一起。</p>\n</li>\n<li><p>返回拼接后的数组。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"8、toString\"><a href=\"#8、toString\" class=\"headerlink\" title=\"8、toString()\"></a>8、toString()</h3><ul>\n<li><p>把原来的数组转换成字符串。</p>\n</li>\n<li><p>以字符串的形式返回。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"9、join\"><a href=\"#9、join\" class=\"headerlink\" title=\"9、join()\"></a>9、join()</h3><ul>\n<li><p>按照每一个分隔符，把数组中的每一项拼接成一个字符串。</p>\n</li>\n<li><p>返回以分隔符拼接的字符串。</p>\n</li>\n<li><p>原来的数组不变。</p>\n</li>\n</ul>\n<h3 id=\"10、reverse\"><a href=\"#10、reverse\" class=\"headerlink\" title=\"10、reverse()\"></a>10、reverse()</h3><ul>\n<li><p>把原来的数组倒过来排列。</p>\n</li>\n<li><p>返回原来的数组倒过来。</p>\n</li>\n<li><p>原来的数组改变。</p>\n</li>\n</ul>\n<h3 id=\"11、sort\"><a href=\"#11、sort\" class=\"headerlink\" title=\"11、sort()\"></a>11、sort()</h3><ul>\n<li><p>数组进行排序。</p>\n</li>\n<li><p>ary.sort(function(a,b) {return a - b})由小到大排序。</p>\n</li>\n<li><p>ary.sort(function(a,b) {return b - a})由大到小排序。</p>\n</li>\n<li><p>原来的数组发生改变。</p>\n</li>\n</ul>\n<h3 id=\"12、indexOf-lastIndexOf\"><a href=\"#12、indexOf-lastIndexOf\" class=\"headerlink\" title=\"12、indexOf()/lastIndexOf()\"></a>12、indexOf()/lastIndexOf()</h3><ul>\n<li><p>当前内容在数组中第一次/最后一次出现位置的索引。</p>\n</li>\n<li><p>如果数组中没有找到返回-1，如果找到索引是几就返回几。</p>\n</li>\n<li><p>原来数组不变。</p>\n</li>\n</ul>\n<h3 id=\"13、map-forEach\"><a href=\"#13、map-forEach\" class=\"headerlink\" title=\"13、map()/forEach()\"></a>13、map()/forEach()</h3><ul>\n<li><p>都是用来遍历数组每一项。</p>\n</li>\n<li><p>map()原来数组不变，forEach()原来得数组改变。</p>\n</li>\n</ul>\n"},{"title":"webpack03","date":"2020-05-31T11:03:18.000Z","_content":"### eslint检查js\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果我们好多人开发一个项目，每个人有自己一套代码规范，这样会造成代码混乱，不宜维护。而 eslint 可以解决这个问题，让开发者使用同一套代码规范。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            /*\n                语法检查：eslint-loader eslint\n                注意：只检查自己写的源代码，第三方的库是不用检查的。\n                设置检查规则：\n                    package.json中eslintConfig中设置\n                        \"eslintConfig\":{\n                            \"extends\": \"airbnb-base\"\n                        }\n\n                    https://github.com/airbnb/javascript\n                    airbnb   -->  eslint-config-airbnb-base eslint eslint-plugin-import\n            */\n           {\n               test: /\\.js$/,\n               exclude: /node_modules/,\n               loader: 'eslint-loader',\n               options: {\n                   // 自动修复eslint的错误\n                   fix: true\n               }\n           }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        })\n    ],\n    mode: 'development'\n}\n```\n需要 ```npm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import```\n\npackage.json\n```json\n{\n  \"name\": \"webpack_code\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"css-loader\": \"^3.5.3\",\n    \"eslint\": \"^7.1.0\",\n    \"eslint-config-airbnb-base\": \"^14.1.0\",\n    \"eslint-loader\": \"^4.0.2\",\n    \"eslint-plugin-import\": \"^2.20.2\",\n    \"file-loader\": \"^6.0.0\",\n    \"html-loader\": \"^1.1.0\",\n    \"html-webpack-plugin\": \"^4.3.0\",\n    \"less\": \"^3.11.1\",\n    \"less-loader\": \"^6.1.0\",\n    \"mini-css-extract-plugin\": \"^0.9.0\",\n    \"optimize-css-assets-webpack-plugin\": \"^5.0.3\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.7.0\",\n    \"style-loader\": \"^1.2.1\",\n    \"url-loader\": \"^4.1.0\",\n    \"webpack\": \"^4.43.0\",\n    \"webpack-cli\": \"^3.3.11\",\n    \"webpack-dev-server\": \"^3.11.0\"\n  },\n  \"browserslist\": {\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ],\n    \"production\": [\n      \">0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ]\n  },\n  \"eslintConfig\":{\n    \"extends\": \"airbnb-base\"\n  }\n}\n```\n接下来我们可以试验一下，在 js 中写一些不规范的代码\n\nindex.js\n```js\nfunction add(a, b){\n  return a+b;\n}\nconsole.log(add(2,3))\n```\n之后运行webpack，我们再来看一下 index.js 文件\n\n```js\nfunction add(a, b) {\n  return a + b;\n}\nconsole.log(add(2, 3));\n```\n所有的代码都规范了，但是，在控制台有一个警告，建议我们不要在这里写 console.log\n![](./webpack03/warn.png)\n\n我们再来修改一下这个 index.js 文件吧\n\n```js\nfunction add(a, b) {\n  return a + b;\n}\n\n// 下一行eslint所有规则都失效（下一行不进行eslint检查）\n// eslint-disable-next-line\nconsole.log(add(2, 3));\n```\n\n现在再运行 webpack 就不会有任何警告了\n\n### babel处理js兼容性\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;当我们使用 ES6 语法来写代码时，我们在谷歌浏览器打开完全没有问题，但是使用IE打开就会报错，比如箭头函数，在IE下是不识别的，这时我们就需要用到 babel 了，来将 ES6 甚至更高级的语法转换成浏览器识别的语法。我们需要下载 ```babel-loader``` ```@babel/core``` ```@babel/preset-env```\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在 webpack 中，按照以上的方法处理后，确实 IE 能识别像箭头函数这样的语法了，但是像更高级的语法 promise 却还是无法识别，这时我们需要做全部兼容性处理，用到 ```@babel/polyfill``` ，下载完成后，只需在代码中用 ```import '@babel/polyfill'```引入即可，我们再打开浏览器看一下，确实可以识别了 promise。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然现在所有的语法都识别了，但现在还是有一个弊端，之前我们打的包可能也就几十KB，可是现在打出来的包需要几百KB，一下子打了好多，别着急，这时候我们就可以用按需加载了，只需要加载我们需要做兼容性处理的部分就好了，我们需要下载一个 ```core-js```，webpack具体配置如下：\n\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n           /*\n            js兼容性处理：babel-loader @babel/core (需下载这两个)\n            1.基本兼容性处理 --> @babel/preset-env （下载）\n              问题：只能转换基本语法，如promise高级语法不能转换\n            2.全部兼容性处理 --> @babel/polyfill （下载）\n              问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~\n            3.需要做兼容性处理的就做：按需加载 --> corejs (下载core-js)\n\n           */\n          {\n              test: /\\.js$/,\n              exclude: /node_modules/,\n              loader: 'babel-loader', \n              options: {\n                  // 预设：指示babel做怎么样的兼容性处理\n                // presets: ['@babel/preset-env']\n                presets: [\n                    '@babel/preset-env',\n                    {\n                        // 按需加载\n                        useBuiltIns: 'usage',\n                        corejs: {\n                            version: 3\n                        },\n                        // 指定兼容性做到哪个版本的浏览器\n                        targets: {\n                            chrome: '60',\n                            firefox: '60',\n                            ie: '9',\n                            safari: '10',\n                            edge: '17'\n                        }\n                    }\n                ]\n              }\n          }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        })\n    ],\n    mode: 'development'\n}\n```\n现在我们再回过头来看我们的包，比之前打出来的包要小很多，所以，平时我们开发时推荐使用1，3方法，不推荐全部兼容处理。\n\n### 压缩js、html\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;js 的压缩很简单，只需要将```mode```设置为 ```production```即可，因为 webpack 会默认将生产环境的 js 代码进行压缩，而 html 的压缩需要在 webpack 中进行简单的配置一下即可。\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            // 压缩html\n            minify: {\n                // 移除空格\n                collapseWhitespace: true,\n                // 移除注释\n                removeComments: true\n            }\n        })\n    ],\n    // 生产环境下会自动压缩js代码\n    mode: 'production'\n}\n```\n### 开发环境的配置\n\n```js\nconst {resolve} = require('path')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\n// 定义nodejs的环境变量：绝决定使用browserslist的哪个环境\nprocess.env.NODE_ENV = 'production'\n\n// 复用loader\nconst commonCssLoader =  [\n    MiniCssExtractPlugin.loader,\n    'css-loader',\n    {\n        // 还需要在package.json中定义browserslist\n        loader: 'postcss-loader',\n        options: {\n            ident: 'postcss',\n            plugins: () => [\n                require('postcss-preset-env')()\n            ]\n        }\n    }\n]\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname,'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [...commonCssLoader]\n            },\n            {\n                test: /\\.less$/,\n                use: [\n                    ...commonCssLoader,\n                    'less-loader'\n                ]\n            },\n            // js语法检查\n            /* 正常来讲： 一个文件只能被一个Loader处理。\n               当一个文件要被多个loader处理，那么一定要指定loader的执行先后顺序：\n                  先执行eslint，再执行babel\n            */\n            {\n                // 在package.json中eslintConfig --> airbnb\n                test: /\\.js$/,\n                exclude: /node_module/,\n                // 优先执行\n                enforce: 'pre',\n                loader: 'eslint-loader',\n                options: {\n                    fix: true\n                }\n            },\n            // js兼容性处理\n            {\n                // 在package.json中eslintConfig --> airbnb\n                test: /\\.js$/,\n                exclude: /node_module/,\n                loader: 'babel-loader',\n                options: {\n                    presets: [\n                        '@babel/preset-env',\n                        {\n                            useBuiltIns: 'usage',\n                            corejs: {version: 3},\n                            targets: {\n                                chrome: '60',\n                                firefox: '50'\n                            }\n                        }\n                    ]\n                }\n            },\n            {\n                test: /\\.(gif|jpg|png)/,\n                loader: 'url-loader',\n                options: {\n                    limit: 8 * 1024,\n                    name: '[hash:10].[ext]',\n                    outputPath: 'imgs',\n                    esModule: false\n                }\n            },\n            // 解析html中的图片\n            {\n                test: /\\.html$/,\n                loader: 'html-loader'\n            },\n            // 其他所有的文件处理\n            {\n                exclude: /\\.(js|css|html|less|jpg|png|gif)/,\n                loader: 'file-loader',\n                options: {\n                    outputPath: 'media'\n                }\n            }\n        ]\n    },\n    plugins: [\n        new MiniCssExtractPlugin({\n            filename: 'css/built.css'\n        }),\n        // 压缩css\n        new OptimizeCssAssetsWebpackPlugin(),\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            minify: {\n                collapseWhitespace: true,\n                removeComments: true\n            }\n        })\n\n    ],\n    mode: 'production'\n}\n```","source":"_posts/webpack03.md","raw":"---\ntitle: webpack03\ndate: 2020-05-31 19:03:18\ntags: webpack\ncategories:\n- 前端构建工具\n---\n### eslint检查js\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果我们好多人开发一个项目，每个人有自己一套代码规范，这样会造成代码混乱，不宜维护。而 eslint 可以解决这个问题，让开发者使用同一套代码规范。\n\nwebpack.config.js\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n            /*\n                语法检查：eslint-loader eslint\n                注意：只检查自己写的源代码，第三方的库是不用检查的。\n                设置检查规则：\n                    package.json中eslintConfig中设置\n                        \"eslintConfig\":{\n                            \"extends\": \"airbnb-base\"\n                        }\n\n                    https://github.com/airbnb/javascript\n                    airbnb   -->  eslint-config-airbnb-base eslint eslint-plugin-import\n            */\n           {\n               test: /\\.js$/,\n               exclude: /node_modules/,\n               loader: 'eslint-loader',\n               options: {\n                   // 自动修复eslint的错误\n                   fix: true\n               }\n           }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        })\n    ],\n    mode: 'development'\n}\n```\n需要 ```npm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import```\n\npackage.json\n```json\n{\n  \"name\": \"webpack_code\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"css-loader\": \"^3.5.3\",\n    \"eslint\": \"^7.1.0\",\n    \"eslint-config-airbnb-base\": \"^14.1.0\",\n    \"eslint-loader\": \"^4.0.2\",\n    \"eslint-plugin-import\": \"^2.20.2\",\n    \"file-loader\": \"^6.0.0\",\n    \"html-loader\": \"^1.1.0\",\n    \"html-webpack-plugin\": \"^4.3.0\",\n    \"less\": \"^3.11.1\",\n    \"less-loader\": \"^6.1.0\",\n    \"mini-css-extract-plugin\": \"^0.9.0\",\n    \"optimize-css-assets-webpack-plugin\": \"^5.0.3\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.7.0\",\n    \"style-loader\": \"^1.2.1\",\n    \"url-loader\": \"^4.1.0\",\n    \"webpack\": \"^4.43.0\",\n    \"webpack-cli\": \"^3.3.11\",\n    \"webpack-dev-server\": \"^3.11.0\"\n  },\n  \"browserslist\": {\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ],\n    \"production\": [\n      \">0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ]\n  },\n  \"eslintConfig\":{\n    \"extends\": \"airbnb-base\"\n  }\n}\n```\n接下来我们可以试验一下，在 js 中写一些不规范的代码\n\nindex.js\n```js\nfunction add(a, b){\n  return a+b;\n}\nconsole.log(add(2,3))\n```\n之后运行webpack，我们再来看一下 index.js 文件\n\n```js\nfunction add(a, b) {\n  return a + b;\n}\nconsole.log(add(2, 3));\n```\n所有的代码都规范了，但是，在控制台有一个警告，建议我们不要在这里写 console.log\n![](./webpack03/warn.png)\n\n我们再来修改一下这个 index.js 文件吧\n\n```js\nfunction add(a, b) {\n  return a + b;\n}\n\n// 下一行eslint所有规则都失效（下一行不进行eslint检查）\n// eslint-disable-next-line\nconsole.log(add(2, 3));\n```\n\n现在再运行 webpack 就不会有任何警告了\n\n### babel处理js兼容性\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;当我们使用 ES6 语法来写代码时，我们在谷歌浏览器打开完全没有问题，但是使用IE打开就会报错，比如箭头函数，在IE下是不识别的，这时我们就需要用到 babel 了，来将 ES6 甚至更高级的语法转换成浏览器识别的语法。我们需要下载 ```babel-loader``` ```@babel/core``` ```@babel/preset-env```\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在 webpack 中，按照以上的方法处理后，确实 IE 能识别像箭头函数这样的语法了，但是像更高级的语法 promise 却还是无法识别，这时我们需要做全部兼容性处理，用到 ```@babel/polyfill``` ，下载完成后，只需在代码中用 ```import '@babel/polyfill'```引入即可，我们再打开浏览器看一下，确实可以识别了 promise。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然现在所有的语法都识别了，但现在还是有一个弊端，之前我们打的包可能也就几十KB，可是现在打出来的包需要几百KB，一下子打了好多，别着急，这时候我们就可以用按需加载了，只需要加载我们需要做兼容性处理的部分就好了，我们需要下载一个 ```core-js```，webpack具体配置如下：\n\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    module: {\n        rules: [\n           /*\n            js兼容性处理：babel-loader @babel/core (需下载这两个)\n            1.基本兼容性处理 --> @babel/preset-env （下载）\n              问题：只能转换基本语法，如promise高级语法不能转换\n            2.全部兼容性处理 --> @babel/polyfill （下载）\n              问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~\n            3.需要做兼容性处理的就做：按需加载 --> corejs (下载core-js)\n\n           */\n          {\n              test: /\\.js$/,\n              exclude: /node_modules/,\n              loader: 'babel-loader', \n              options: {\n                  // 预设：指示babel做怎么样的兼容性处理\n                // presets: ['@babel/preset-env']\n                presets: [\n                    '@babel/preset-env',\n                    {\n                        // 按需加载\n                        useBuiltIns: 'usage',\n                        corejs: {\n                            version: 3\n                        },\n                        // 指定兼容性做到哪个版本的浏览器\n                        targets: {\n                            chrome: '60',\n                            firefox: '60',\n                            ie: '9',\n                            safari: '10',\n                            edge: '17'\n                        }\n                    }\n                ]\n              }\n          }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html'\n        })\n    ],\n    mode: 'development'\n}\n```\n现在我们再回过头来看我们的包，比之前打出来的包要小很多，所以，平时我们开发时推荐使用1，3方法，不推荐全部兼容处理。\n\n### 压缩js、html\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;js 的压缩很简单，只需要将```mode```设置为 ```production```即可，因为 webpack 会默认将生产环境的 js 代码进行压缩，而 html 的压缩需要在 webpack 中进行简单的配置一下即可。\n```js\nconst { resolve } = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname, 'build')\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            // 压缩html\n            minify: {\n                // 移除空格\n                collapseWhitespace: true,\n                // 移除注释\n                removeComments: true\n            }\n        })\n    ],\n    // 生产环境下会自动压缩js代码\n    mode: 'production'\n}\n```\n### 开发环境的配置\n\n```js\nconst {resolve} = require('path')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\n// 定义nodejs的环境变量：绝决定使用browserslist的哪个环境\nprocess.env.NODE_ENV = 'production'\n\n// 复用loader\nconst commonCssLoader =  [\n    MiniCssExtractPlugin.loader,\n    'css-loader',\n    {\n        // 还需要在package.json中定义browserslist\n        loader: 'postcss-loader',\n        options: {\n            ident: 'postcss',\n            plugins: () => [\n                require('postcss-preset-env')()\n            ]\n        }\n    }\n]\n\nmodule.exports = {\n    entry: './src/js/index.js',\n    output: {\n        filename: 'js/built.js',\n        path: resolve(__dirname,'build')\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.css$/,\n                use: [...commonCssLoader]\n            },\n            {\n                test: /\\.less$/,\n                use: [\n                    ...commonCssLoader,\n                    'less-loader'\n                ]\n            },\n            // js语法检查\n            /* 正常来讲： 一个文件只能被一个Loader处理。\n               当一个文件要被多个loader处理，那么一定要指定loader的执行先后顺序：\n                  先执行eslint，再执行babel\n            */\n            {\n                // 在package.json中eslintConfig --> airbnb\n                test: /\\.js$/,\n                exclude: /node_module/,\n                // 优先执行\n                enforce: 'pre',\n                loader: 'eslint-loader',\n                options: {\n                    fix: true\n                }\n            },\n            // js兼容性处理\n            {\n                // 在package.json中eslintConfig --> airbnb\n                test: /\\.js$/,\n                exclude: /node_module/,\n                loader: 'babel-loader',\n                options: {\n                    presets: [\n                        '@babel/preset-env',\n                        {\n                            useBuiltIns: 'usage',\n                            corejs: {version: 3},\n                            targets: {\n                                chrome: '60',\n                                firefox: '50'\n                            }\n                        }\n                    ]\n                }\n            },\n            {\n                test: /\\.(gif|jpg|png)/,\n                loader: 'url-loader',\n                options: {\n                    limit: 8 * 1024,\n                    name: '[hash:10].[ext]',\n                    outputPath: 'imgs',\n                    esModule: false\n                }\n            },\n            // 解析html中的图片\n            {\n                test: /\\.html$/,\n                loader: 'html-loader'\n            },\n            // 其他所有的文件处理\n            {\n                exclude: /\\.(js|css|html|less|jpg|png|gif)/,\n                loader: 'file-loader',\n                options: {\n                    outputPath: 'media'\n                }\n            }\n        ]\n    },\n    plugins: [\n        new MiniCssExtractPlugin({\n            filename: 'css/built.css'\n        }),\n        // 压缩css\n        new OptimizeCssAssetsWebpackPlugin(),\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            minify: {\n                collapseWhitespace: true,\n                removeComments: true\n            }\n        })\n\n    ],\n    mode: 'production'\n}\n```","slug":"webpack03","published":1,"updated":"2020-06-08T15:09:51.463Z","_id":"ckb59sj6j0000piubfvaf5jcc","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"eslint检查js\"><a href=\"#eslint检查js\" class=\"headerlink\" title=\"eslint检查js\"></a>eslint检查js</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果我们好多人开发一个项目，每个人有自己一套代码规范，这样会造成代码混乱，不宜维护。而 eslint 可以解决这个问题，让开发者使用同一套代码规范。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">                语法检查：eslint-loader eslint</span><br><span class=\"hljs-comment\">                注意：只检查自己写的源代码，第三方的库是不用检查的。</span><br><span class=\"hljs-comment\">                设置检查规则：</span><br><span class=\"hljs-comment\">                    package.json中eslintConfig中设置</span><br><span class=\"hljs-comment\">                        \"eslintConfig\":&#123;</span><br><span class=\"hljs-comment\">                            \"extends\": \"airbnb-base\"</span><br><span class=\"hljs-comment\">                        &#125;</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                    https://github.com/airbnb/javascript</span><br><span class=\"hljs-comment\">                    airbnb   --&gt;  eslint-config-airbnb-base eslint eslint-plugin-import</span><br><span class=\"hljs-comment\">            */</span><br>           &#123;<br>               test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>               exclude: <span class=\"hljs-regexp\">/node_modules/</span>,<br>               loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>               options: &#123;<br>                   <span class=\"hljs-comment\">// 自动修复eslint的错误</span><br>                   fix: <span class=\"hljs-literal\">true</span><br>               &#125;<br>           &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>需要 <code>npm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import</code></p>\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"webpack_code\"</span>,<br>  <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,<br>  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"index.js\"</span>,<br>  <span class=\"hljs-attr\">\"scripts\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"author\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"ISC\"</span>,<br>  <span class=\"hljs-attr\">\"devDependencies\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"css-loader\"</span>: <span class=\"hljs-string\">\"^3.5.3\"</span>,<br>    <span class=\"hljs-attr\">\"eslint\"</span>: <span class=\"hljs-string\">\"^7.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-config-airbnb-base\"</span>: <span class=\"hljs-string\">\"^14.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-loader\"</span>: <span class=\"hljs-string\">\"^4.0.2\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-plugin-import\"</span>: <span class=\"hljs-string\">\"^2.20.2\"</span>,<br>    <span class=\"hljs-attr\">\"file-loader\"</span>: <span class=\"hljs-string\">\"^6.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-loader\"</span>: <span class=\"hljs-string\">\"^1.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^4.3.0\"</span>,<br>    <span class=\"hljs-attr\">\"less\"</span>: <span class=\"hljs-string\">\"^3.11.1\"</span>,<br>    <span class=\"hljs-attr\">\"less-loader\"</span>: <span class=\"hljs-string\">\"^6.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"mini-css-extract-plugin\"</span>: <span class=\"hljs-string\">\"^0.9.0\"</span>,<br>    <span class=\"hljs-attr\">\"optimize-css-assets-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^5.0.3\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-loader\"</span>: <span class=\"hljs-string\">\"^3.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-preset-env\"</span>: <span class=\"hljs-string\">\"^6.7.0\"</span>,<br>    <span class=\"hljs-attr\">\"style-loader\"</span>: <span class=\"hljs-string\">\"^1.2.1\"</span>,<br>    <span class=\"hljs-attr\">\"url-loader\"</span>: <span class=\"hljs-string\">\"^4.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack\"</span>: <span class=\"hljs-string\">\"^4.43.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-cli\"</span>: <span class=\"hljs-string\">\"^3.3.11\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-dev-server\"</span>: <span class=\"hljs-string\">\"^3.11.0\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"browserslist\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"development\"</span>: [<br>      <span class=\"hljs-string\">\"last 1 chrome version\"</span>,<br>      <span class=\"hljs-string\">\"last 1 firefox version\"</span>,<br>      <span class=\"hljs-string\">\"last 1 safari version\"</span><br>    ],<br>    <span class=\"hljs-attr\">\"production\"</span>: [<br>      <span class=\"hljs-string\">\"&gt;0.2%\"</span>,<br>      <span class=\"hljs-string\">\"not dead\"</span>,<br>      <span class=\"hljs-string\">\"not op_mini all\"</span><br>    ]<br>  &#125;,<br>  <span class=\"hljs-attr\">\"eslintConfig\"</span>:&#123;<br>    <span class=\"hljs-attr\">\"extends\"</span>: <span class=\"hljs-string\">\"airbnb-base\"</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>接下来我们可以试验一下，在 js 中写一些不规范的代码</p>\n<p>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>)</span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a+b;<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>))<br></code></pre></td></tr></table></figure>\n<p>之后运行webpack，我们再来看一下 index.js 文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a + b;<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>));<br></code></pre></td></tr></table></figure>\n<p>所有的代码都规范了，但是，在控制台有一个警告，建议我们不要在这里写 console.log</p>\n<img src=\"/blog/2020/05/31/webpack03/warn.png\" class=\"\">\n\n<p>我们再来修改一下这个 index.js 文件吧</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a + b;<br>&#125;<br><br><span class=\"hljs-comment\">// 下一行eslint所有规则都失效（下一行不进行eslint检查）</span><br><span class=\"hljs-comment\">// eslint-disable-next-line</span><br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>));<br></code></pre></td></tr></table></figure>\n\n<p>现在再运行 webpack 就不会有任何警告了</p>\n<h3 id=\"babel处理js兼容性\"><a href=\"#babel处理js兼容性\" class=\"headerlink\" title=\"babel处理js兼容性\"></a>babel处理js兼容性</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;当我们使用 ES6 语法来写代码时，我们在谷歌浏览器打开完全没有问题，但是使用IE打开就会报错，比如箭头函数，在IE下是不识别的，这时我们就需要用到 babel 了，来将 ES6 甚至更高级的语法转换成浏览器识别的语法。我们需要下载 <code>babel-loader</code> <code>@babel/core</code> <code>@babel/preset-env</code></p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在 webpack 中，按照以上的方法处理后，确实 IE 能识别像箭头函数这样的语法了，但是像更高级的语法 promise 却还是无法识别，这时我们需要做全部兼容性处理，用到 <code>@babel/polyfill</code> ，下载完成后，只需在代码中用 <code>import &#39;@babel/polyfill&#39;</code>引入即可，我们再打开浏览器看一下，确实可以识别了 promise。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然现在所有的语法都识别了，但现在还是有一个弊端，之前我们打的包可能也就几十KB，可是现在打出来的包需要几百KB，一下子打了好多，别着急，这时候我们就可以用按需加载了，只需要加载我们需要做兼容性处理的部分就好了，我们需要下载一个 <code>core-js</code>，webpack具体配置如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>           <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">            js兼容性处理：babel-loader @babel/core (需下载这两个)</span><br><span class=\"hljs-comment\">            1.基本兼容性处理 --&gt; @babel/preset-env （下载）</span><br><span class=\"hljs-comment\">              问题：只能转换基本语法，如promise高级语法不能转换</span><br><span class=\"hljs-comment\">            2.全部兼容性处理 --&gt; @babel/polyfill （下载）</span><br><span class=\"hljs-comment\">              问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span><br><span class=\"hljs-comment\">            3.需要做兼容性处理的就做：按需加载 --&gt; corejs (下载core-js)</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">           */</span><br>          &#123;<br>              test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>              exclude: <span class=\"hljs-regexp\">/node_modules/</span>,<br>              loader: <span class=\"hljs-string\">'babel-loader'</span>, <br>              options: &#123;<br>                  <span class=\"hljs-comment\">// 预设：指示babel做怎么样的兼容性处理</span><br>                <span class=\"hljs-comment\">// presets: ['@babel/preset-env']</span><br>                presets: [<br>                    <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                    &#123;<br>                        <span class=\"hljs-comment\">// 按需加载</span><br>                        useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                        corejs: &#123;<br>                            version: <span class=\"hljs-number\">3</span><br>                        &#125;,<br>                        <span class=\"hljs-comment\">// 指定兼容性做到哪个版本的浏览器</span><br>                        targets: &#123;<br>                            chrome: <span class=\"hljs-string\">'60'</span>,<br>                            firefox: <span class=\"hljs-string\">'60'</span>,<br>                            ie: <span class=\"hljs-string\">'9'</span>,<br>                            safari: <span class=\"hljs-string\">'10'</span>,<br>                            edge: <span class=\"hljs-string\">'17'</span><br>                        &#125;<br>                    &#125;<br>                ]<br>              &#125;<br>          &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>现在我们再回过头来看我们的包，比之前打出来的包要小很多，所以，平时我们开发时推荐使用1，3方法，不推荐全部兼容处理。</p>\n<h3 id=\"压缩js、html\"><a href=\"#压缩js、html\" class=\"headerlink\" title=\"压缩js、html\"></a>压缩js、html</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;js 的压缩很简单，只需要将<code>mode</code>设置为 <code>production</code>即可，因为 webpack 会默认将生产环境的 js 代码进行压缩，而 html 的压缩需要在 webpack 中进行简单的配置一下即可。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            <span class=\"hljs-comment\">// 压缩html</span><br>            minify: &#123;<br>                <span class=\"hljs-comment\">// 移除空格</span><br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                <span class=\"hljs-comment\">// 移除注释</span><br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br>    ],<br>    <span class=\"hljs-comment\">// 生产环境下会自动压缩js代码</span><br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"开发环境的配置\"><a href=\"#开发环境的配置\" class=\"headerlink\" title=\"开发环境的配置\"></a>开发环境的配置</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> MiniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-comment\">// 定义nodejs的环境变量：绝决定使用browserslist的哪个环境</span><br>process.env.NODE_ENV = <span class=\"hljs-string\">'production'</span><br><br><span class=\"hljs-comment\">// 复用loader</span><br><span class=\"hljs-keyword\">const</span> commonCssLoader =  [<br>    MiniCssExtractPlugin.loader,<br>    <span class=\"hljs-string\">'css-loader'</span>,<br>    &#123;<br>        <span class=\"hljs-comment\">// 还需要在package.json中定义browserslist</span><br>        loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>        options: &#123;<br>            ident: <span class=\"hljs-string\">'postcss'</span>,<br>            plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> [<br>                <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>            ]<br>        &#125;<br>    &#125;<br>]<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [...commonCssLoader]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<br>                    ...commonCssLoader,<br>                    <span class=\"hljs-string\">'less-loader'</span><br>                ]<br>            &#125;,<br>            <span class=\"hljs-comment\">// js语法检查</span><br>            <span class=\"hljs-comment\">/* 正常来讲： 一个文件只能被一个Loader处理。</span><br><span class=\"hljs-comment\">               当一个文件要被多个loader处理，那么一定要指定loader的执行先后顺序：</span><br><span class=\"hljs-comment\">                  先执行eslint，再执行babel</span><br><span class=\"hljs-comment\">            */</span><br>            &#123;<br>                <span class=\"hljs-comment\">// 在package.json中eslintConfig --&gt; airbnb</span><br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                <span class=\"hljs-comment\">// 优先执行</span><br>                enforce: <span class=\"hljs-string\">'pre'</span>,<br>                loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>                options: &#123;<br>                    fix: <span class=\"hljs-literal\">true</span><br>                &#125;<br>            &#125;,<br>            <span class=\"hljs-comment\">// js兼容性处理</span><br>            &#123;<br>                <span class=\"hljs-comment\">// 在package.json中eslintConfig --&gt; airbnb</span><br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                loader: <span class=\"hljs-string\">'babel-loader'</span>,<br>                options: &#123;<br>                    presets: [<br>                        <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                        &#123;<br>                            useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                            corejs: &#123;<span class=\"hljs-attr\">version</span>: <span class=\"hljs-number\">3</span>&#125;,<br>                            targets: &#123;<br>                                chrome: <span class=\"hljs-string\">'60'</span>,<br>                                firefox: <span class=\"hljs-string\">'50'</span><br>                            &#125;<br>                        &#125;<br>                    ]<br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(gif|jpg|png)/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                    limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'imgs'</span>,<br>                    esModule: <span class=\"hljs-literal\">false</span><br>                &#125;<br>            &#125;,<br>            <span class=\"hljs-comment\">// 解析html中的图片</span><br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;,<br>            <span class=\"hljs-comment\">// 其他所有的文件处理</span><br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(js|css|html|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                    outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> MiniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-comment\">// 压缩css</span><br>        <span class=\"hljs-keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            minify: &#123;<br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br><br>    ],<br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"eslint检查js\"><a href=\"#eslint检查js\" class=\"headerlink\" title=\"eslint检查js\"></a>eslint检查js</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;如果我们好多人开发一个项目，每个人有自己一套代码规范，这样会造成代码混乱，不宜维护。而 eslint 可以解决这个问题，让开发者使用同一套代码规范。</p>\n<p>webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">                语法检查：eslint-loader eslint</span><br><span class=\"hljs-comment\">                注意：只检查自己写的源代码，第三方的库是不用检查的。</span><br><span class=\"hljs-comment\">                设置检查规则：</span><br><span class=\"hljs-comment\">                    package.json中eslintConfig中设置</span><br><span class=\"hljs-comment\">                        \"eslintConfig\":&#123;</span><br><span class=\"hljs-comment\">                            \"extends\": \"airbnb-base\"</span><br><span class=\"hljs-comment\">                        &#125;</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">                    https://github.com/airbnb/javascript</span><br><span class=\"hljs-comment\">                    airbnb   --&gt;  eslint-config-airbnb-base eslint eslint-plugin-import</span><br><span class=\"hljs-comment\">            */</span><br>           &#123;<br>               test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>               exclude: <span class=\"hljs-regexp\">/node_modules/</span>,<br>               loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>               options: &#123;<br>                   <span class=\"hljs-comment\">// 自动修复eslint的错误</span><br>                   fix: <span class=\"hljs-literal\">true</span><br>               &#125;<br>           &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>需要 <code>npm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import</code></p>\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"webpack_code\"</span>,<br>  <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,<br>  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"index.js\"</span>,<br>  <span class=\"hljs-attr\">\"scripts\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"author\"</span>: <span class=\"hljs-string\">\"\"</span>,<br>  <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"ISC\"</span>,<br>  <span class=\"hljs-attr\">\"devDependencies\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"css-loader\"</span>: <span class=\"hljs-string\">\"^3.5.3\"</span>,<br>    <span class=\"hljs-attr\">\"eslint\"</span>: <span class=\"hljs-string\">\"^7.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-config-airbnb-base\"</span>: <span class=\"hljs-string\">\"^14.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-loader\"</span>: <span class=\"hljs-string\">\"^4.0.2\"</span>,<br>    <span class=\"hljs-attr\">\"eslint-plugin-import\"</span>: <span class=\"hljs-string\">\"^2.20.2\"</span>,<br>    <span class=\"hljs-attr\">\"file-loader\"</span>: <span class=\"hljs-string\">\"^6.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-loader\"</span>: <span class=\"hljs-string\">\"^1.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"html-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^4.3.0\"</span>,<br>    <span class=\"hljs-attr\">\"less\"</span>: <span class=\"hljs-string\">\"^3.11.1\"</span>,<br>    <span class=\"hljs-attr\">\"less-loader\"</span>: <span class=\"hljs-string\">\"^6.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"mini-css-extract-plugin\"</span>: <span class=\"hljs-string\">\"^0.9.0\"</span>,<br>    <span class=\"hljs-attr\">\"optimize-css-assets-webpack-plugin\"</span>: <span class=\"hljs-string\">\"^5.0.3\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-loader\"</span>: <span class=\"hljs-string\">\"^3.0.0\"</span>,<br>    <span class=\"hljs-attr\">\"postcss-preset-env\"</span>: <span class=\"hljs-string\">\"^6.7.0\"</span>,<br>    <span class=\"hljs-attr\">\"style-loader\"</span>: <span class=\"hljs-string\">\"^1.2.1\"</span>,<br>    <span class=\"hljs-attr\">\"url-loader\"</span>: <span class=\"hljs-string\">\"^4.1.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack\"</span>: <span class=\"hljs-string\">\"^4.43.0\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-cli\"</span>: <span class=\"hljs-string\">\"^3.3.11\"</span>,<br>    <span class=\"hljs-attr\">\"webpack-dev-server\"</span>: <span class=\"hljs-string\">\"^3.11.0\"</span><br>  &#125;,<br>  <span class=\"hljs-attr\">\"browserslist\"</span>: &#123;<br>    <span class=\"hljs-attr\">\"development\"</span>: [<br>      <span class=\"hljs-string\">\"last 1 chrome version\"</span>,<br>      <span class=\"hljs-string\">\"last 1 firefox version\"</span>,<br>      <span class=\"hljs-string\">\"last 1 safari version\"</span><br>    ],<br>    <span class=\"hljs-attr\">\"production\"</span>: [<br>      <span class=\"hljs-string\">\"&gt;0.2%\"</span>,<br>      <span class=\"hljs-string\">\"not dead\"</span>,<br>      <span class=\"hljs-string\">\"not op_mini all\"</span><br>    ]<br>  &#125;,<br>  <span class=\"hljs-attr\">\"eslintConfig\"</span>:&#123;<br>    <span class=\"hljs-attr\">\"extends\"</span>: <span class=\"hljs-string\">\"airbnb-base\"</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>接下来我们可以试验一下，在 js 中写一些不规范的代码</p>\n<p>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>)</span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a+b;<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>))<br></code></pre></td></tr></table></figure>\n<p>之后运行webpack，我们再来看一下 index.js 文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a + b;<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>));<br></code></pre></td></tr></table></figure>\n<p>所有的代码都规范了，但是，在控制台有一个警告，建议我们不要在这里写 console.log</p>\n<img src=\"/blog/2020/05/31/webpack03/warn.png\" class=\"\">\n\n<p>我们再来修改一下这个 index.js 文件吧</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">a, b</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">return</span> a + b;<br>&#125;<br><br><span class=\"hljs-comment\">// 下一行eslint所有规则都失效（下一行不进行eslint检查）</span><br><span class=\"hljs-comment\">// eslint-disable-next-line</span><br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>));<br></code></pre></td></tr></table></figure>\n\n<p>现在再运行 webpack 就不会有任何警告了</p>\n<h3 id=\"babel处理js兼容性\"><a href=\"#babel处理js兼容性\" class=\"headerlink\" title=\"babel处理js兼容性\"></a>babel处理js兼容性</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;当我们使用 ES6 语法来写代码时，我们在谷歌浏览器打开完全没有问题，但是使用IE打开就会报错，比如箭头函数，在IE下是不识别的，这时我们就需要用到 babel 了，来将 ES6 甚至更高级的语法转换成浏览器识别的语法。我们需要下载 <code>babel-loader</code> <code>@babel/core</code> <code>@babel/preset-env</code></p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;在 webpack 中，按照以上的方法处理后，确实 IE 能识别像箭头函数这样的语法了，但是像更高级的语法 promise 却还是无法识别，这时我们需要做全部兼容性处理，用到 <code>@babel/polyfill</code> ，下载完成后，只需在代码中用 <code>import &#39;@babel/polyfill&#39;</code>引入即可，我们再打开浏览器看一下，确实可以识别了 promise。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;虽然现在所有的语法都识别了，但现在还是有一个弊端，之前我们打的包可能也就几十KB，可是现在打出来的包需要几百KB，一下子打了好多，别着急，这时候我们就可以用按需加载了，只需要加载我们需要做兼容性处理的部分就好了，我们需要下载一个 <code>core-js</code>，webpack具体配置如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>           <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">            js兼容性处理：babel-loader @babel/core (需下载这两个)</span><br><span class=\"hljs-comment\">            1.基本兼容性处理 --&gt; @babel/preset-env （下载）</span><br><span class=\"hljs-comment\">              问题：只能转换基本语法，如promise高级语法不能转换</span><br><span class=\"hljs-comment\">            2.全部兼容性处理 --&gt; @babel/polyfill （下载）</span><br><span class=\"hljs-comment\">              问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span><br><span class=\"hljs-comment\">            3.需要做兼容性处理的就做：按需加载 --&gt; corejs (下载core-js)</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">           */</span><br>          &#123;<br>              test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>              exclude: <span class=\"hljs-regexp\">/node_modules/</span>,<br>              loader: <span class=\"hljs-string\">'babel-loader'</span>, <br>              options: &#123;<br>                  <span class=\"hljs-comment\">// 预设：指示babel做怎么样的兼容性处理</span><br>                <span class=\"hljs-comment\">// presets: ['@babel/preset-env']</span><br>                presets: [<br>                    <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                    &#123;<br>                        <span class=\"hljs-comment\">// 按需加载</span><br>                        useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                        corejs: &#123;<br>                            version: <span class=\"hljs-number\">3</span><br>                        &#125;,<br>                        <span class=\"hljs-comment\">// 指定兼容性做到哪个版本的浏览器</span><br>                        targets: &#123;<br>                            chrome: <span class=\"hljs-string\">'60'</span>,<br>                            firefox: <span class=\"hljs-string\">'60'</span>,<br>                            ie: <span class=\"hljs-string\">'9'</span>,<br>                            safari: <span class=\"hljs-string\">'10'</span>,<br>                            edge: <span class=\"hljs-string\">'17'</span><br>                        &#125;<br>                    &#125;<br>                ]<br>              &#125;<br>          &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>现在我们再回过头来看我们的包，比之前打出来的包要小很多，所以，平时我们开发时推荐使用1，3方法，不推荐全部兼容处理。</p>\n<h3 id=\"压缩js、html\"><a href=\"#压缩js、html\" class=\"headerlink\" title=\"压缩js、html\"></a>压缩js、html</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;js 的压缩很简单，只需要将<code>mode</code>设置为 <code>production</code>即可，因为 webpack 会默认将生产环境的 js 代码进行压缩，而 html 的压缩需要在 webpack 中进行简单的配置一下即可。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname, <span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            <span class=\"hljs-comment\">// 压缩html</span><br>            minify: &#123;<br>                <span class=\"hljs-comment\">// 移除空格</span><br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                <span class=\"hljs-comment\">// 移除注释</span><br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br>    ],<br>    <span class=\"hljs-comment\">// 生产环境下会自动压缩js代码</span><br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"开发环境的配置\"><a href=\"#开发环境的配置\" class=\"headerlink\" title=\"开发环境的配置\"></a>开发环境的配置</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> MiniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-comment\">// 定义nodejs的环境变量：绝决定使用browserslist的哪个环境</span><br>process.env.NODE_ENV = <span class=\"hljs-string\">'production'</span><br><br><span class=\"hljs-comment\">// 复用loader</span><br><span class=\"hljs-keyword\">const</span> commonCssLoader =  [<br>    MiniCssExtractPlugin.loader,<br>    <span class=\"hljs-string\">'css-loader'</span>,<br>    &#123;<br>        <span class=\"hljs-comment\">// 还需要在package.json中定义browserslist</span><br>        loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>        options: &#123;<br>            ident: <span class=\"hljs-string\">'postcss'</span>,<br>            plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> [<br>                <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>            ]<br>        &#125;<br>    &#125;<br>]<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [...commonCssLoader]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<br>                    ...commonCssLoader,<br>                    <span class=\"hljs-string\">'less-loader'</span><br>                ]<br>            &#125;,<br>            <span class=\"hljs-comment\">// js语法检查</span><br>            <span class=\"hljs-comment\">/* 正常来讲： 一个文件只能被一个Loader处理。</span><br><span class=\"hljs-comment\">               当一个文件要被多个loader处理，那么一定要指定loader的执行先后顺序：</span><br><span class=\"hljs-comment\">                  先执行eslint，再执行babel</span><br><span class=\"hljs-comment\">            */</span><br>            &#123;<br>                <span class=\"hljs-comment\">// 在package.json中eslintConfig --&gt; airbnb</span><br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                <span class=\"hljs-comment\">// 优先执行</span><br>                enforce: <span class=\"hljs-string\">'pre'</span>,<br>                loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>                options: &#123;<br>                    fix: <span class=\"hljs-literal\">true</span><br>                &#125;<br>            &#125;,<br>            <span class=\"hljs-comment\">// js兼容性处理</span><br>            &#123;<br>                <span class=\"hljs-comment\">// 在package.json中eslintConfig --&gt; airbnb</span><br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                loader: <span class=\"hljs-string\">'babel-loader'</span>,<br>                options: &#123;<br>                    presets: [<br>                        <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                        &#123;<br>                            useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                            corejs: &#123;<span class=\"hljs-attr\">version</span>: <span class=\"hljs-number\">3</span>&#125;,<br>                            targets: &#123;<br>                                chrome: <span class=\"hljs-string\">'60'</span>,<br>                                firefox: <span class=\"hljs-string\">'50'</span><br>                            &#125;<br>                        &#125;<br>                    ]<br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(gif|jpg|png)/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                    limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'imgs'</span>,<br>                    esModule: <span class=\"hljs-literal\">false</span><br>                &#125;<br>            &#125;,<br>            <span class=\"hljs-comment\">// 解析html中的图片</span><br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;,<br>            <span class=\"hljs-comment\">// 其他所有的文件处理</span><br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(js|css|html|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                    outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> MiniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-comment\">// 压缩css</span><br>        <span class=\"hljs-keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            minify: &#123;<br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br><br>    ],<br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure>"},{"title":"webpack04","date":"2020-06-07T17:43:01.000Z","_content":"### webpack开发环境的性能优化\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;开发环境下的优化可以分为两方面：优化开发环境下打包构建速度、优化代码调试。\n\n- 优化打包构建速度（HMR）\n\n    HMR 即 hot module replacement 热模块替换 / 模块热替换，它的作用是，一个模块发生变化，只会重新打包这一个模块，而不是打包所有模块，可以极大的提升构建速度。只需要在 devServer 中配置 ``` hot: true```即可。\n\n    对于css 来说，style-loader 已经内部实现了这一个功能；而 js 是默认不能使用 HMR 这个功能的，需要修改 js 代码，添加支持HMR功能的代码，但是要注意的是，HMR 对于 js 来说只能处理非入口 js 文件的其他文件；html 也是默认不能使用 HMR 这个功能，但是 html 也不需要做这个功能，因为我们只有一个 index.html文件，所以一旦更新了，势必要所有的模块都要重新打包，但是 HMR 会导致另一个问题，就是 html 不能热更新了，想要解决这个问题就要修改我们的入口，将html文件引入。\n\n    webpack配置\n    ```js\n    /*\n    HMR：hot module replacement 热模块替换 / 模块热替换\n        作用：一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块）\n        极大提升构建速度\n\n        样式文件：可以使用HMR功能，因为style-loader内部实现了\n        js文件：默认不能使用HMR功能 --> 需要修改js代码，添加支持HMR功能的代码\n        注意：HMR功能对于js来说只能处理非入口js文件的其他文件\n        html文件：默认不能使用HMR功能。同时会导致问题：html文件不能热更新了(不需要做HMR功能)\n        解决：修改entry入口，将Html文件引入\n    */\n\n\n    const { resolve } = require('path')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    module.exports = {\n        entry: ['./src/js/index.js', './src/index.html'],\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.css$/,\n                    use: ['style-loader','css-loader']\n                },\n                {\n                    test: /\\.less$/,\n                    use: ['style-loader','css-loader','less-loader']\n                },\n                {\n                    test: /\\.(jpg|png|gif)$/,\n                    loader: 'url-loader',\n                    options: {\n                        limit: 8 * 1024,\n                        esModule: false,\n                        name: '[hash:10].[ext]',\n                        outputPath: 'imgs'\n                    }\n                },\n                {\n                    exclude: /\\.(html|js|css|less|jpg|png|gif)/,\n                    loader: 'file-loader',\n                    options: {\n                        name: '[hash:10].[ext]',\n                        outputPath: 'media'\n                    }\n                },\n                {\n                    test: /\\.html$/,\n                    loader: 'html-loader'\n                }\n            ]\n        },\n        plugins: [\n            new HtmlWebpackPlugin({\n                template: \"./src/index.html\"\n            })\n        ],\n        mode: 'development',\n        devServer: {\n            contentBase: resolve(__dirname,'build'),\n            compress: true,\n            port: 3000,\n            open: true,\n            // 开启HMR功能\n            // 当修改了webpack配置，新配置要想生效，必须重启webpack服务\n            hot: true\n        }\n    }\n    ```\n    index.js中的代码\n    ```js\n        import '../css/iconfont.css'\n        import '../css/index.less'\n        import print from './print'\n\n        console.log('js被重新加载了')\n\n        print()\n\n        function add(x,y){\n            return x+y\n        }\n        console.log(add(1,2))\n\n        if(module.hot){\n            // 一旦module.hot为true,说明开启了HMR功能 --> 让HMR工能生效\n            module.hot.accept('./print.js', function(){\n                // 方法会监听print.js文件的变化，一旦发生变化，其他模块不会重新打包构建，\n                // 会执行后面的回调函数\n                print()\n            })\n        }\n    ```\n\n- source-map\n\n    source-map 一种提供源代码到构建后代码映射技术（如果构建后代码出错了，通过映射可以追踪源代码错误），它的组合方式为``` [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map```，在 devtool 中设置即可\n    ```js\n    const { resolve } = require('path')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    module.exports = {\n        entry: ['./src/js/index.js', './src/index.html'],\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.css$/,\n                    use: ['style-loader','css-loader']\n                },\n                {\n                    test: /\\.less$/,\n                    use: ['style-loader','css-loader','less-loader']\n                },\n                {\n                    test: /\\.(jpg|png|gif)$/,\n                    loader: 'url-loader',\n                    options: {\n                    limit: 8 * 1024,\n                    esModule: false,\n                    name: '[hash:10].[ext]',\n                    outputPath: 'imgs'\n                    }\n                },\n                {\n                    exclude: /\\.(html|js|css|less|jpg|png|gif)/,\n                    loader: 'file-loader',\n                    options: {\n                    name: '[hash:10].[ext]',\n                    outputPath: 'media'\n                    }\n                },\n                {\n                    test: /\\.html$/,\n                    loader: 'html-loader'\n                }\n            ]\n        },\n        plugins: [\n            new HtmlWebpackPlugin({\n                template: \"./src/index.html\"\n            })\n        ],\n        mode: 'development',\n        devServer: {\n            contentBase: resolve(__dirname,'build'),\n            compress: true,\n            port: 3000,\n            open: true,\n            hot: true\n        },\n        devtool: 'inline-source-map'\n    }\n    /*\n    source-map: 一种提供源代码到构建后代码映射技术(如果构建后代码出错了，通过映射可以追踪源代码错误)\n\n    [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map\n    \n    source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n    inline-source-map：内联\n        只生成一个内联source-map\n        错误代码的准确信息 和 源代码的错误位置\n    hidden-source-map：外部\n        错误代码错误原因，但是没有错误位置\n        不能追踪源代码错误，只能提示到构建后代码的错误位置\n    eval-source-map：内联\n        每一个文件都生成对应的source-map，都在eval\n        错误代码的准确信息 和 源代码的错误位置\n    nosources-source-map：外部\n        错误代码的准确信息，但是没有任何源代码信息\n    cheap-source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n        只能精确到行\n    cheap-module-source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n        module会将loader的source map加入\n\n    内联和外部的区别：1.外部生成了文件，内联没有。2.内联构建速度更快\n\n    开发环境：速度快，调试更友好\n        速度快（eval>inline>cheap>...）\n        eval-cheap-source-map\n        eval-source-map\n        调试更友好\n        source-map\n        cheap-module-source-map\n        cheap-source-map\n        --> eval-source-map / eval-cheap-module-source-map\n    生产环境：源代码要不要隐藏，调试要不要更友好\n        内联会让代码体积变大，所以在生产环境下不用内联\n        nosources-source-map 全部隐藏\n        hidden-source-map 只隐藏源代码，会提示构建后代码错误信息\n        --> source-map / cheap-module-source-map\n\n    */\n    ```\n\n- oneOf 提升构建速度\n\n    正常情况下，我们文件匹配 loader，会把所有的 loader 配置都走一遍，这样会大大降低我们的构建速度，所以我们这时候可以选 oneOf，一旦匹配到就不会继续向下匹配，但是有的文件需要匹配多个 loader，我们可以把其它的 loader 提取出来就可以了\n\n    ```js\n    const {resolve} = require('path')\n    const MiniCssExtractPlugin = require('mini-css-extract-plugin')\n    const OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    process.env.NODE_ENV = 'production'\n\n    // 复用loader\n    const commonCssLoader =  [\n        MiniCssExtractPlugin.loader,\n        'css-loader',\n        {\n            loader: 'postcss-loader',\n            options: {\n                ident: 'postcss',\n                plugins: () => [\n                    require('postcss-preset-env')()\n                ]\n            }\n        }\n    ]\n\n    module.exports = {\n        entry: './src/js/index.js',\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.js$/,\n                    exclude: /node_module/,\n                    enforce: 'pre',\n                    loader: 'eslint-loader',\n                    options: {\n                        fix: true\n                    }\n                },\n                {\n                    // 以下loader只会匹配一个\n                    // 注意：不能有两个配置处理同一类型文件\n                    // 提升构建速度，让我们这个文件以后不会反复的被多个loader都去过一遍\n                    oneOf: [\n                        {\n                            test: /\\.css$/,\n                            use: [...commonCssLoader]\n                        },\n                        {\n                            test: /\\.less$/,\n                            use: [\n                                ...commonCssLoader,\n                                'less-loader'\n                            ]\n                        },\n                        {\n                            test: /\\.js$/,\n                            exclude: /node_module/,\n                            loader: 'babel-loader',\n                            options: {\n                                presets: [\n                                    '@babel/preset-env',\n                                    {\n                                        useBuiltIns: 'usage',\n                                        corejs: {version: 3},\n                                        targets: {\n                                            chrome: '60',\n                                            firefox: '50'\n                                        }\n                                    }\n                                ]\n                            }\n                        },\n                        {\n                            test: /\\.(gif|jpg|png)/,\n                            loader: 'url-loader',\n                            options: {\n                                limit: 8 * 1024,\n                                name: '[hash:10].[ext]',\n                                outputPath: 'imgs',\n                                esModule: false\n                            }\n                        },\n                        {\n                            test: /\\.html$/,\n                            loader: 'html-loader'\n                        },\n                        {\n                            exclude: /\\.(js|css|html|less|jpg|png|gif)/,\n                            loader: 'file-loader',\n                            options: {\n                                outputPath: 'media'\n                            }\n                        }\n                    ]\n                }\n            ]\n        },\n        plugins: [\n            new MiniCssExtractPlugin({\n                filename: 'css/built.css'\n            }),\n            new OptimizeCssAssetsWebpackPlugin(),\n            new HtmlWebpackPlugin({\n                template: './src/index.html',\n                minify: {\n                    collapseWhitespace: true,\n                    removeComments: true\n                }\n            })\n\n        ],\n        mode: 'production'\n    }\n    ```","source":"_posts/webpack04.md","raw":"---\ntitle: webpack04\ndate: 2020-06-08 01:43:01\ntags: webpack\ncategories:\n- 前端构建工具\n---\n### webpack开发环境的性能优化\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;开发环境下的优化可以分为两方面：优化开发环境下打包构建速度、优化代码调试。\n\n- 优化打包构建速度（HMR）\n\n    HMR 即 hot module replacement 热模块替换 / 模块热替换，它的作用是，一个模块发生变化，只会重新打包这一个模块，而不是打包所有模块，可以极大的提升构建速度。只需要在 devServer 中配置 ``` hot: true```即可。\n\n    对于css 来说，style-loader 已经内部实现了这一个功能；而 js 是默认不能使用 HMR 这个功能的，需要修改 js 代码，添加支持HMR功能的代码，但是要注意的是，HMR 对于 js 来说只能处理非入口 js 文件的其他文件；html 也是默认不能使用 HMR 这个功能，但是 html 也不需要做这个功能，因为我们只有一个 index.html文件，所以一旦更新了，势必要所有的模块都要重新打包，但是 HMR 会导致另一个问题，就是 html 不能热更新了，想要解决这个问题就要修改我们的入口，将html文件引入。\n\n    webpack配置\n    ```js\n    /*\n    HMR：hot module replacement 热模块替换 / 模块热替换\n        作用：一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块）\n        极大提升构建速度\n\n        样式文件：可以使用HMR功能，因为style-loader内部实现了\n        js文件：默认不能使用HMR功能 --> 需要修改js代码，添加支持HMR功能的代码\n        注意：HMR功能对于js来说只能处理非入口js文件的其他文件\n        html文件：默认不能使用HMR功能。同时会导致问题：html文件不能热更新了(不需要做HMR功能)\n        解决：修改entry入口，将Html文件引入\n    */\n\n\n    const { resolve } = require('path')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    module.exports = {\n        entry: ['./src/js/index.js', './src/index.html'],\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.css$/,\n                    use: ['style-loader','css-loader']\n                },\n                {\n                    test: /\\.less$/,\n                    use: ['style-loader','css-loader','less-loader']\n                },\n                {\n                    test: /\\.(jpg|png|gif)$/,\n                    loader: 'url-loader',\n                    options: {\n                        limit: 8 * 1024,\n                        esModule: false,\n                        name: '[hash:10].[ext]',\n                        outputPath: 'imgs'\n                    }\n                },\n                {\n                    exclude: /\\.(html|js|css|less|jpg|png|gif)/,\n                    loader: 'file-loader',\n                    options: {\n                        name: '[hash:10].[ext]',\n                        outputPath: 'media'\n                    }\n                },\n                {\n                    test: /\\.html$/,\n                    loader: 'html-loader'\n                }\n            ]\n        },\n        plugins: [\n            new HtmlWebpackPlugin({\n                template: \"./src/index.html\"\n            })\n        ],\n        mode: 'development',\n        devServer: {\n            contentBase: resolve(__dirname,'build'),\n            compress: true,\n            port: 3000,\n            open: true,\n            // 开启HMR功能\n            // 当修改了webpack配置，新配置要想生效，必须重启webpack服务\n            hot: true\n        }\n    }\n    ```\n    index.js中的代码\n    ```js\n        import '../css/iconfont.css'\n        import '../css/index.less'\n        import print from './print'\n\n        console.log('js被重新加载了')\n\n        print()\n\n        function add(x,y){\n            return x+y\n        }\n        console.log(add(1,2))\n\n        if(module.hot){\n            // 一旦module.hot为true,说明开启了HMR功能 --> 让HMR工能生效\n            module.hot.accept('./print.js', function(){\n                // 方法会监听print.js文件的变化，一旦发生变化，其他模块不会重新打包构建，\n                // 会执行后面的回调函数\n                print()\n            })\n        }\n    ```\n\n- source-map\n\n    source-map 一种提供源代码到构建后代码映射技术（如果构建后代码出错了，通过映射可以追踪源代码错误），它的组合方式为``` [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map```，在 devtool 中设置即可\n    ```js\n    const { resolve } = require('path')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    module.exports = {\n        entry: ['./src/js/index.js', './src/index.html'],\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.css$/,\n                    use: ['style-loader','css-loader']\n                },\n                {\n                    test: /\\.less$/,\n                    use: ['style-loader','css-loader','less-loader']\n                },\n                {\n                    test: /\\.(jpg|png|gif)$/,\n                    loader: 'url-loader',\n                    options: {\n                    limit: 8 * 1024,\n                    esModule: false,\n                    name: '[hash:10].[ext]',\n                    outputPath: 'imgs'\n                    }\n                },\n                {\n                    exclude: /\\.(html|js|css|less|jpg|png|gif)/,\n                    loader: 'file-loader',\n                    options: {\n                    name: '[hash:10].[ext]',\n                    outputPath: 'media'\n                    }\n                },\n                {\n                    test: /\\.html$/,\n                    loader: 'html-loader'\n                }\n            ]\n        },\n        plugins: [\n            new HtmlWebpackPlugin({\n                template: \"./src/index.html\"\n            })\n        ],\n        mode: 'development',\n        devServer: {\n            contentBase: resolve(__dirname,'build'),\n            compress: true,\n            port: 3000,\n            open: true,\n            hot: true\n        },\n        devtool: 'inline-source-map'\n    }\n    /*\n    source-map: 一种提供源代码到构建后代码映射技术(如果构建后代码出错了，通过映射可以追踪源代码错误)\n\n    [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map\n    \n    source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n    inline-source-map：内联\n        只生成一个内联source-map\n        错误代码的准确信息 和 源代码的错误位置\n    hidden-source-map：外部\n        错误代码错误原因，但是没有错误位置\n        不能追踪源代码错误，只能提示到构建后代码的错误位置\n    eval-source-map：内联\n        每一个文件都生成对应的source-map，都在eval\n        错误代码的准确信息 和 源代码的错误位置\n    nosources-source-map：外部\n        错误代码的准确信息，但是没有任何源代码信息\n    cheap-source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n        只能精确到行\n    cheap-module-source-map：外部\n        错误代码的准确信息 和 源代码的错误位置\n        module会将loader的source map加入\n\n    内联和外部的区别：1.外部生成了文件，内联没有。2.内联构建速度更快\n\n    开发环境：速度快，调试更友好\n        速度快（eval>inline>cheap>...）\n        eval-cheap-source-map\n        eval-source-map\n        调试更友好\n        source-map\n        cheap-module-source-map\n        cheap-source-map\n        --> eval-source-map / eval-cheap-module-source-map\n    生产环境：源代码要不要隐藏，调试要不要更友好\n        内联会让代码体积变大，所以在生产环境下不用内联\n        nosources-source-map 全部隐藏\n        hidden-source-map 只隐藏源代码，会提示构建后代码错误信息\n        --> source-map / cheap-module-source-map\n\n    */\n    ```\n\n- oneOf 提升构建速度\n\n    正常情况下，我们文件匹配 loader，会把所有的 loader 配置都走一遍，这样会大大降低我们的构建速度，所以我们这时候可以选 oneOf，一旦匹配到就不会继续向下匹配，但是有的文件需要匹配多个 loader，我们可以把其它的 loader 提取出来就可以了\n\n    ```js\n    const {resolve} = require('path')\n    const MiniCssExtractPlugin = require('mini-css-extract-plugin')\n    const OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')\n    const HtmlWebpackPlugin = require('html-webpack-plugin')\n\n    process.env.NODE_ENV = 'production'\n\n    // 复用loader\n    const commonCssLoader =  [\n        MiniCssExtractPlugin.loader,\n        'css-loader',\n        {\n            loader: 'postcss-loader',\n            options: {\n                ident: 'postcss',\n                plugins: () => [\n                    require('postcss-preset-env')()\n                ]\n            }\n        }\n    ]\n\n    module.exports = {\n        entry: './src/js/index.js',\n        output: {\n            filename: 'js/built.js',\n            path: resolve(__dirname,'build')\n        },\n        module: {\n            rules: [\n                {\n                    test: /\\.js$/,\n                    exclude: /node_module/,\n                    enforce: 'pre',\n                    loader: 'eslint-loader',\n                    options: {\n                        fix: true\n                    }\n                },\n                {\n                    // 以下loader只会匹配一个\n                    // 注意：不能有两个配置处理同一类型文件\n                    // 提升构建速度，让我们这个文件以后不会反复的被多个loader都去过一遍\n                    oneOf: [\n                        {\n                            test: /\\.css$/,\n                            use: [...commonCssLoader]\n                        },\n                        {\n                            test: /\\.less$/,\n                            use: [\n                                ...commonCssLoader,\n                                'less-loader'\n                            ]\n                        },\n                        {\n                            test: /\\.js$/,\n                            exclude: /node_module/,\n                            loader: 'babel-loader',\n                            options: {\n                                presets: [\n                                    '@babel/preset-env',\n                                    {\n                                        useBuiltIns: 'usage',\n                                        corejs: {version: 3},\n                                        targets: {\n                                            chrome: '60',\n                                            firefox: '50'\n                                        }\n                                    }\n                                ]\n                            }\n                        },\n                        {\n                            test: /\\.(gif|jpg|png)/,\n                            loader: 'url-loader',\n                            options: {\n                                limit: 8 * 1024,\n                                name: '[hash:10].[ext]',\n                                outputPath: 'imgs',\n                                esModule: false\n                            }\n                        },\n                        {\n                            test: /\\.html$/,\n                            loader: 'html-loader'\n                        },\n                        {\n                            exclude: /\\.(js|css|html|less|jpg|png|gif)/,\n                            loader: 'file-loader',\n                            options: {\n                                outputPath: 'media'\n                            }\n                        }\n                    ]\n                }\n            ]\n        },\n        plugins: [\n            new MiniCssExtractPlugin({\n                filename: 'css/built.css'\n            }),\n            new OptimizeCssAssetsWebpackPlugin(),\n            new HtmlWebpackPlugin({\n                template: './src/index.html',\n                minify: {\n                    collapseWhitespace: true,\n                    removeComments: true\n                }\n            })\n\n        ],\n        mode: 'production'\n    }\n    ```","slug":"webpack04","published":1,"updated":"2020-08-17T12:15:00.091Z","_id":"ckb6otib10000youb2ew78jn0","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"webpack开发环境的性能优化\"><a href=\"#webpack开发环境的性能优化\" class=\"headerlink\" title=\"webpack开发环境的性能优化\"></a>webpack开发环境的性能优化</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;开发环境下的优化可以分为两方面：优化开发环境下打包构建速度、优化代码调试。</p>\n<ul>\n<li><p>优化打包构建速度（HMR）</p>\n<p>  HMR 即 hot module replacement 热模块替换 / 模块热替换，它的作用是，一个模块发生变化，只会重新打包这一个模块，而不是打包所有模块，可以极大的提升构建速度。只需要在 devServer 中配置 <code>hot: true</code>即可。</p>\n<p>  对于css 来说，style-loader 已经内部实现了这一个功能；而 js 是默认不能使用 HMR 这个功能的，需要修改 js 代码，添加支持HMR功能的代码，但是要注意的是，HMR 对于 js 来说只能处理非入口 js 文件的其他文件；html 也是默认不能使用 HMR 这个功能，但是 html 也不需要做这个功能，因为我们只有一个 index.html文件，所以一旦更新了，势必要所有的模块都要重新打包，但是 HMR 会导致另一个问题，就是 html 不能热更新了，想要解决这个问题就要修改我们的入口，将html文件引入。</p>\n<p>  webpack配置</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">HMR：hot module replacement 热模块替换 / 模块热替换</span><br><span class=\"hljs-comment\">    作用：一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块）</span><br><span class=\"hljs-comment\">    极大提升构建速度</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    样式文件：可以使用HMR功能，因为style-loader内部实现了</span><br><span class=\"hljs-comment\">    js文件：默认不能使用HMR功能 --&gt; 需要修改js代码，添加支持HMR功能的代码</span><br><span class=\"hljs-comment\">    注意：HMR功能对于js来说只能处理非入口js文件的其他文件</span><br><span class=\"hljs-comment\">    html文件：默认不能使用HMR功能。同时会导致问题：html文件不能热更新了(不需要做HMR功能)</span><br><span class=\"hljs-comment\">    解决：修改entry入口，将Html文件引入</span><br><span class=\"hljs-comment\">*/</span><br><br><br><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: [<span class=\"hljs-string\">'./src/js/index.js'</span>, <span class=\"hljs-string\">'./src/index.html'</span>],<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>,<span class=\"hljs-string\">'less-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                    limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                    esModule: <span class=\"hljs-literal\">false</span>,<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'imgs'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(html|js|css|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">\"./src/index.html\"</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span>,<br>    devServer: &#123;<br>        contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>        compress: <span class=\"hljs-literal\">true</span>,<br>        port: <span class=\"hljs-number\">3000</span>,<br>        open: <span class=\"hljs-literal\">true</span>,<br>        <span class=\"hljs-comment\">// 开启HMR功能</span><br>        <span class=\"hljs-comment\">// 当修改了webpack配置，新配置要想生效，必须重启webpack服务</span><br>        hot: <span class=\"hljs-literal\">true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>  index.js中的代码</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'../css/iconfont.css'</span><br><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'../css/index.less'</span><br><span class=\"hljs-keyword\">import</span> print <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./print'</span><br><br><span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'js被重新加载了'</span>)<br><br>print()<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">x,y</span>)</span>&#123;<br>    <span class=\"hljs-keyword\">return</span> x+y<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>))<br><br><span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">module</span>.hot)&#123;<br>    <span class=\"hljs-comment\">// 一旦module.hot为true,说明开启了HMR功能 --&gt; 让HMR工能生效</span><br>    <span class=\"hljs-built_in\">module</span>.hot.accept(<span class=\"hljs-string\">'./print.js'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>        <span class=\"hljs-comment\">// 方法会监听print.js文件的变化，一旦发生变化，其他模块不会重新打包构建，</span><br>        <span class=\"hljs-comment\">// 会执行后面的回调函数</span><br>        print()<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>source-map</p>\n<p>  source-map 一种提供源代码到构建后代码映射技术（如果构建后代码出错了，通过映射可以追踪源代码错误），它的组合方式为<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code>，在 devtool 中设置即可</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: [<span class=\"hljs-string\">'./src/js/index.js'</span>, <span class=\"hljs-string\">'./src/index.html'</span>],<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>,<span class=\"hljs-string\">'less-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                esModule: <span class=\"hljs-literal\">false</span>,<br>                name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                outputPath: <span class=\"hljs-string\">'imgs'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(html|js|css|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">\"./src/index.html\"</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span>,<br>    devServer: &#123;<br>        contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>        compress: <span class=\"hljs-literal\">true</span>,<br>        port: <span class=\"hljs-number\">3000</span>,<br>        open: <span class=\"hljs-literal\">true</span>,<br>        hot: <span class=\"hljs-literal\">true</span><br>    &#125;,<br>    devtool: <span class=\"hljs-string\">'inline-source-map'</span><br>&#125;<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">source-map: 一种提供源代码到构建后代码映射技术(如果构建后代码出错了，通过映射可以追踪源代码错误)</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">inline-source-map：内联</span><br><span class=\"hljs-comment\">    只生成一个内联source-map</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">hidden-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码错误原因，但是没有错误位置</span><br><span class=\"hljs-comment\">    不能追踪源代码错误，只能提示到构建后代码的错误位置</span><br><span class=\"hljs-comment\">eval-source-map：内联</span><br><span class=\"hljs-comment\">    每一个文件都生成对应的source-map，都在eval</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">nosources-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息，但是没有任何源代码信息</span><br><span class=\"hljs-comment\">cheap-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">    只能精确到行</span><br><span class=\"hljs-comment\">cheap-module-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">    module会将loader的source map加入</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">内联和外部的区别：1.外部生成了文件，内联没有。2.内联构建速度更快</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">开发环境：速度快，调试更友好</span><br><span class=\"hljs-comment\">    速度快（eval&gt;inline&gt;cheap&gt;...）</span><br><span class=\"hljs-comment\">    eval-cheap-source-map</span><br><span class=\"hljs-comment\">    eval-source-map</span><br><span class=\"hljs-comment\">    调试更友好</span><br><span class=\"hljs-comment\">    source-map</span><br><span class=\"hljs-comment\">    cheap-module-source-map</span><br><span class=\"hljs-comment\">    cheap-source-map</span><br><span class=\"hljs-comment\">    --&gt; eval-source-map / eval-cheap-module-source-map</span><br><span class=\"hljs-comment\">生产环境：源代码要不要隐藏，调试要不要更友好</span><br><span class=\"hljs-comment\">    内联会让代码体积变大，所以在生产环境下不用内联</span><br><span class=\"hljs-comment\">    nosources-source-map 全部隐藏</span><br><span class=\"hljs-comment\">    hidden-source-map 只隐藏源代码，会提示构建后代码错误信息</span><br><span class=\"hljs-comment\">    --&gt; source-map / cheap-module-source-map</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">*/</span><br></code></pre></td></tr></table></figure>\n</li>\n<li><p>oneOf 提升构建速度</p>\n<p>  正常情况下，我们文件匹配 loader，会把所有的 loader 配置都走一遍，这样会大大降低我们的构建速度，所以我们这时候可以选 oneOf，一旦匹配到就不会继续向下匹配，但是有的文件需要匹配多个 loader，我们可以把其它的 loader 提取出来就可以了</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> MiniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br>process.env.NODE_ENV = <span class=\"hljs-string\">'production'</span><br><br><span class=\"hljs-comment\">// 复用loader</span><br><span class=\"hljs-keyword\">const</span> commonCssLoader =  [<br>    MiniCssExtractPlugin.loader,<br>    <span class=\"hljs-string\">'css-loader'</span>,<br>    &#123;<br>        loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>        options: &#123;<br>            ident: <span class=\"hljs-string\">'postcss'</span>,<br>            plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> [<br>                <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>            ]<br>        &#125;<br>    &#125;<br>]<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                enforce: <span class=\"hljs-string\">'pre'</span>,<br>                loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>                options: &#123;<br>                    fix: <span class=\"hljs-literal\">true</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                <span class=\"hljs-comment\">// 以下loader只会匹配一个</span><br>                <span class=\"hljs-comment\">// 注意：不能有两个配置处理同一类型文件</span><br>                <span class=\"hljs-comment\">// 提升构建速度，让我们这个文件以后不会反复的被多个loader都去过一遍</span><br>                oneOf: [<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                        use: [...commonCssLoader]<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                        use: [<br>                            ...commonCssLoader,<br>                            <span class=\"hljs-string\">'less-loader'</span><br>                        ]<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                        exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                        loader: <span class=\"hljs-string\">'babel-loader'</span>,<br>                        options: &#123;<br>                            presets: [<br>                                <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                                &#123;<br>                                    useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                                    corejs: &#123;<span class=\"hljs-attr\">version</span>: <span class=\"hljs-number\">3</span>&#125;,<br>                                    targets: &#123;<br>                                        chrome: <span class=\"hljs-string\">'60'</span>,<br>                                        firefox: <span class=\"hljs-string\">'50'</span><br>                                    &#125;<br>                                &#125;<br>                            ]<br>                        &#125;<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.(gif|jpg|png)/</span>,<br>                        loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                        options: &#123;<br>                            limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                            name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                            outputPath: <span class=\"hljs-string\">'imgs'</span>,<br>                            esModule: <span class=\"hljs-literal\">false</span><br>                        &#125;<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                        loader: <span class=\"hljs-string\">'html-loader'</span><br>                    &#125;,<br>                    &#123;<br>                        exclude: <span class=\"hljs-regexp\">/\\.(js|css|html|less|jpg|png|gif)/</span>,<br>                        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                        options: &#123;<br>                            outputPath: <span class=\"hljs-string\">'media'</span><br>                        &#125;<br>                    &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> MiniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            minify: &#123;<br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br><br>    ],<br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"webpack开发环境的性能优化\"><a href=\"#webpack开发环境的性能优化\" class=\"headerlink\" title=\"webpack开发环境的性能优化\"></a>webpack开发环境的性能优化</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;开发环境下的优化可以分为两方面：优化开发环境下打包构建速度、优化代码调试。</p>\n<ul>\n<li><p>优化打包构建速度（HMR）</p>\n<p>  HMR 即 hot module replacement 热模块替换 / 模块热替换，它的作用是，一个模块发生变化，只会重新打包这一个模块，而不是打包所有模块，可以极大的提升构建速度。只需要在 devServer 中配置 <code>hot: true</code>即可。</p>\n<p>  对于css 来说，style-loader 已经内部实现了这一个功能；而 js 是默认不能使用 HMR 这个功能的，需要修改 js 代码，添加支持HMR功能的代码，但是要注意的是，HMR 对于 js 来说只能处理非入口 js 文件的其他文件；html 也是默认不能使用 HMR 这个功能，但是 html 也不需要做这个功能，因为我们只有一个 index.html文件，所以一旦更新了，势必要所有的模块都要重新打包，但是 HMR 会导致另一个问题，就是 html 不能热更新了，想要解决这个问题就要修改我们的入口，将html文件引入。</p>\n<p>  webpack配置</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">HMR：hot module replacement 热模块替换 / 模块热替换</span><br><span class=\"hljs-comment\">    作用：一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块）</span><br><span class=\"hljs-comment\">    极大提升构建速度</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    样式文件：可以使用HMR功能，因为style-loader内部实现了</span><br><span class=\"hljs-comment\">    js文件：默认不能使用HMR功能 --&gt; 需要修改js代码，添加支持HMR功能的代码</span><br><span class=\"hljs-comment\">    注意：HMR功能对于js来说只能处理非入口js文件的其他文件</span><br><span class=\"hljs-comment\">    html文件：默认不能使用HMR功能。同时会导致问题：html文件不能热更新了(不需要做HMR功能)</span><br><span class=\"hljs-comment\">    解决：修改entry入口，将Html文件引入</span><br><span class=\"hljs-comment\">*/</span><br><br><br><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: [<span class=\"hljs-string\">'./src/js/index.js'</span>, <span class=\"hljs-string\">'./src/index.html'</span>],<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>,<span class=\"hljs-string\">'less-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                    limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                    esModule: <span class=\"hljs-literal\">false</span>,<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'imgs'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(html|js|css|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                    name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                    outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">\"./src/index.html\"</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span>,<br>    devServer: &#123;<br>        contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>        compress: <span class=\"hljs-literal\">true</span>,<br>        port: <span class=\"hljs-number\">3000</span>,<br>        open: <span class=\"hljs-literal\">true</span>,<br>        <span class=\"hljs-comment\">// 开启HMR功能</span><br>        <span class=\"hljs-comment\">// 当修改了webpack配置，新配置要想生效，必须重启webpack服务</span><br>        hot: <span class=\"hljs-literal\">true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>  index.js中的代码</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'../css/iconfont.css'</span><br><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'../css/index.less'</span><br><span class=\"hljs-keyword\">import</span> print <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./print'</span><br><br><span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'js被重新加载了'</span>)<br><br>print()<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">add</span>(<span class=\"hljs-params\">x,y</span>)</span>&#123;<br>    <span class=\"hljs-keyword\">return</span> x+y<br>&#125;<br><span class=\"hljs-built_in\">console</span>.log(add(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>))<br><br><span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">module</span>.hot)&#123;<br>    <span class=\"hljs-comment\">// 一旦module.hot为true,说明开启了HMR功能 --&gt; 让HMR工能生效</span><br>    <span class=\"hljs-built_in\">module</span>.hot.accept(<span class=\"hljs-string\">'./print.js'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>        <span class=\"hljs-comment\">// 方法会监听print.js文件的变化，一旦发生变化，其他模块不会重新打包构建，</span><br>        <span class=\"hljs-comment\">// 会执行后面的回调函数</span><br>        print()<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>source-map</p>\n<p>  source-map 一种提供源代码到构建后代码映射技术（如果构建后代码出错了，通过映射可以追踪源代码错误），它的组合方式为<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code>，在 devtool 中设置即可</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123; resolve &#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: [<span class=\"hljs-string\">'./src/js/index.js'</span>, <span class=\"hljs-string\">'./src/index.html'</span>],<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                use: [<span class=\"hljs-string\">'style-loader'</span>,<span class=\"hljs-string\">'css-loader'</span>,<span class=\"hljs-string\">'less-loader'</span>]<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.(jpg|png|gif)$/</span>,<br>                loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                options: &#123;<br>                limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                esModule: <span class=\"hljs-literal\">false</span>,<br>                name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                outputPath: <span class=\"hljs-string\">'imgs'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                exclude: <span class=\"hljs-regexp\">/\\.(html|js|css|less|jpg|png|gif)/</span>,<br>                loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                options: &#123;<br>                name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                outputPath: <span class=\"hljs-string\">'media'</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                loader: <span class=\"hljs-string\">'html-loader'</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">\"./src/index.html\"</span><br>        &#125;)<br>    ],<br>    mode: <span class=\"hljs-string\">'development'</span>,<br>    devServer: &#123;<br>        contentBase: resolve(__dirname,<span class=\"hljs-string\">'build'</span>),<br>        compress: <span class=\"hljs-literal\">true</span>,<br>        port: <span class=\"hljs-number\">3000</span>,<br>        open: <span class=\"hljs-literal\">true</span>,<br>        hot: <span class=\"hljs-literal\">true</span><br>    &#125;,<br>    devtool: <span class=\"hljs-string\">'inline-source-map'</span><br>&#125;<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">source-map: 一种提供源代码到构建后代码映射技术(如果构建后代码出错了，通过映射可以追踪源代码错误)</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">inline-source-map：内联</span><br><span class=\"hljs-comment\">    只生成一个内联source-map</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">hidden-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码错误原因，但是没有错误位置</span><br><span class=\"hljs-comment\">    不能追踪源代码错误，只能提示到构建后代码的错误位置</span><br><span class=\"hljs-comment\">eval-source-map：内联</span><br><span class=\"hljs-comment\">    每一个文件都生成对应的source-map，都在eval</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">nosources-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息，但是没有任何源代码信息</span><br><span class=\"hljs-comment\">cheap-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">    只能精确到行</span><br><span class=\"hljs-comment\">cheap-module-source-map：外部</span><br><span class=\"hljs-comment\">    错误代码的准确信息 和 源代码的错误位置</span><br><span class=\"hljs-comment\">    module会将loader的source map加入</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">内联和外部的区别：1.外部生成了文件，内联没有。2.内联构建速度更快</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">开发环境：速度快，调试更友好</span><br><span class=\"hljs-comment\">    速度快（eval&gt;inline&gt;cheap&gt;...）</span><br><span class=\"hljs-comment\">    eval-cheap-source-map</span><br><span class=\"hljs-comment\">    eval-source-map</span><br><span class=\"hljs-comment\">    调试更友好</span><br><span class=\"hljs-comment\">    source-map</span><br><span class=\"hljs-comment\">    cheap-module-source-map</span><br><span class=\"hljs-comment\">    cheap-source-map</span><br><span class=\"hljs-comment\">    --&gt; eval-source-map / eval-cheap-module-source-map</span><br><span class=\"hljs-comment\">生产环境：源代码要不要隐藏，调试要不要更友好</span><br><span class=\"hljs-comment\">    内联会让代码体积变大，所以在生产环境下不用内联</span><br><span class=\"hljs-comment\">    nosources-source-map 全部隐藏</span><br><span class=\"hljs-comment\">    hidden-source-map 只隐藏源代码，会提示构建后代码错误信息</span><br><span class=\"hljs-comment\">    --&gt; source-map / cheap-module-source-map</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">*/</span><br></code></pre></td></tr></table></figure>\n</li>\n<li><p>oneOf 提升构建速度</p>\n<p>  正常情况下，我们文件匹配 loader，会把所有的 loader 配置都走一遍，这样会大大降低我们的构建速度，所以我们这时候可以选 oneOf，一旦匹配到就不会继续向下匹配，但是有的文件需要匹配多个 loader，我们可以把其它的 loader 提取出来就可以了</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">const</span> &#123;resolve&#125; = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)<br><span class=\"hljs-keyword\">const</span> MiniCssExtractPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mini-css-extract-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'optimize-css-assets-webpack-plugin'</span>)<br><span class=\"hljs-keyword\">const</span> HtmlWebpackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)<br><br>process.env.NODE_ENV = <span class=\"hljs-string\">'production'</span><br><br><span class=\"hljs-comment\">// 复用loader</span><br><span class=\"hljs-keyword\">const</span> commonCssLoader =  [<br>    MiniCssExtractPlugin.loader,<br>    <span class=\"hljs-string\">'css-loader'</span>,<br>    &#123;<br>        loader: <span class=\"hljs-string\">'postcss-loader'</span>,<br>        options: &#123;<br>            ident: <span class=\"hljs-string\">'postcss'</span>,<br>            plugins: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> [<br>                <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'postcss-preset-env'</span>)()<br>            ]<br>        &#125;<br>    &#125;<br>]<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>    entry: <span class=\"hljs-string\">'./src/js/index.js'</span>,<br>    output: &#123;<br>        filename: <span class=\"hljs-string\">'js/built.js'</span>,<br>        path: resolve(__dirname,<span class=\"hljs-string\">'build'</span>)<br>    &#125;,<br>    <span class=\"hljs-built_in\">module</span>: &#123;<br>        rules: [<br>            &#123;<br>                test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                enforce: <span class=\"hljs-string\">'pre'</span>,<br>                loader: <span class=\"hljs-string\">'eslint-loader'</span>,<br>                options: &#123;<br>                    fix: <span class=\"hljs-literal\">true</span><br>                &#125;<br>            &#125;,<br>            &#123;<br>                <span class=\"hljs-comment\">// 以下loader只会匹配一个</span><br>                <span class=\"hljs-comment\">// 注意：不能有两个配置处理同一类型文件</span><br>                <span class=\"hljs-comment\">// 提升构建速度，让我们这个文件以后不会反复的被多个loader都去过一遍</span><br>                oneOf: [<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.css$/</span>,<br>                        use: [...commonCssLoader]<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.less$/</span>,<br>                        use: [<br>                            ...commonCssLoader,<br>                            <span class=\"hljs-string\">'less-loader'</span><br>                        ]<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.js$/</span>,<br>                        exclude: <span class=\"hljs-regexp\">/node_module/</span>,<br>                        loader: <span class=\"hljs-string\">'babel-loader'</span>,<br>                        options: &#123;<br>                            presets: [<br>                                <span class=\"hljs-string\">'@babel/preset-env'</span>,<br>                                &#123;<br>                                    useBuiltIns: <span class=\"hljs-string\">'usage'</span>,<br>                                    corejs: &#123;<span class=\"hljs-attr\">version</span>: <span class=\"hljs-number\">3</span>&#125;,<br>                                    targets: &#123;<br>                                        chrome: <span class=\"hljs-string\">'60'</span>,<br>                                        firefox: <span class=\"hljs-string\">'50'</span><br>                                    &#125;<br>                                &#125;<br>                            ]<br>                        &#125;<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.(gif|jpg|png)/</span>,<br>                        loader: <span class=\"hljs-string\">'url-loader'</span>,<br>                        options: &#123;<br>                            limit: <span class=\"hljs-number\">8</span> * <span class=\"hljs-number\">1024</span>,<br>                            name: <span class=\"hljs-string\">'[hash:10].[ext]'</span>,<br>                            outputPath: <span class=\"hljs-string\">'imgs'</span>,<br>                            esModule: <span class=\"hljs-literal\">false</span><br>                        &#125;<br>                    &#125;,<br>                    &#123;<br>                        test: <span class=\"hljs-regexp\">/\\.html$/</span>,<br>                        loader: <span class=\"hljs-string\">'html-loader'</span><br>                    &#125;,<br>                    &#123;<br>                        exclude: <span class=\"hljs-regexp\">/\\.(js|css|html|less|jpg|png|gif)/</span>,<br>                        loader: <span class=\"hljs-string\">'file-loader'</span>,<br>                        options: &#123;<br>                            outputPath: <span class=\"hljs-string\">'media'</span><br>                        &#125;<br>                    &#125;<br>                ]<br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        <span class=\"hljs-keyword\">new</span> MiniCssExtractPlugin(&#123;<br>            filename: <span class=\"hljs-string\">'css/built.css'</span><br>        &#125;),<br>        <span class=\"hljs-keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),<br>        <span class=\"hljs-keyword\">new</span> HtmlWebpackPlugin(&#123;<br>            template: <span class=\"hljs-string\">'./src/index.html'</span>,<br>            minify: &#123;<br>                collapseWhitespace: <span class=\"hljs-literal\">true</span>,<br>                removeComments: <span class=\"hljs-literal\">true</span><br>            &#125;<br>        &#125;)<br><br>    ],<br>    mode: <span class=\"hljs-string\">'production'</span><br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"节流与防抖","date":"2020-08-17T12:20:30.000Z","_content":"&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;节流和防抖是我们平常开发经常会用到的性能优化之一，它们都是用来限制函数的执行频率，用来优化函数触发频率过高导致的响应速度跟不上，延迟假死或卡顿的现象，下面就让我们来详细的分析一下怎样来做节流与防抖。\n### 防抖\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的防抖就是在一定时间内如果某个事件被高频的触发,那么我们就延时让他执行，比如，我们可以设置一个定时器，时间为3s，当我们第一次触发行为时，计时器开始计时，如果在倒计时时间内没有再次触发行为，那么计时结束后会执行函数，但是在计时时间内如果又触发了该行为，则计时器开始重新计时，以此类推，其实防抖就是在触发高频率的行为时只执行一次函数，这样通过控制次数来提高性能。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;假如我们有一个滚动事件，我们想监听滚动行为来执行函数，用防抖可以这样来做\n\n```js\n  function debounce(fn, wait) {\n    let timeout\n    return function () {\n      if(!timeout){\n        let context = this\n        let arg = arguments\n        timeout = setTimeout(() => {\n          fn.apply(context, arg)\n        },wait)\n      }else {\n        clearTimeout(timeout)\n      }\n    }\n  }\n  function prin(){\n    console.log('我是防抖')\n  }\n  window.addEventListener('scroll', debounce(prin, 1000))\n```\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这样如果在1s内我们多次触发这个行为，那么计时器会不停的重新计算，直到在1s内我们没有再次触发该行为，就会执行这个 prin 事件\n\n### 节流\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的节流就是在高频的触发某个行为时，我们设置一个规定的时间，在该时间内只会执行一次，节流会稀释函数执行的频率。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们还是用上述的滚动事件来举例，代码如下\n\n```js\nfunction throttle(fn, wait) {\n  let time = 0, timer = null\n  return function () {\n    let now = Date.now()\n    let arg = arguments\n    let context = this\n    if (now - time > wait) {\n      fn.apply(context, arg)\n      time = now\n    } else (\n      timer && clearTimeout(timer)\n      timer = setTimeout( () => {\n        time = now\n        fn.apply(context, arg)\n      }, wait)\n    )\n  }\n}\nfunction prin(){\n  console.log('我是节流')\n}\nwindow.addEventListener('scroll', throttle(prin, 1000))\n```","source":"_posts/throttle.md","raw":"---\ntitle: 节流与防抖\ndate: 2020-08-17 20:20:30\ntags: JS\ncategories:\n- 性能优化\n---\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;节流和防抖是我们平常开发经常会用到的性能优化之一，它们都是用来限制函数的执行频率，用来优化函数触发频率过高导致的响应速度跟不上，延迟假死或卡顿的现象，下面就让我们来详细的分析一下怎样来做节流与防抖。\n### 防抖\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的防抖就是在一定时间内如果某个事件被高频的触发,那么我们就延时让他执行，比如，我们可以设置一个定时器，时间为3s，当我们第一次触发行为时，计时器开始计时，如果在倒计时时间内没有再次触发行为，那么计时结束后会执行函数，但是在计时时间内如果又触发了该行为，则计时器开始重新计时，以此类推，其实防抖就是在触发高频率的行为时只执行一次函数，这样通过控制次数来提高性能。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;假如我们有一个滚动事件，我们想监听滚动行为来执行函数，用防抖可以这样来做\n\n```js\n  function debounce(fn, wait) {\n    let timeout\n    return function () {\n      if(!timeout){\n        let context = this\n        let arg = arguments\n        timeout = setTimeout(() => {\n          fn.apply(context, arg)\n        },wait)\n      }else {\n        clearTimeout(timeout)\n      }\n    }\n  }\n  function prin(){\n    console.log('我是防抖')\n  }\n  window.addEventListener('scroll', debounce(prin, 1000))\n```\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这样如果在1s内我们多次触发这个行为，那么计时器会不停的重新计算，直到在1s内我们没有再次触发该行为，就会执行这个 prin 事件\n\n### 节流\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的节流就是在高频的触发某个行为时，我们设置一个规定的时间，在该时间内只会执行一次，节流会稀释函数执行的频率。\n\n&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们还是用上述的滚动事件来举例，代码如下\n\n```js\nfunction throttle(fn, wait) {\n  let time = 0, timer = null\n  return function () {\n    let now = Date.now()\n    let arg = arguments\n    let context = this\n    if (now - time > wait) {\n      fn.apply(context, arg)\n      time = now\n    } else (\n      timer && clearTimeout(timer)\n      timer = setTimeout( () => {\n        time = now\n        fn.apply(context, arg)\n      }, wait)\n    )\n  }\n}\nfunction prin(){\n  console.log('我是节流')\n}\nwindow.addEventListener('scroll', throttle(prin, 1000))\n```","slug":"throttle","published":1,"updated":"2020-08-18T08:29:12.804Z","_id":"ckdyhkw2a0000acol8zsua62j","comments":1,"layout":"post","photos":[],"link":"","content":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;节流和防抖是我们平常开发经常会用到的性能优化之一，它们都是用来限制函数的执行频率，用来优化函数触发频率过高导致的响应速度跟不上，延迟假死或卡顿的现象，下面就让我们来详细的分析一下怎样来做节流与防抖。</p>\n<h3 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的防抖就是在一定时间内如果某个事件被高频的触发,那么我们就延时让他执行，比如，我们可以设置一个定时器，时间为3s，当我们第一次触发行为时，计时器开始计时，如果在倒计时时间内没有再次触发行为，那么计时结束后会执行函数，但是在计时时间内如果又触发了该行为，则计时器开始重新计时，以此类推，其实防抖就是在触发高频率的行为时只执行一次函数，这样通过控制次数来提高性能。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;假如我们有一个滚动事件，我们想监听滚动行为来执行函数，用防抖可以这样来做</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">debounce</span>(<span class=\"hljs-params\">fn, wait</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> timeout<br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>&#123;<br>    <span class=\"hljs-keyword\">if</span>(!timeout)&#123;<br>      <span class=\"hljs-keyword\">let</span> context = <span class=\"hljs-keyword\">this</span><br>      <span class=\"hljs-keyword\">let</span> arg = <span class=\"hljs-built_in\">arguments</span><br>      timeout = setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> &#123;<br>        fn.apply(context, arg)<br>      &#125;,wait)<br>    &#125;<span class=\"hljs-keyword\">else</span> &#123;<br>      clearTimeout(timeout)<br>    &#125;<br>  &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">prin</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'我是防抖'</span>)<br>&#125;<br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">'scroll'</span>, debounce(prin, <span class=\"hljs-number\">1000</span>))<br></code></pre></td></tr></table></figure>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这样如果在1s内我们多次触发这个行为，那么计时器会不停的重新计算，直到在1s内我们没有再次触发该行为，就会执行这个 prin 事件</p>\n<h3 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的节流就是在高频的触发某个行为时，我们设置一个规定的时间，在该时间内只会执行一次，节流会稀释函数执行的频率。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们还是用上述的滚动事件来举例，代码如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">throttle</span>(<span class=\"hljs-params\">fn, wait</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> time = <span class=\"hljs-number\">0</span>, timer = <span class=\"hljs-literal\">null</span><br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>&#123;<br>    <span class=\"hljs-keyword\">let</span> now = <span class=\"hljs-built_in\">Date</span>.now()<br>    <span class=\"hljs-keyword\">let</span> arg = <span class=\"hljs-built_in\">arguments</span><br>    <span class=\"hljs-keyword\">let</span> context = <span class=\"hljs-keyword\">this</span><br>    <span class=\"hljs-keyword\">if</span> (now - time &gt; wait) &#123;<br>      fn.apply(context, arg)<br>      time = now<br>    &#125; <span class=\"hljs-keyword\">else</span> (<br>      timer &amp;&amp; clearTimeout(timer)<br>      timer = setTimeout( <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> &#123;<br>        time = now<br>        fn.apply(context, arg)<br>      &#125;, wait)<br>    )<br>  &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">prin</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'我是节流'</span>)<br>&#125;<br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">'scroll'</span>, throttle(prin, <span class=\"hljs-number\">1000</span>))<br></code></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;节流和防抖是我们平常开发经常会用到的性能优化之一，它们都是用来限制函数的执行频率，用来优化函数触发频率过高导致的响应速度跟不上，延迟假死或卡顿的现象，下面就让我们来详细的分析一下怎样来做节流与防抖。</p>\n<h3 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的防抖就是在一定时间内如果某个事件被高频的触发,那么我们就延时让他执行，比如，我们可以设置一个定时器，时间为3s，当我们第一次触发行为时，计时器开始计时，如果在倒计时时间内没有再次触发行为，那么计时结束后会执行函数，但是在计时时间内如果又触发了该行为，则计时器开始重新计时，以此类推，其实防抖就是在触发高频率的行为时只执行一次函数，这样通过控制次数来提高性能。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;假如我们有一个滚动事件，我们想监听滚动行为来执行函数，用防抖可以这样来做</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">debounce</span>(<span class=\"hljs-params\">fn, wait</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> timeout<br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>&#123;<br>    <span class=\"hljs-keyword\">if</span>(!timeout)&#123;<br>      <span class=\"hljs-keyword\">let</span> context = <span class=\"hljs-keyword\">this</span><br>      <span class=\"hljs-keyword\">let</span> arg = <span class=\"hljs-built_in\">arguments</span><br>      timeout = setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> &#123;<br>        fn.apply(context, arg)<br>      &#125;,wait)<br>    &#125;<span class=\"hljs-keyword\">else</span> &#123;<br>      clearTimeout(timeout)<br>    &#125;<br>  &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">prin</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'我是防抖'</span>)<br>&#125;<br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">'scroll'</span>, debounce(prin, <span class=\"hljs-number\">1000</span>))<br></code></pre></td></tr></table></figure>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;这样如果在1s内我们多次触发这个行为，那么计时器会不停的重新计算，直到在1s内我们没有再次触发该行为，就会执行这个 prin 事件</p>\n<h3 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h3><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;函数的节流就是在高频的触发某个行为时，我们设置一个规定的时间，在该时间内只会执行一次，节流会稀释函数执行的频率。</p>\n<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;我们还是用上述的滚动事件来举例，代码如下</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">throttle</span>(<span class=\"hljs-params\">fn, wait</span>) </span>&#123;<br>  <span class=\"hljs-keyword\">let</span> time = <span class=\"hljs-number\">0</span>, timer = <span class=\"hljs-literal\">null</span><br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>&#123;<br>    <span class=\"hljs-keyword\">let</span> now = <span class=\"hljs-built_in\">Date</span>.now()<br>    <span class=\"hljs-keyword\">let</span> arg = <span class=\"hljs-built_in\">arguments</span><br>    <span class=\"hljs-keyword\">let</span> context = <span class=\"hljs-keyword\">this</span><br>    <span class=\"hljs-keyword\">if</span> (now - time &gt; wait) &#123;<br>      fn.apply(context, arg)<br>      time = now<br>    &#125; <span class=\"hljs-keyword\">else</span> (<br>      timer &amp;&amp; clearTimeout(timer)<br>      timer = setTimeout( <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> &#123;<br>        time = now<br>        fn.apply(context, arg)<br>      &#125;, wait)<br>    )<br>  &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">prin</span>(<span class=\"hljs-params\"></span>)</span>&#123;<br>  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'我是节流'</span>)<br>&#125;<br><span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">'scroll'</span>, throttle(prin, <span class=\"hljs-number\">1000</span>))<br></code></pre></td></tr></table></figure>"}],"PostAsset":[{"_id":"source/_posts/hello-world/jt.png","slug":"jt.png","post":"ckaj6hfcj0006x8s68eg23mqw","modified":0,"renderable":0},{"_id":"source/_posts/hello-world/result.png","slug":"result.png","post":"ckaj6hfcj0006x8s68eg23mqw","modified":0,"renderable":0},{"_id":"source/_posts/webpack02/ catalogue.jpeg","slug":" catalogue.jpeg","post":"ckaj6hfct000ix8s67piiceta","modified":0,"renderable":0},{"_id":"source/_posts/webpack03/warn.png","slug":"warn.png","post":"ckb59sj6j0000piubfvaf5jcc","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ckaj6hfcl0008x8s6d2bd4ymp","category_id":"ckaj6hfch0004x8s69n522d81","_id":"ckaj6hfcq000fx8s6gxw5boce"},{"post_id":"ckaj6hfc70000x8s6b04p0ynh","category_id":"ckaj6hfch0004x8s69n522d81","_id":"ckaj6hfcu000jx8s66ubc6b58"},{"post_id":"ckaj6hfcf0002x8s6eoos6dv7","category_id":"ckaj6hfcm000ax8s6eead0mb4","_id":"ckaj6hfcv000mx8s6fynt0ck4"},{"post_id":"ckaj6hfcq000ex8s61xzu5w5i","category_id":"ckaj6hfch0004x8s69n522d81","_id":"ckaj6hfcv000ox8s6arn220y1"},{"post_id":"ckaj6hfcj0006x8s68eg23mqw","category_id":"ckaj6hfcm000ax8s6eead0mb4","_id":"ckaj6hfcz000qx8s67pi8evty"},{"post_id":"ckaj6hfcm0009x8s6dx2y8d7w","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckaj6hfd0000ux8s6fykb0uo5"},{"post_id":"ckaj6hfct000ix8s67piiceta","category_id":"ckaj6hfcz000rx8s6hl2gbmkg","_id":"ckaj6hfd0000xx8s60iupfcyw"},{"post_id":"ckaj6hfdi000zx8s6hjp8dzd2","category_id":"ckaj6hfcz000rx8s6hl2gbmkg","_id":"ckaj6hfdl0011x8s6goec9c5s"},{"post_id":"ckaj6hfcn000dx8s61uz838ye","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckaj6i8ko0013x8s6a9sw9t1l"},{"post_id":"ckajabadh000024s62sw1ey71","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckajabadm000224s65mb9dehd"},{"post_id":"ckaplvw5m00001lubcvzded9m","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckaplvw5x00041lubgaakfvfb"},{"post_id":"ckaplvw5u00011lubct9c3ia0","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckaplvw5y00051lub9jmk5o3d"},{"post_id":"ckaj9b6qv0000n5s6b6h1f5f6","category_id":"ckaj6hfcu000lx8s60ms885h3","_id":"ckaplvw6c00071lubgcwf6bdz"},{"post_id":"ckb59sj6j0000piubfvaf5jcc","category_id":"ckaj6hfcz000rx8s6hl2gbmkg","_id":"ckb59sj6s0002piubgcfog7j7"},{"post_id":"ckb6otib10000youb2ew78jn0","category_id":"ckaj6hfcz000rx8s6hl2gbmkg","_id":"ckb6otiba0002youb2xhcc2yy"},{"post_id":"ckdyhkw2a0000acol8zsua62j","category_id":"ckdzkgjhs00005lol1yfs906v","_id":"ckdzkgjhu00025lol58xk337b"}],"PostTag":[{"post_id":"ckaj6hfc70000x8s6b04p0ynh","tag_id":"ckaj6hfcj0005x8s6f4sbgj84","_id":"ckaj6hfcn000cx8s6b20g6tkr"},{"post_id":"ckaj6hfcf0002x8s6eoos6dv7","tag_id":"ckaj6hfcm000bx8s6fv6v7v6x","_id":"ckaj6hfcu000kx8s641xm11hs"},{"post_id":"ckaj6hfcl0008x8s6d2bd4ymp","tag_id":"ckaj6hfcr000hx8s69yps8sbg","_id":"ckaj6hfcv000px8s6dyuqa3vj"},{"post_id":"ckaj6hfcm0009x8s6dx2y8d7w","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckaj6hfcz000tx8s691bwh82i"},{"post_id":"ckaj6hfcq000ex8s61xzu5w5i","tag_id":"ckaj6hfcr000hx8s69yps8sbg","_id":"ckaj6hfd0000wx8s60gso0b6p"},{"post_id":"ckaj6hfct000ix8s67piiceta","tag_id":"ckaj6hfd0000vx8s6ev5r2uq7","_id":"ckaj6hfd0000yx8s6dwms6m5c"},{"post_id":"ckaj6hfdi000zx8s6hjp8dzd2","tag_id":"ckaj6hfd0000vx8s6ev5r2uq7","_id":"ckaj6hfdk0010x8s63s8xh4gb"},{"post_id":"ckaj6hfcn000dx8s61uz838ye","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckaj6i8kn0012x8s67rvsail1"},{"post_id":"ckajabadh000024s62sw1ey71","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckajabadm000124s60d3b47z1"},{"post_id":"ckaplvw5m00001lubcvzded9m","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckaplvw5w00021lub6y6u714f"},{"post_id":"ckaplvw5u00011lubct9c3ia0","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckaplvw5x00031lub5n2caqlp"},{"post_id":"ckaj9b6qv0000n5s6b6h1f5f6","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckaplvw6b00061lub3zvc2wc3"},{"post_id":"ckb59sj6j0000piubfvaf5jcc","tag_id":"ckaj6hfd0000vx8s6ev5r2uq7","_id":"ckb59sj6r0001piub2sgiczf6"},{"post_id":"ckb6otib10000youb2ew78jn0","tag_id":"ckaj6hfd0000vx8s6ev5r2uq7","_id":"ckb6otib90001youbfek85bjv"},{"post_id":"ckdyhkw2a0000acol8zsua62j","tag_id":"ckaj6hfcv000nx8s6eh79a3ex","_id":"ckdzkgjht00015lol5cix8dpb"}],"Tag":[{"name":"TCP","_id":"ckaj6hfcj0005x8s6f4sbgj84"},{"name":"算法","_id":"ckaj6hfcm000bx8s6fv6v7v6x"},{"name":"http","_id":"ckaj6hfcr000hx8s69yps8sbg"},{"name":"JS","_id":"ckaj6hfcv000nx8s6eh79a3ex"},{"name":"webpack","_id":"ckaj6hfd0000vx8s6ev5r2uq7"}]}}